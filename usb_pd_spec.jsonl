{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "2.1.1", "title": "Power Delivery Source Operational Contracts ............................................................................................", "page": 13, "level": 3, "parent_id": "2.1", "full_path": "2.1.1 Power Delivery Source Operational Contracts ............................................................................................", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 13Table Of Contents\nRevision History  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2\nLIMITED COPYRIGHT LICENSE . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5\nINTELLECTUAL PROPERTY DISCLAIMER . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5\nEditors . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6\nContributors  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6\nTable Of Contents  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .13\nList of Figures . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .19\nList of Tables . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .27\n1 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .34\n1.1 Overview............................................................................................................................................ 34\n1.2 Purpose .............................................................................................................................................. 35\n1.2.1 Scope .............................................................................................................................................................................. 36\n1.3 Section Overview ........................................................................................................................... 36\n1.4 Conventions...................................................................................................................................... 37\n1.4.1 Precedence .................................................................................................................................................................. 37\n1.4.2 Keywords ..................................................................................................................................................................... 37\n1.4.3 Numbering .................................................................................................................................................................. 38\n1.5 Related Documents .......................................................................................................................  39\n1.6 Terms and Abbreviations........................................................................................................... 40\n1.7 Parameter Values........................................................................................................................... 52\n1.8 Changes from Revision 3.0......................................................................................................... 52\n1.9 Compatibility with Revision 2.0 .............................................................................................. 52\n2 Overview . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .53\n2.1 Introduction ..................................................................................................................................... 53\n2.1.1 Power Delivery Source Operational Contracts ............................................................................................ 53\n2.1.2 Power Delivery Contract Negotiation ............................................................................................................. 53\n2.1.3 Other Uses for Power Delivery ........................................................................................................................... 54\n2.2 Compatibility with Revision 2.0 .............................................................................................. 54\n2.3 USB Power Delivery Capable Devices ................................................................................... 55\n2.4 SOP* Communication ...................................................................................................................  57\n2.4.1 Introduction ................................................................................................................................................................ 57\n2.4.2 SOP* Collision Avoidance ...................................................................................................................................... 57\n2.4.3 SOP Communication ............................................................................................................................................... 57\n2.4.4 SOP'/SOP'' Communication with Cable Plugs .............................................................................................. 57\n2.5 Operational Overview.................................................................................................................. 59\n2.5.1 Source Operation ...................................................................................................................................................... 59\n2.5.2 Sink Operation ........................................................................................................................................................... 62\n2.5.3 Cable Plugs .................................................................................................................................................................. 65\n2.6 Architectural Overview ...............................................................................................................  66\n2.6.1 Policy ............................................................................................................................................................................. 69\n2.6.2 Message Formation and Transmission ........................................................................................................... 70\n2.6.3 Collision Avoidance ................................................................................................................................................. 70\n2.6.4 Power supply ............................................................................................................................................................. 71\n2.6.5 DFP/UFP ...................................................................................................................................................................... 71"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "2.1.2", "title": "Power Delivery Contract Negotiation .............................................................................................................", "page": 13, "level": 3, "parent_id": "2.1", "full_path": "2.1.2 Power Delivery Contract Negotiation .............................................................................................................", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 13Table Of Contents\nRevision History  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2\nLIMITED COPYRIGHT LICENSE . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5\nINTELLECTUAL PROPERTY DISCLAIMER . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5\nEditors . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6\nContributors  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6\nTable Of Contents  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .13\nList of Figures . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .19\nList of Tables . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .27\n1 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .34\n1.1 Overview............................................................................................................................................ 34\n1.2 Purpose .............................................................................................................................................. 35\n1.2.1 Scope .............................................................................................................................................................................. 36\n1.3 Section Overview ........................................................................................................................... 36\n1.4 Conventions...................................................................................................................................... 37\n1.4.1 Precedence .................................................................................................................................................................. 37\n1.4.2 Keywords ..................................................................................................................................................................... 37\n1.4.3 Numbering .................................................................................................................................................................. 38\n1.5 Related Documents .......................................................................................................................  39\n1.6 Terms and Abbreviations........................................................................................................... 40\n1.7 Parameter Values........................................................................................................................... 52\n1.8 Changes from Revision 3.0......................................................................................................... 52\n1.9 Compatibility with Revision 2.0 .............................................................................................. 52\n2 Overview . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .53\n2.1 Introduction ..................................................................................................................................... 53\n2.1.1 Power Delivery Source Operational Contracts ............................................................................................ 53\n2.1.2 Power Delivery Contract Negotiation ............................................................................................................. 53\n2.1.3 Other Uses for Power Delivery ........................................................................................................................... 54\n2.2 Compatibility with Revision 2.0 .............................................................................................. 54\n2.3 USB Power Delivery Capable Devices ................................................................................... 55\n2.4 SOP* Communication ...................................................................................................................  57\n2.4.1 Introduction ................................................................................................................................................................ 57\n2.4.2 SOP* Collision Avoidance ...................................................................................................................................... 57\n2.4.3 SOP Communication ............................................................................................................................................... 57\n2.4.4 SOP'/SOP'' Communication with Cable Plugs .............................................................................................. 57\n2.5 Operational Overview.................................................................................................................. 59\n2.5.1 Source Operation ...................................................................................................................................................... 59\n2.5.2 Sink Operation ........................................................................................................................................................... 62\n2.5.3 Cable Plugs .................................................................................................................................................................. 65\n2.6 Architectural Overview ...............................................................................................................  66\n2.6.1 Policy ............................................................................................................................................................................. 69\n2.6.2 Message Formation and Transmission ........................................................................................................... 70\n2.6.3 Collision Avoidance ................................................................................................................................................. 70\n2.6.4 Power supply ............................................................................................................................................................. 71\n2.6.5 DFP/UFP ...................................................................................................................................................................... 71"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "2.3", "title": "USB Power Delivery Capable Devices ...................................................................................", "page": 13, "level": 2, "parent_id": "2", "full_path": "2.3 USB Power Delivery Capable Devices ...................................................................................", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 13Table Of Contents\nRevision History  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2\nLIMITED COPYRIGHT LICENSE . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5\nINTELLECTUAL PROPERTY DISCLAIMER . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5\nEditors . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6\nContributors  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6\nTable Of Contents  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .13\nList of Figures . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .19\nList of Tables . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .27\n1 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .34\n1.1 Overview............................................................................................................................................ 34\n1.2 Purpose .............................................................................................................................................. 35\n1.2.1 Scope .............................................................................................................................................................................. 36\n1.3 Section Overview ........................................................................................................................... 36\n1.4 Conventions...................................................................................................................................... 37\n1.4.1 Precedence .................................................................................................................................................................. 37\n1.4.2 Keywords ..................................................................................................................................................................... 37\n1.4.3 Numbering .................................................................................................................................................................. 38\n1.5 Related Documents .......................................................................................................................  39\n1.6 Terms and Abbreviations........................................................................................................... 40\n1.7 Parameter Values........................................................................................................................... 52\n1.8 Changes from Revision 3.0......................................................................................................... 52\n1.9 Compatibility with Revision 2.0 .............................................................................................. 52\n2 Overview . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .53\n2.1 Introduction ..................................................................................................................................... 53\n2.1.1 Power Delivery Source Operational Contracts ............................................................................................ 53\n2.1.2 Power Delivery Contract Negotiation ............................................................................................................. 53\n2.1.3 Other Uses for Power Delivery ........................................................................................................................... 54\n2.2 Compatibility with Revision 2.0 .............................................................................................. 54\n2.3 USB Power Delivery Capable Devices ................................................................................... 55\n2.4 SOP* Communication ...................................................................................................................  57\n2.4.1 Introduction ................................................................................................................................................................ 57\n2.4.2 SOP* Collision Avoidance ...................................................................................................................................... 57\n2.4.3 SOP Communication ............................................................................................................................................... 57\n2.4.4 SOP'/SOP'' Communication with Cable Plugs .............................................................................................. 57\n2.5 Operational Overview.................................................................................................................. 59\n2.5.1 Source Operation ...................................................................................................................................................... 59\n2.5.2 Sink Operation ........................................................................................................................................................... 62\n2.5.3 Cable Plugs .................................................................................................................................................................. 65\n2.6 Architectural Overview ...............................................................................................................  66\n2.6.1 Policy ............................................................................................................................................................................. 69\n2.6.2 Message Formation and Transmission ........................................................................................................... 70\n2.6.3 Collision Avoidance ................................................................................................................................................. 70\n2.6.4 Power supply ............................................................................................................................................................. 71\n2.6.5 DFP/UFP ...................................................................................................................................................................... 71"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "2.4.4", "title": "SOP'/SOP'' Communication with Cable Plugs ..............................................................................................", "page": 13, "level": 3, "parent_id": "2.4", "full_path": "2.4.4 SOP'/SOP'' Communication with Cable Plugs ..............................................................................................", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 13Table Of Contents\nRevision History  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2\nLIMITED COPYRIGHT LICENSE . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5\nINTELLECTUAL PROPERTY DISCLAIMER . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5\nEditors . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6\nContributors  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6\nTable Of Contents  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .13\nList of Figures . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .19\nList of Tables . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .27\n1 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .34\n1.1 Overview............................................................................................................................................ 34\n1.2 Purpose .............................................................................................................................................. 35\n1.2.1 Scope .............................................................................................................................................................................. 36\n1.3 Section Overview ........................................................................................................................... 36\n1.4 Conventions...................................................................................................................................... 37\n1.4.1 Precedence .................................................................................................................................................................. 37\n1.4.2 Keywords ..................................................................................................................................................................... 37\n1.4.3 Numbering .................................................................................................................................................................. 38\n1.5 Related Documents .......................................................................................................................  39\n1.6 Terms and Abbreviations........................................................................................................... 40\n1.7 Parameter Values........................................................................................................................... 52\n1.8 Changes from Revision 3.0......................................................................................................... 52\n1.9 Compatibility with Revision 2.0 .............................................................................................. 52\n2 Overview . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .53\n2.1 Introduction ..................................................................................................................................... 53\n2.1.1 Power Delivery Source Operational Contracts ............................................................................................ 53\n2.1.2 Power Delivery Contract Negotiation ............................................................................................................. 53\n2.1.3 Other Uses for Power Delivery ........................................................................................................................... 54\n2.2 Compatibility with Revision 2.0 .............................................................................................. 54\n2.3 USB Power Delivery Capable Devices ................................................................................... 55\n2.4 SOP* Communication ...................................................................................................................  57\n2.4.1 Introduction ................................................................................................................................................................ 57\n2.4.2 SOP* Collision Avoidance ...................................................................................................................................... 57\n2.4.3 SOP Communication ............................................................................................................................................... 57\n2.4.4 SOP'/SOP'' Communication with Cable Plugs .............................................................................................. 57\n2.5 Operational Overview.................................................................................................................. 59\n2.5.1 Source Operation ...................................................................................................................................................... 59\n2.5.2 Sink Operation ........................................................................................................................................................... 62\n2.5.3 Cable Plugs .................................................................................................................................................................. 65\n2.6 Architectural Overview ...............................................................................................................  66\n2.6.1 Policy ............................................................................................................................................................................. 69\n2.6.2 Message Formation and Transmission ........................................................................................................... 70\n2.6.3 Collision Avoidance ................................................................................................................................................. 70\n2.6.4 Power supply ............................................................................................................................................................. 71\n2.6.5 DFP/UFP ...................................................................................................................................................................... 71"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "2.6.2", "title": "Message Formation and Transmission ...........................................................................................................", "page": 13, "level": 3, "parent_id": "2.6", "full_path": "2.6.2 Message Formation and Transmission ...........................................................................................................", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 13Table Of Contents\nRevision History  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2\nLIMITED COPYRIGHT LICENSE . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5\nINTELLECTUAL PROPERTY DISCLAIMER . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5\nEditors . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6\nContributors  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6\nTable Of Contents  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .13\nList of Figures . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .19\nList of Tables . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .27\n1 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .34\n1.1 Overview............................................................................................................................................ 34\n1.2 Purpose .............................................................................................................................................. 35\n1.2.1 Scope .............................................................................................................................................................................. 36\n1.3 Section Overview ........................................................................................................................... 36\n1.4 Conventions...................................................................................................................................... 37\n1.4.1 Precedence .................................................................................................................................................................. 37\n1.4.2 Keywords ..................................................................................................................................................................... 37\n1.4.3 Numbering .................................................................................................................................................................. 38\n1.5 Related Documents .......................................................................................................................  39\n1.6 Terms and Abbreviations........................................................................................................... 40\n1.7 Parameter Values........................................................................................................................... 52\n1.8 Changes from Revision 3.0......................................................................................................... 52\n1.9 Compatibility with Revision 2.0 .............................................................................................. 52\n2 Overview . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .53\n2.1 Introduction ..................................................................................................................................... 53\n2.1.1 Power Delivery Source Operational Contracts ............................................................................................ 53\n2.1.2 Power Delivery Contract Negotiation ............................................................................................................. 53\n2.1.3 Other Uses for Power Delivery ........................................................................................................................... 54\n2.2 Compatibility with Revision 2.0 .............................................................................................. 54\n2.3 USB Power Delivery Capable Devices ................................................................................... 55\n2.4 SOP* Communication ...................................................................................................................  57\n2.4.1 Introduction ................................................................................................................................................................ 57\n2.4.2 SOP* Collision Avoidance ...................................................................................................................................... 57\n2.4.3 SOP Communication ............................................................................................................................................... 57\n2.4.4 SOP'/SOP'' Communication with Cable Plugs .............................................................................................. 57\n2.5 Operational Overview.................................................................................................................. 59\n2.5.1 Source Operation ...................................................................................................................................................... 59\n2.5.2 Sink Operation ........................................................................................................................................................... 62\n2.5.3 Cable Plugs .................................................................................................................................................................. 65\n2.6 Architectural Overview ...............................................................................................................  66\n2.6.1 Policy ............................................................................................................................................................................. 69\n2.6.2 Message Formation and Transmission ........................................................................................................... 70\n2.6.3 Collision Avoidance ................................................................................................................................................. 70\n2.6.4 Power supply ............................................................................................................................................................. 71\n2.6.5 DFP/UFP ...................................................................................................................................................................... 71"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "2.6.7", "title": "Interactions between Non-PD, BC, and PD devices ...................................................................................", "page": 14, "level": 3, "parent_id": "2.6", "full_path": "2.6.7 Interactions between Non-PD, BC, and PD devices ...................................................................................", "tags": [], "content": "Page 14 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-102.6.6 Cable and Connectors ............................................................................................................................................. 72\n2.6.7 Interactions between Non-PD, BC, and PD devices ................................................................................... 72\n2.6.8 Power Rules ................................................................................................................................................................ 72\n2.7 Extended Power Range (EPR) Operation............................................................................ 73\n2.8 Charging Models............................................................................................................................. 75\n2.8.1 Fixed Supply Charging Models ........................................................................................................................... 75\n2.8.2 Programmable Power Supply (PPS) Charging Models ............................................................................ 75\n2.8.3 Adjustable Voltage Supply (AVS) Charging Models .................................................................................. 76\n3 USB Type-A and USB Type-B Cable Assemblies and Connectors . . . . . .77\n4 Electrical Requirements. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .78\n4.1 Interoperability with other USB Specifications ................................................................ 78\n4.2 Dead Battery Detection / Unpowered Port Detection................................................... 78\n4.3 Cable IR Ground Drop (IR Drop) ............................................................................................. 78\n4.4 Cable Type Detection.................................................................................................................... 78\n5 Physical Layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .79\n5.1 Physical Layer Overview ............................................................................................................ 79\n5.2 Physical Layer Functions............................................................................................................ 79\n5.3 Symbol Encoding............................................................................................................................ 80\n5.4 Ordered Sets..................................................................................................................................... 81\n5.5 Transmitted Bit Ordering........................................................................................................... 83\n5.6 Packet Format ................................................................................................................................. 84\n5.6.1 Packet Framing ......................................................................................................................................................... 84\n5.6.2 CRC ................................................................................................................................................................................. 86\n5.6.3 Packet Detection Errors ........................................................................................................................................ 89\n5.6.4 Hard Reset ................................................................................................................................................................... 89\n5.6.5 Cable Reset .................................................................................................................................................................. 90\n5.7 Collision Avoidance.......................................................................................................................  91\n5.8 Bi-phase Mark Coding (BMC) Signaling Scheme ..............................................................  92\n5.8.1 Encoding and signaling .......................................................................................................................................... 92\n5.8.2 Transmit and Receive Masks ............................................................................................................................... 96\n5.8.3 Transmitter Load Model .....................................................................................................................................103\n5.8.4 BMC Common specifications .............................................................................................................................105\n5.8.5 BMC Transmitter Specifications ......................................................................................................................106\n5.8.6 BMC Receiver Specifications .............................................................................................................................110\n5.9 Built in Self-Test (BIST)............................................................................................................  113\n5.9.1 BIST Carrier Mode .................................................................................................................................................113\n5.9.2 BIST Test Data Mode .............................................................................................................................................113\n6 Protocol Layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 114\n6.1 Overview.........................................................................................................................................  114\n6.2 Messages.........................................................................................................................................  115\n6.2.1 Message Construction ..........................................................................................................................................115\n6.3 Control Message ..........................................................................................................................  128\n6.3.1 GoodCRC Message ..................................................................................................................................................129\n6.3.2 GotoMin Message (Deprecated) .......................................................................................................................129\n6.3.3 Accept Message .......................................................................................................................................................129\n6.3.4 Reject Message ........................................................................................................................................................129\n6.3.5 Ping Message ............................................................................................................................................................130\n6.3.6 PS_RDY Message .....................................................................................................................................................130\n6.3.7 Get_Source_Cap Message ....................................................................................................................................131\n6.3.8 Get_Sink_Cap Message ..........................................................................................................................................131"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "2.7", "title": "Extended Power Range (EPR) Operation............................................................................", "page": 14, "level": 2, "parent_id": "2", "full_path": "2.7 Extended Power Range (EPR) Operation............................................................................", "tags": [], "content": "Page 14 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-102.6.6 Cable and Connectors ............................................................................................................................................. 72\n2.6.7 Interactions between Non-PD, BC, and PD devices ................................................................................... 72\n2.6.8 Power Rules ................................................................................................................................................................ 72\n2.7 Extended Power Range (EPR) Operation............................................................................ 73\n2.8 Charging Models............................................................................................................................. 75\n2.8.1 Fixed Supply Charging Models ........................................................................................................................... 75\n2.8.2 Programmable Power Supply (PPS) Charging Models ............................................................................ 75\n2.8.3 Adjustable Voltage Supply (AVS) Charging Models .................................................................................. 76\n3 USB Type-A and USB Type-B Cable Assemblies and Connectors . . . . . .77\n4 Electrical Requirements. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .78\n4.1 Interoperability with other USB Specifications ................................................................ 78\n4.2 Dead Battery Detection / Unpowered Port Detection................................................... 78\n4.3 Cable IR Ground Drop (IR Drop) ............................................................................................. 78\n4.4 Cable Type Detection.................................................................................................................... 78\n5 Physical Layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .79\n5.1 Physical Layer Overview ............................................................................................................ 79\n5.2 Physical Layer Functions............................................................................................................ 79\n5.3 Symbol Encoding............................................................................................................................ 80\n5.4 Ordered Sets..................................................................................................................................... 81\n5.5 Transmitted Bit Ordering........................................................................................................... 83\n5.6 Packet Format ................................................................................................................................. 84\n5.6.1 Packet Framing ......................................................................................................................................................... 84\n5.6.2 CRC ................................................................................................................................................................................. 86\n5.6.3 Packet Detection Errors ........................................................................................................................................ 89\n5.6.4 Hard Reset ................................................................................................................................................................... 89\n5.6.5 Cable Reset .................................................................................................................................................................. 90\n5.7 Collision Avoidance.......................................................................................................................  91\n5.8 Bi-phase Mark Coding (BMC) Signaling Scheme ..............................................................  92\n5.8.1 Encoding and signaling .......................................................................................................................................... 92\n5.8.2 Transmit and Receive Masks ............................................................................................................................... 96\n5.8.3 Transmitter Load Model .....................................................................................................................................103\n5.8.4 BMC Common specifications .............................................................................................................................105\n5.8.5 BMC Transmitter Specifications ......................................................................................................................106\n5.8.6 BMC Receiver Specifications .............................................................................................................................110\n5.9 Built in Self-Test (BIST)............................................................................................................  113\n5.9.1 BIST Carrier Mode .................................................................................................................................................113\n5.9.2 BIST Test Data Mode .............................................................................................................................................113\n6 Protocol Layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 114\n6.1 Overview.........................................................................................................................................  114\n6.2 Messages.........................................................................................................................................  115\n6.2.1 Message Construction ..........................................................................................................................................115\n6.3 Control Message ..........................................................................................................................  128\n6.3.1 GoodCRC Message ..................................................................................................................................................129\n6.3.2 GotoMin Message (Deprecated) .......................................................................................................................129\n6.3.3 Accept Message .......................................................................................................................................................129\n6.3.4 Reject Message ........................................................................................................................................................129\n6.3.5 Ping Message ............................................................................................................................................................130\n6.3.6 PS_RDY Message .....................................................................................................................................................130\n6.3.7 Get_Source_Cap Message ....................................................................................................................................131\n6.3.8 Get_Sink_Cap Message ..........................................................................................................................................131"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "2.8.2", "title": "Programmable Power Supply (PPS) Charging Models ............................................................................", "page": 14, "level": 3, "parent_id": "2.8", "full_path": "2.8.2 Programmable Power Supply (PPS) Charging Models ............................................................................", "tags": [], "content": "Page 14 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-102.6.6 Cable and Connectors ............................................................................................................................................. 72\n2.6.7 Interactions between Non-PD, BC, and PD devices ................................................................................... 72\n2.6.8 Power Rules ................................................................................................................................................................ 72\n2.7 Extended Power Range (EPR) Operation............................................................................ 73\n2.8 Charging Models............................................................................................................................. 75\n2.8.1 Fixed Supply Charging Models ........................................................................................................................... 75\n2.8.2 Programmable Power Supply (PPS) Charging Models ............................................................................ 75\n2.8.3 Adjustable Voltage Supply (AVS) Charging Models .................................................................................. 76\n3 USB Type-A and USB Type-B Cable Assemblies and Connectors . . . . . .77\n4 Electrical Requirements. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .78\n4.1 Interoperability with other USB Specifications ................................................................ 78\n4.2 Dead Battery Detection / Unpowered Port Detection................................................... 78\n4.3 Cable IR Ground Drop (IR Drop) ............................................................................................. 78\n4.4 Cable Type Detection.................................................................................................................... 78\n5 Physical Layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .79\n5.1 Physical Layer Overview ............................................................................................................ 79\n5.2 Physical Layer Functions............................................................................................................ 79\n5.3 Symbol Encoding............................................................................................................................ 80\n5.4 Ordered Sets..................................................................................................................................... 81\n5.5 Transmitted Bit Ordering........................................................................................................... 83\n5.6 Packet Format ................................................................................................................................. 84\n5.6.1 Packet Framing ......................................................................................................................................................... 84\n5.6.2 CRC ................................................................................................................................................................................. 86\n5.6.3 Packet Detection Errors ........................................................................................................................................ 89\n5.6.4 Hard Reset ................................................................................................................................................................... 89\n5.6.5 Cable Reset .................................................................................................................................................................. 90\n5.7 Collision Avoidance.......................................................................................................................  91\n5.8 Bi-phase Mark Coding (BMC) Signaling Scheme ..............................................................  92\n5.8.1 Encoding and signaling .......................................................................................................................................... 92\n5.8.2 Transmit and Receive Masks ............................................................................................................................... 96\n5.8.3 Transmitter Load Model .....................................................................................................................................103\n5.8.4 BMC Common specifications .............................................................................................................................105\n5.8.5 BMC Transmitter Specifications ......................................................................................................................106\n5.8.6 BMC Receiver Specifications .............................................................................................................................110\n5.9 Built in Self-Test (BIST)............................................................................................................  113\n5.9.1 BIST Carrier Mode .................................................................................................................................................113\n5.9.2 BIST Test Data Mode .............................................................................................................................................113\n6 Protocol Layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 114\n6.1 Overview.........................................................................................................................................  114\n6.2 Messages.........................................................................................................................................  115\n6.2.1 Message Construction ..........................................................................................................................................115\n6.3 Control Message ..........................................................................................................................  128\n6.3.1 GoodCRC Message ..................................................................................................................................................129\n6.3.2 GotoMin Message (Deprecated) .......................................................................................................................129\n6.3.3 Accept Message .......................................................................................................................................................129\n6.3.4 Reject Message ........................................................................................................................................................129\n6.3.5 Ping Message ............................................................................................................................................................130\n6.3.6 PS_RDY Message .....................................................................................................................................................130\n6.3.7 Get_Source_Cap Message ....................................................................................................................................131\n6.3.8 Get_Sink_Cap Message ..........................................................................................................................................131"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "2.8.3", "title": "Adjustable Voltage Supply (AVS) Charging Models ..................................................................................", "page": 14, "level": 3, "parent_id": "2.8", "full_path": "2.8.3 Adjustable Voltage Supply (AVS) Charging Models ..................................................................................", "tags": [], "content": "Page 14 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-102.6.6 Cable and Connectors ............................................................................................................................................. 72\n2.6.7 Interactions between Non-PD, BC, and PD devices ................................................................................... 72\n2.6.8 Power Rules ................................................................................................................................................................ 72\n2.7 Extended Power Range (EPR) Operation............................................................................ 73\n2.8 Charging Models............................................................................................................................. 75\n2.8.1 Fixed Supply Charging Models ........................................................................................................................... 75\n2.8.2 Programmable Power Supply (PPS) Charging Models ............................................................................ 75\n2.8.3 Adjustable Voltage Supply (AVS) Charging Models .................................................................................. 76\n3 USB Type-A and USB Type-B Cable Assemblies and Connectors . . . . . .77\n4 Electrical Requirements. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .78\n4.1 Interoperability with other USB Specifications ................................................................ 78\n4.2 Dead Battery Detection / Unpowered Port Detection................................................... 78\n4.3 Cable IR Ground Drop (IR Drop) ............................................................................................. 78\n4.4 Cable Type Detection.................................................................................................................... 78\n5 Physical Layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .79\n5.1 Physical Layer Overview ............................................................................................................ 79\n5.2 Physical Layer Functions............................................................................................................ 79\n5.3 Symbol Encoding............................................................................................................................ 80\n5.4 Ordered Sets..................................................................................................................................... 81\n5.5 Transmitted Bit Ordering........................................................................................................... 83\n5.6 Packet Format ................................................................................................................................. 84\n5.6.1 Packet Framing ......................................................................................................................................................... 84\n5.6.2 CRC ................................................................................................................................................................................. 86\n5.6.3 Packet Detection Errors ........................................................................................................................................ 89\n5.6.4 Hard Reset ................................................................................................................................................................... 89\n5.6.5 Cable Reset .................................................................................................................................................................. 90\n5.7 Collision Avoidance.......................................................................................................................  91\n5.8 Bi-phase Mark Coding (BMC) Signaling Scheme ..............................................................  92\n5.8.1 Encoding and signaling .......................................................................................................................................... 92\n5.8.2 Transmit and Receive Masks ............................................................................................................................... 96\n5.8.3 Transmitter Load Model .....................................................................................................................................103\n5.8.4 BMC Common specifications .............................................................................................................................105\n5.8.5 BMC Transmitter Specifications ......................................................................................................................106\n5.8.6 BMC Receiver Specifications .............................................................................................................................110\n5.9 Built in Self-Test (BIST)............................................................................................................  113\n5.9.1 BIST Carrier Mode .................................................................................................................................................113\n5.9.2 BIST Test Data Mode .............................................................................................................................................113\n6 Protocol Layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 114\n6.1 Overview.........................................................................................................................................  114\n6.2 Messages.........................................................................................................................................  115\n6.2.1 Message Construction ..........................................................................................................................................115\n6.3 Control Message ..........................................................................................................................  128\n6.3.1 GoodCRC Message ..................................................................................................................................................129\n6.3.2 GotoMin Message (Deprecated) .......................................................................................................................129\n6.3.3 Accept Message .......................................................................................................................................................129\n6.3.4 Reject Message ........................................................................................................................................................129\n6.3.5 Ping Message ............................................................................................................................................................130\n6.3.6 PS_RDY Message .....................................................................................................................................................130\n6.3.7 Get_Source_Cap Message ....................................................................................................................................131\n6.3.8 Get_Sink_Cap Message ..........................................................................................................................................131"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "4.1", "title": "Interoperability with other USB Specifications ................................................................", "page": 14, "level": 2, "parent_id": "4", "full_path": "4.1 Interoperability with other USB Specifications ................................................................", "tags": [], "content": "Page 14 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-102.6.6 Cable and Connectors ............................................................................................................................................. 72\n2.6.7 Interactions between Non-PD, BC, and PD devices ................................................................................... 72\n2.6.8 Power Rules ................................................................................................................................................................ 72\n2.7 Extended Power Range (EPR) Operation............................................................................ 73\n2.8 Charging Models............................................................................................................................. 75\n2.8.1 Fixed Supply Charging Models ........................................................................................................................... 75\n2.8.2 Programmable Power Supply (PPS) Charging Models ............................................................................ 75\n2.8.3 Adjustable Voltage Supply (AVS) Charging Models .................................................................................. 76\n3 USB Type-A and USB Type-B Cable Assemblies and Connectors . . . . . .77\n4 Electrical Requirements. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .78\n4.1 Interoperability with other USB Specifications ................................................................ 78\n4.2 Dead Battery Detection / Unpowered Port Detection................................................... 78\n4.3 Cable IR Ground Drop (IR Drop) ............................................................................................. 78\n4.4 Cable Type Detection.................................................................................................................... 78\n5 Physical Layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .79\n5.1 Physical Layer Overview ............................................................................................................ 79\n5.2 Physical Layer Functions............................................................................................................ 79\n5.3 Symbol Encoding............................................................................................................................ 80\n5.4 Ordered Sets..................................................................................................................................... 81\n5.5 Transmitted Bit Ordering........................................................................................................... 83\n5.6 Packet Format ................................................................................................................................. 84\n5.6.1 Packet Framing ......................................................................................................................................................... 84\n5.6.2 CRC ................................................................................................................................................................................. 86\n5.6.3 Packet Detection Errors ........................................................................................................................................ 89\n5.6.4 Hard Reset ................................................................................................................................................................... 89\n5.6.5 Cable Reset .................................................................................................................................................................. 90\n5.7 Collision Avoidance.......................................................................................................................  91\n5.8 Bi-phase Mark Coding (BMC) Signaling Scheme ..............................................................  92\n5.8.1 Encoding and signaling .......................................................................................................................................... 92\n5.8.2 Transmit and Receive Masks ............................................................................................................................... 96\n5.8.3 Transmitter Load Model .....................................................................................................................................103\n5.8.4 BMC Common specifications .............................................................................................................................105\n5.8.5 BMC Transmitter Specifications ......................................................................................................................106\n5.8.6 BMC Receiver Specifications .............................................................................................................................110\n5.9 Built in Self-Test (BIST)............................................................................................................  113\n5.9.1 BIST Carrier Mode .................................................................................................................................................113\n5.9.2 BIST Test Data Mode .............................................................................................................................................113\n6 Protocol Layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 114\n6.1 Overview.........................................................................................................................................  114\n6.2 Messages.........................................................................................................................................  115\n6.2.1 Message Construction ..........................................................................................................................................115\n6.3 Control Message ..........................................................................................................................  128\n6.3.1 GoodCRC Message ..................................................................................................................................................129\n6.3.2 GotoMin Message (Deprecated) .......................................................................................................................129\n6.3.3 Accept Message .......................................................................................................................................................129\n6.3.4 Reject Message ........................................................................................................................................................129\n6.3.5 Ping Message ............................................................................................................................................................130\n6.3.6 PS_RDY Message .....................................................................................................................................................130\n6.3.7 Get_Source_Cap Message ....................................................................................................................................131\n6.3.8 Get_Sink_Cap Message ..........................................................................................................................................131"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "4.2", "title": "Dead Battery Detection / Unpowered Port Detection...................................................", "page": 14, "level": 2, "parent_id": "4", "full_path": "4.2 Dead Battery Detection / Unpowered Port Detection...................................................", "tags": [], "content": "Page 14 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-102.6.6 Cable and Connectors ............................................................................................................................................. 72\n2.6.7 Interactions between Non-PD, BC, and PD devices ................................................................................... 72\n2.6.8 Power Rules ................................................................................................................................................................ 72\n2.7 Extended Power Range (EPR) Operation............................................................................ 73\n2.8 Charging Models............................................................................................................................. 75\n2.8.1 Fixed Supply Charging Models ........................................................................................................................... 75\n2.8.2 Programmable Power Supply (PPS) Charging Models ............................................................................ 75\n2.8.3 Adjustable Voltage Supply (AVS) Charging Models .................................................................................. 76\n3 USB Type-A and USB Type-B Cable Assemblies and Connectors . . . . . .77\n4 Electrical Requirements. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .78\n4.1 Interoperability with other USB Specifications ................................................................ 78\n4.2 Dead Battery Detection / Unpowered Port Detection................................................... 78\n4.3 Cable IR Ground Drop (IR Drop) ............................................................................................. 78\n4.4 Cable Type Detection.................................................................................................................... 78\n5 Physical Layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .79\n5.1 Physical Layer Overview ............................................................................................................ 79\n5.2 Physical Layer Functions............................................................................................................ 79\n5.3 Symbol Encoding............................................................................................................................ 80\n5.4 Ordered Sets..................................................................................................................................... 81\n5.5 Transmitted Bit Ordering........................................................................................................... 83\n5.6 Packet Format ................................................................................................................................. 84\n5.6.1 Packet Framing ......................................................................................................................................................... 84\n5.6.2 CRC ................................................................................................................................................................................. 86\n5.6.3 Packet Detection Errors ........................................................................................................................................ 89\n5.6.4 Hard Reset ................................................................................................................................................................... 89\n5.6.5 Cable Reset .................................................................................................................................................................. 90\n5.7 Collision Avoidance.......................................................................................................................  91\n5.8 Bi-phase Mark Coding (BMC) Signaling Scheme ..............................................................  92\n5.8.1 Encoding and signaling .......................................................................................................................................... 92\n5.8.2 Transmit and Receive Masks ............................................................................................................................... 96\n5.8.3 Transmitter Load Model .....................................................................................................................................103\n5.8.4 BMC Common specifications .............................................................................................................................105\n5.8.5 BMC Transmitter Specifications ......................................................................................................................106\n5.8.6 BMC Receiver Specifications .............................................................................................................................110\n5.9 Built in Self-Test (BIST)............................................................................................................  113\n5.9.1 BIST Carrier Mode .................................................................................................................................................113\n5.9.2 BIST Test Data Mode .............................................................................................................................................113\n6 Protocol Layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 114\n6.1 Overview.........................................................................................................................................  114\n6.2 Messages.........................................................................................................................................  115\n6.2.1 Message Construction ..........................................................................................................................................115\n6.3 Control Message ..........................................................................................................................  128\n6.3.1 GoodCRC Message ..................................................................................................................................................129\n6.3.2 GotoMin Message (Deprecated) .......................................................................................................................129\n6.3.3 Accept Message .......................................................................................................................................................129\n6.3.4 Reject Message ........................................................................................................................................................129\n6.3.5 Ping Message ............................................................................................................................................................130\n6.3.6 PS_RDY Message .....................................................................................................................................................130\n6.3.7 Get_Source_Cap Message ....................................................................................................................................131\n6.3.8 Get_Sink_Cap Message ..........................................................................................................................................131"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "5.8", "title": "Bi-phase Mark Coding (BMC) Signaling Scheme ..............................................................", "page": 14, "level": 2, "parent_id": "5", "full_path": "5.8 Bi-phase Mark Coding (BMC) Signaling Scheme ..............................................................", "tags": [], "content": "Page 14 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-102.6.6 Cable and Connectors ............................................................................................................................................. 72\n2.6.7 Interactions between Non-PD, BC, and PD devices ................................................................................... 72\n2.6.8 Power Rules ................................................................................................................................................................ 72\n2.7 Extended Power Range (EPR) Operation............................................................................ 73\n2.8 Charging Models............................................................................................................................. 75\n2.8.1 Fixed Supply Charging Models ........................................................................................................................... 75\n2.8.2 Programmable Power Supply (PPS) Charging Models ............................................................................ 75\n2.8.3 Adjustable Voltage Supply (AVS) Charging Models .................................................................................. 76\n3 USB Type-A and USB Type-B Cable Assemblies and Connectors . . . . . .77\n4 Electrical Requirements. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .78\n4.1 Interoperability with other USB Specifications ................................................................ 78\n4.2 Dead Battery Detection / Unpowered Port Detection................................................... 78\n4.3 Cable IR Ground Drop (IR Drop) ............................................................................................. 78\n4.4 Cable Type Detection.................................................................................................................... 78\n5 Physical Layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .79\n5.1 Physical Layer Overview ............................................................................................................ 79\n5.2 Physical Layer Functions............................................................................................................ 79\n5.3 Symbol Encoding............................................................................................................................ 80\n5.4 Ordered Sets..................................................................................................................................... 81\n5.5 Transmitted Bit Ordering........................................................................................................... 83\n5.6 Packet Format ................................................................................................................................. 84\n5.6.1 Packet Framing ......................................................................................................................................................... 84\n5.6.2 CRC ................................................................................................................................................................................. 86\n5.6.3 Packet Detection Errors ........................................................................................................................................ 89\n5.6.4 Hard Reset ................................................................................................................................................................... 89\n5.6.5 Cable Reset .................................................................................................................................................................. 90\n5.7 Collision Avoidance.......................................................................................................................  91\n5.8 Bi-phase Mark Coding (BMC) Signaling Scheme ..............................................................  92\n5.8.1 Encoding and signaling .......................................................................................................................................... 92\n5.8.2 Transmit and Receive Masks ............................................................................................................................... 96\n5.8.3 Transmitter Load Model .....................................................................................................................................103\n5.8.4 BMC Common specifications .............................................................................................................................105\n5.8.5 BMC Transmitter Specifications ......................................................................................................................106\n5.8.6 BMC Receiver Specifications .............................................................................................................................110\n5.9 Built in Self-Test (BIST)............................................................................................................  113\n5.9.1 BIST Carrier Mode .................................................................................................................................................113\n5.9.2 BIST Test Data Mode .............................................................................................................................................113\n6 Protocol Layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 114\n6.1 Overview.........................................................................................................................................  114\n6.2 Messages.........................................................................................................................................  115\n6.2.1 Message Construction ..........................................................................................................................................115\n6.3 Control Message ..........................................................................................................................  128\n6.3.1 GoodCRC Message ..................................................................................................................................................129\n6.3.2 GotoMin Message (Deprecated) .......................................................................................................................129\n6.3.3 Accept Message .......................................................................................................................................................129\n6.3.4 Reject Message ........................................................................................................................................................129\n6.3.5 Ping Message ............................................................................................................................................................130\n6.3.6 PS_RDY Message .....................................................................................................................................................130\n6.3.7 Get_Source_Cap Message ....................................................................................................................................131\n6.3.8 Get_Sink_Cap Message ..........................................................................................................................................131\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 156.3.9 DR_Swap Message ..................................................................................................................................................131\n6.3.10 PR_Swap Message ..................................................................................................................................................131\n6.3.11 V CONN _Swap Message ...........................................................................................................................................132\n6.3.12 Wait Message ...........................................................................................................................................................133\n6.3.13 Soft Reset Message ................................................................................................................................................134\n6.3.14 Data_Reset Message ..............................................................................................................................................135\n6.3.15 Data_Reset_Complete Message .........................................................................................................................135\n6.3.16 Not_Supported Message ......................................................................................................................................135\n6.3.17 Get_Source_Cap_Extended Message ...............................................................................................................136\n6.3.18 Get_Status Message ................................................................................................................................................136\n6.3.19 FR_Swap Message ..................................................................................................................................................136\n6.3.20 Get_PPS_Status .........................................................................................................................................................137\n6.3.21 Get_Country_Codes ................................................................................................................................................137\n6.3.22 Get_Sink_Cap_Extended Message ....................................................................................................................137\n6.3.23 Get_Source_Info Message ....................................................................................................................................137\n6.3.24 Get_Revision Message ..........................................................................................................................................137\n6.4 Data Message ................................................................................................................................  138\n6.4.1 Capabilities Message .............................................................................................................................................139\n6.4.2 Request Message ....................................................................................................................................................155\n6.4.3 BIST Message ...........................................................................................................................................................159\n6.4.4 Vendor Defined Message .....................................................................................................................................162\n6.4.5 Battery_Status Message .......................................................................................................................................196\n6.4.6 Alert Message ...........................................................................................................................................................198\n6.4.7 Get_Country_Info Message .................................................................................................................................201\n6.4.8 Enter_USB Message ...............................................................................................................................................202\n6.4.9 EPR_Request Message ..........................................................................................................................................205\n6.4.10 EPR_Mode Message ...............................................................................................................................................206\n6.4.11 Source_Info Message .............................................................................................................................................212\n6.4.12 Revision Message ...................................................................................................................................................214\n6.5 Extended Message ......................................................................................................................  215\n6.5.1 Source_Capabilities_Extended Message .......................................................................................................216\n6.5.2 Status Message ........................................................................................................................................................221\n6.5.3 Get_Battery_Cap Message ...................................................................................................................................227\n6.5.4 Get_Battery_Status Message ..............................................................................................................................227\n6.5.5 Battery_Capabilities Message ...........................................................................................................................228\n6.5.6 Get_Manufacturer_Info Message ......................................................................................................................230\n6.5.7 Manufacturer_Info Message ..............................................................................................................................231\n6.5.8 Security Messages ..................................................................................................................................................233\n6.5.9 Firmware Update Messages ..............................................................................................................................234\n6.5.10 PPS_Status Message ...............................................................................................................................................235\n6.5.11 Country_Codes Message ......................................................................................................................................237\n6.5.12 Country_Info Message ..........................................................................................................................................238\n6.5.13 Sink_Capabilities_Extended Message ............................................................................................................239\n6.5.14 Extended_Control Message ................................................................................................................................244\n6.5.15 EPR Capabilities Message ...................................................................................................................................245\n6.5.16 Vendor_Defined_Extended Message ..............................................................................................................247\n6.6 Timers..............................................................................................................................................  249\n6.6.1 CRCReceiveTimer ...................................................................................................................................................249\n6.6.2 SenderResponseTimer .........................................................................................................................................249\n6.6.3 Capability Timers ...................................................................................................................................................249\n6.6.4 Wait Timers and Times ........................................................................................................................................251\n6.6.5 Power Supply Timers ...........................................................................................................................................251\n6.6.6 NoResponseTimer .................................................................................................................................................253\n6.6.7 BIST Timers ..............................................................................................................................................................253\n6.6.8 Power Role Swap Timers ....................................................................................................................................254\n6.6.9 Soft Reset Timers ...................................................................................................................................................254\n6.6.10  Data Reset Timers .................................................................................................................................................254\n6.6.11 Hard Reset Timers .................................................................................................................................................255\n\nPage 16 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-106.6.12 Structured VDM Timers .......................................................................................................................................255\n6.6.13 V CONN  Timers ...........................................................................................................................................................257\n6.6.14 tCableMessage .........................................................................................................................................................257\n6.6.15 DiscoverIdentityTimer .........................................................................................................................................257\n6.6.16 Collision Avoidance Timers ...............................................................................................................................257\n6.6.17 Fast Role Swap Timers .........................................................................................................................................258\n6.6.18  Chunking Timers ...................................................................................................................................................258\n6.6.19 Programmable Power Supply Timers ...........................................................................................................259\n6.6.20 tEnterUSB ..................................................................................................................................................................260\n6.6.21 EPR Timers ................................................................................................................................................................260\n6.6.22 Time Values and Timers ......................................................................................................................................262\n6.7 Counters..........................................................................................................................................  265\n6.7.1 MessageID Counter ................................................................................................................................................265\n6.7.2 Retry Counter ...........................................................................................................................................................265\n6.7.3 Hard Reset Counter ...............................................................................................................................................266\n6.7.4 Capabilities Counter ..............................................................................................................................................266\n6.7.5 Discover Identity Counter ..................................................................................................................................266\n6.7.6 VDMBusyCounter ...................................................................................................................................................266\n6.7.7 Counter Values and Counters ...........................................................................................................................267\n6.8 Reset .................................................................................................................................................  268\n6.8.1 Soft Reset and Protocol Error ...........................................................................................................................268\n6.8.2 Data Reset ..................................................................................................................................................................270\n6.8.3 Hard Reset .................................................................................................................................................................270\n6.8.4 Cable Reset ................................................................................................................................................................271\n6.9 Accept, Reject and Wait............................................................................................................  272\n6.10 Collision Avoidance....................................................................................................................  273\n6.11 Message Discarding....................................................................................................................  274\n6.12 State behavior...............................................................................................................................  275\n6.12.1 Introduction to state diagrams used in Chapter 6 ...................................................................................275\n6.12.2 State Operation .......................................................................................................................................................276\n6.12.3 List of Protocol Layer States ..............................................................................................................................298\n6.13 Message Applicability ...............................................................................................................  300\n6.13.1 Applicability of Control Messages ...................................................................................................................301\n6.13.2 Applicability of Data Messages .........................................................................................................................303\n6.13.3 Applicability of Extended Messages ...............................................................................................................305\n6.13.4 Applicability of Extended Control Messages ..............................................................................................308\n6.13.5 Applicability of Structured VDM Commands .............................................................................................309\n6.13.6 Applicability of Reset Signaling ........................................................................................................................310\n6.13.7 Applicability of Fast Role Swap Request ......................................................................................................310\n6.14 Value Parameters........................................................................................................................  311\n7 Power Supply . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 312\n7.1 Source Requirements................................................................................................................  312\n7.1.1 Behavioral Aspects ................................................................................................................................................312\n7.1.2 Source Bulk Capacitance .....................................................................................................................................312\n7.1.3  Types of Sources ....................................................................................................................................................312\n7.1.4 Source Transitions .................................................................................................................................................313\n7.1.5 Response to Hard Resets ....................................................................................................................................322\n7.1.6 Changing the Output Power Capability ........................................................................................................323\n7.1.7 Robust Source Operation ....................................................................................................................................323\n7.1.8 Output Voltage Tolerance and Range ............................................................................................................325\n7.1.9 Charging and Discharging the Bulk Capacitance on V BUS .....................................................................328\n7.1.10 Swap Standby for Sources ..................................................................................................................................328\n7.1.11 Source Peak Current Operation .......................................................................................................................328\n7.1.12  Source Capabilities Extended Parameters .................................................................................................329\n7.1.13 Fast Role Swap .........................................................................................................................................................331"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "9", "title": "States and Status Reporting . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .", "page": 17, "level": 1, "parent_id": null, "full_path": "9 States and Status Reporting . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 177.1.14 Non-application of V BUS Slew Rate Limits ...................................................................................................332\n7.1.15 V CONN  Power Cycle ................................................................................................................................................333\n7.2 Sink Requirements .....................................................................................................................  335\n7.2.1 Behavioral Aspects ................................................................................................................................................335\n7.2.2 Sink Bulk Capacitance ..........................................................................................................................................335\n7.2.3 Sink Standby .............................................................................................................................................................335\n7.2.4 Suspend Power Consumption ...........................................................................................................................336\n7.2.5 Zero Negotiated Current .....................................................................................................................................336\n7.2.6 Transient Load Behavior ....................................................................................................................................336\n7.2.7 Swap Standby for Sinks .......................................................................................................................................336\n7.2.8 Sink Peak Current Operation ............................................................................................................................336\n7.2.9 Robust Sink Operation .........................................................................................................................................337\n7.2.10 Fast Role Swap .........................................................................................................................................................338\n7.3 Transitions.....................................................................................................................................  339\n7.3.1 Transitions caused by a Request Message ..................................................................................................340\n7.3.2 Transitions Caused by Power Role Swap ....................................................................................................388\n7.3.3 Transitions Caused by Hard Reset ..................................................................................................................396\n7.3.4 Transitions Caused by Fast Role Swap .........................................................................................................400\n7.4 Electrical Parameters................................................................................................................  404\n7.4.1 Source Electrical Parameters ............................................................................................................................404\n7.4.2 Sink Electrical Parameters .................................................................................................................................413\n7.4.3 Common Electrical Parameters .......................................................................................................................415\n8 Device Policy  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 416\n8.1 Overview.........................................................................................................................................  416\n8.2 Device Policy Manager..............................................................................................................  417\n8.2.1 Capabilities ................................................................................................................................................................418\n8.2.2 System Policy ...........................................................................................................................................................418\n8.2.3 Control of Source/Sink ........................................................................................................................................419\n8.2.4 Cable Detection .......................................................................................................................................................419\n8.2.5 Managing Power Requirements .......................................................................................................................420\n8.2.6 Use of \"Unconstrained Power\" bit with Batteries and AC supplies ..................................................421\n8.2.7 Interface to the Policy Engine ...........................................................................................................................423\n8.3 Policy Engine.................................................................................................................................  424\n8.3.1 Introduction ..............................................................................................................................................................424\n8.3.2 Atomic Message Sequence Diagrams ............................................................................................................425\n8.3.3 State Diagrams .........................................................................................................................................................822\n9 States and Status Reporting . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 975\n9.1 Overview.........................................................................................................................................  975\n9.1.1 PDUSB Device and Hub Requirements .........................................................................................................979\n9.1.2 Mapping to USB Device States ..........................................................................................................................980\n9.1.3 PD Software Stack ..................................................................................................................................................983\n9.1.4 PDUSB Device Enumeration ..............................................................................................................................984\n9.2 PD Specific Descriptors ............................................................................................................  985\n9.2.1 USB Power Delivery Capability Descriptor .................................................................................................986\n9.2.2 Battery Info Capability Descriptor ..................................................................................................................987\n9.2.3 PD Consumer Port Capability Descriptor ....................................................................................................988\n9.2.4 PD Provider Port Capability Descriptor .......................................................................................................989\n9.3 PD Specific Requests and Events..........................................................................................  990\n9.3.1 PD Specific Requests .............................................................................................................................................990\n9.4 PDUSB Hub and PDUSB Peripheral Device Requests..................................................  991\n9.4.1 GetBatteryStatus .....................................................................................................................................................991\n9.4.2 SetPDFeature ...........................................................................................................................................................992\n10 Power Rules . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 995"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "9.3", "title": "PD Specific Requests and Events..........................................................................................", "page": 17, "level": 2, "parent_id": "9", "full_path": "9.3 PD Specific Requests and Events..........................................................................................", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 177.1.14 Non-application of V BUS Slew Rate Limits ...................................................................................................332\n7.1.15 V CONN  Power Cycle ................................................................................................................................................333\n7.2 Sink Requirements .....................................................................................................................  335\n7.2.1 Behavioral Aspects ................................................................................................................................................335\n7.2.2 Sink Bulk Capacitance ..........................................................................................................................................335\n7.2.3 Sink Standby .............................................................................................................................................................335\n7.2.4 Suspend Power Consumption ...........................................................................................................................336\n7.2.5 Zero Negotiated Current .....................................................................................................................................336\n7.2.6 Transient Load Behavior ....................................................................................................................................336\n7.2.7 Swap Standby for Sinks .......................................................................................................................................336\n7.2.8 Sink Peak Current Operation ............................................................................................................................336\n7.2.9 Robust Sink Operation .........................................................................................................................................337\n7.2.10 Fast Role Swap .........................................................................................................................................................338\n7.3 Transitions.....................................................................................................................................  339\n7.3.1 Transitions caused by a Request Message ..................................................................................................340\n7.3.2 Transitions Caused by Power Role Swap ....................................................................................................388\n7.3.3 Transitions Caused by Hard Reset ..................................................................................................................396\n7.3.4 Transitions Caused by Fast Role Swap .........................................................................................................400\n7.4 Electrical Parameters................................................................................................................  404\n7.4.1 Source Electrical Parameters ............................................................................................................................404\n7.4.2 Sink Electrical Parameters .................................................................................................................................413\n7.4.3 Common Electrical Parameters .......................................................................................................................415\n8 Device Policy  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 416\n8.1 Overview.........................................................................................................................................  416\n8.2 Device Policy Manager..............................................................................................................  417\n8.2.1 Capabilities ................................................................................................................................................................418\n8.2.2 System Policy ...........................................................................................................................................................418\n8.2.3 Control of Source/Sink ........................................................................................................................................419\n8.2.4 Cable Detection .......................................................................................................................................................419\n8.2.5 Managing Power Requirements .......................................................................................................................420\n8.2.6 Use of \"Unconstrained Power\" bit with Batteries and AC supplies ..................................................421\n8.2.7 Interface to the Policy Engine ...........................................................................................................................423\n8.3 Policy Engine.................................................................................................................................  424\n8.3.1 Introduction ..............................................................................................................................................................424\n8.3.2 Atomic Message Sequence Diagrams ............................................................................................................425\n8.3.3 State Diagrams .........................................................................................................................................................822\n9 States and Status Reporting . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 975\n9.1 Overview.........................................................................................................................................  975\n9.1.1 PDUSB Device and Hub Requirements .........................................................................................................979\n9.1.2 Mapping to USB Device States ..........................................................................................................................980\n9.1.3 PD Software Stack ..................................................................................................................................................983\n9.1.4 PDUSB Device Enumeration ..............................................................................................................................984\n9.2 PD Specific Descriptors ............................................................................................................  985\n9.2.1 USB Power Delivery Capability Descriptor .................................................................................................986\n9.2.2 Battery Info Capability Descriptor ..................................................................................................................987\n9.2.3 PD Consumer Port Capability Descriptor ....................................................................................................988\n9.2.4 PD Provider Port Capability Descriptor .......................................................................................................989\n9.3 PD Specific Requests and Events..........................................................................................  990\n9.3.1 PD Specific Requests .............................................................................................................................................990\n9.4 PDUSB Hub and PDUSB Peripheral Device Requests..................................................  991\n9.4.1 GetBatteryStatus .....................................................................................................................................................991\n9.4.2 SetPDFeature ...........................................................................................................................................................992\n10 Power Rules . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 995"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "9.4", "title": "PDUSB Hub and PDUSB Peripheral Device Requests..................................................", "page": 17, "level": 2, "parent_id": "9", "full_path": "9.4 PDUSB Hub and PDUSB Peripheral Device Requests..................................................", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 177.1.14 Non-application of V BUS Slew Rate Limits ...................................................................................................332\n7.1.15 V CONN  Power Cycle ................................................................................................................................................333\n7.2 Sink Requirements .....................................................................................................................  335\n7.2.1 Behavioral Aspects ................................................................................................................................................335\n7.2.2 Sink Bulk Capacitance ..........................................................................................................................................335\n7.2.3 Sink Standby .............................................................................................................................................................335\n7.2.4 Suspend Power Consumption ...........................................................................................................................336\n7.2.5 Zero Negotiated Current .....................................................................................................................................336\n7.2.6 Transient Load Behavior ....................................................................................................................................336\n7.2.7 Swap Standby for Sinks .......................................................................................................................................336\n7.2.8 Sink Peak Current Operation ............................................................................................................................336\n7.2.9 Robust Sink Operation .........................................................................................................................................337\n7.2.10 Fast Role Swap .........................................................................................................................................................338\n7.3 Transitions.....................................................................................................................................  339\n7.3.1 Transitions caused by a Request Message ..................................................................................................340\n7.3.2 Transitions Caused by Power Role Swap ....................................................................................................388\n7.3.3 Transitions Caused by Hard Reset ..................................................................................................................396\n7.3.4 Transitions Caused by Fast Role Swap .........................................................................................................400\n7.4 Electrical Parameters................................................................................................................  404\n7.4.1 Source Electrical Parameters ............................................................................................................................404\n7.4.2 Sink Electrical Parameters .................................................................................................................................413\n7.4.3 Common Electrical Parameters .......................................................................................................................415\n8 Device Policy  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 416\n8.1 Overview.........................................................................................................................................  416\n8.2 Device Policy Manager..............................................................................................................  417\n8.2.1 Capabilities ................................................................................................................................................................418\n8.2.2 System Policy ...........................................................................................................................................................418\n8.2.3 Control of Source/Sink ........................................................................................................................................419\n8.2.4 Cable Detection .......................................................................................................................................................419\n8.2.5 Managing Power Requirements .......................................................................................................................420\n8.2.6 Use of \"Unconstrained Power\" bit with Batteries and AC supplies ..................................................421\n8.2.7 Interface to the Policy Engine ...........................................................................................................................423\n8.3 Policy Engine.................................................................................................................................  424\n8.3.1 Introduction ..............................................................................................................................................................424\n8.3.2 Atomic Message Sequence Diagrams ............................................................................................................425\n8.3.3 State Diagrams .........................................................................................................................................................822\n9 States and Status Reporting . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 975\n9.1 Overview.........................................................................................................................................  975\n9.1.1 PDUSB Device and Hub Requirements .........................................................................................................979\n9.1.2 Mapping to USB Device States ..........................................................................................................................980\n9.1.3 PD Software Stack ..................................................................................................................................................983\n9.1.4 PDUSB Device Enumeration ..............................................................................................................................984\n9.2 PD Specific Descriptors ............................................................................................................  985\n9.2.1 USB Power Delivery Capability Descriptor .................................................................................................986\n9.2.2 Battery Info Capability Descriptor ..................................................................................................................987\n9.2.3 PD Consumer Port Capability Descriptor ....................................................................................................988\n9.2.4 PD Provider Port Capability Descriptor .......................................................................................................989\n9.3 PD Specific Requests and Events..........................................................................................  990\n9.3.1 PD Specific Requests .............................................................................................................................................990\n9.4 PDUSB Hub and PDUSB Peripheral Device Requests..................................................  991\n9.4.1 GetBatteryStatus .....................................................................................................................................................991\n9.4.2 SetPDFeature ...........................................................................................................................................................992\n10 Power Rules . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 995\n\nPage 18 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-1010.1 Introduction ..................................................................................................................................  995\n10.2 Source Power Rules ...................................................................................................................  995\n10.2.1 Source Power Rule Considerations ................................................................................................................996\n10.2.2 Normative Voltages and Currents ...................................................................................................................997\n10.2.3 Optional Voltages/Currents ............................................................................................................................1005\n10.3 Sink Power Rules ...................................................................................................................... 1013\n10.3.1 Sink Power Rule Considerations ..................................................................................................................1013\n10.3.2 Normative Sink Rules ........................................................................................................................................1013\nA CRC calculation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1015\nA.1 C code example .......................................................................................................................... 1015\nB Message Sequence Examples (Deprecated) . . . . . . . . . . . . . . . . . . . . . . . 1016\nC VDM Command Examples . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1017\nC.1 Discover Identity Example.................................................................................................... 1017\nC.1.1 Discover Identity Command request ..........................................................................................................1017\nC.1.2 Discover Identity Command response - Active Cable. ........................................................................1018\nC.1.3 Discover Identity Command response - Hub. .........................................................................................1020\nC.2 Discover SVIDs Example ........................................................................................................ 1021\nC.2.1 Discover SVIDs Command request ..............................................................................................................1021\nC.2.2 Discover SVIDs Command response ...........................................................................................................1022\nC.3 Discover Modes Example....................................................................................................... 1023\nC.3.1 Discover Modes Command request .............................................................................................................1023\nC.3.2 Discover Modes Command response .........................................................................................................1024\nC.4 Enter Mode Example ............................................................................................................... 1025\nC.4.1 Enter Mode Command request .....................................................................................................................1025\nC.4.2 Enter Mode Command response ..................................................................................................................1026\nC.4.3 Enter Mode Command request with additional VDO. .........................................................................1027\nC.5 Exit Mode Example................................................................................................................... 1028\nC.5.1 Exit Mode Command request .........................................................................................................................1028\nC.5.2 Exit Mode Command response ......................................................................................................................1029\nC.6 Attention Example.................................................................................................................... 1030\nC.6.1 Attention Command request ..........................................................................................................................1030\nC.6.2 Attention Command request with additional VDO. ..............................................................................1031\nD BMC Receiver Design Examples . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1032\nD.1 Finite Difference Scheme....................................................................................................... 1032\nD.1.1 Sample Circuitry ..................................................................................................................................................1032\nD.1.2 Theory ......................................................................................................................................................................1032\nD.1.3 Data Recovery .......................................................................................................................................................1034\nD.1.4 Noise Zone and Detection Zone ....................................................................................................................1035\nD.2 Subtraction Scheme ................................................................................................................. 1036\nD.2.1 Sample Circuitry ..................................................................................................................................................1036\nD.2.2 Output of Each Circuit Block ..........................................................................................................................1036\nD.2.3 Subtractor Output at Power Source and Power Sink ..........................................................................1036\nD.2.4 Noise Zone and Detection Zone ....................................................................................................................1037\nE FRS System Level Example . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1038\nE.1 Overview....................................................................................................................................... 1038\nE.2 FRS Initial Setup ........................................................................................................................ 1041\nE.3 FRS Process ................................................................................................................................. 1044\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 19List of Figures\n1 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .34\n2 Overview . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .53\nFigure  2.1 Logical Structure of USB Power Delivery Capable Devices.............................................................. 55\nFigure  2.2 Example SOP' Communication between V CONN  Source and Cable Plug(s) ............................... 58\nFigure  2.3 USB Power Delivery Communications Stack.......................................................................................... 67\nFigure  2.4 USB Power Delivery Communication Over USB ................................................................................... 68\nFigure  2.5 High Level Architecture View ....................................................................................................................... 69\nFigure  2.6 Example of a Normal EPR Mode Operational Flow ............................................................................. 74\n3 USB Type-A and USB Type-B Cable Assemblies and Connectors . . . . . .77\n4 Electrical Requirements. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .78\n5 Physical Layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .79\nFigure  5.1 Interpretation of ordered sets...................................................................................................................... 81\nFigure  5.2 Transmit Order for Various Sizes of Data................................................................................................ 83\nFigure  5.3 USB Power Delivery Packet Format........................................................................................................... 84\nFigure  5.4 CRC-32 Generation ............................................................................................................................................ 88\nFigure  5.5 Line format of Hard Reset............................................................................................................................... 89\nFigure  5.6 Line format of Cable Reset.............................................................................................................................. 90\nFigure  5.7 BMC Example ....................................................................................................................................................... 92\nFigure  5.8 BMC Transmitter Block Diagram................................................................................................................. 92\nFigure  5.9 BMC Receiver Block Diagram........................................................................................................................ 93\nFigure  5.10 BMC Encoded Start of Preamble.................................................................................................................. 93\nFigure  5.11 Transmitting or Receiving BMC Encoded Frame Terminated by Zero with High-to-Low \nLast Transition..................................................................................................................................................... 94\nFigure  5.12 Transmitting or Receiving BMC Encoded Frame Terminated by One with High-to-Low \nLast Transition..................................................................................................................................................... 94\nFigure  5.13 Transmitting or Receiving BMC Encoded Frame Terminated by Zero with Low to High \nLast Transition..................................................................................................................................................... 95\nFigure  5.14 Transmitting or Receiving BMC Encoded Frame Terminated by One with Low to High Last \nTransition .............................................................................................................................................................. 95\nFigure  5.15 BMC Tx 'ONE' Mask ........................................................................................................................................... 96\nFigure  5.16 BMC Tx 'ZERO' Mask......................................................................................................................................... 97\nFigure  5.17 BMC Rx 'ONE' Mask when Sourcing Power............................................................................................. 99\nFigure  5.18 BMC Rx 'ZERO' Mask when Sourcing Power ........................................................................................100\nFigure  5.19 BMC Rx 'ONE' Mask when Power neutral..............................................................................................100\nFigure  5.20 BMC Rx 'ZERO' Mask when Power neutral ...........................................................................................101\nFigure  5.21 BMC Rx 'ONE' Mask when Sinking Power .............................................................................................101\nFigure  5.22 BMC Rx 'ZERO' Mask when Sinking Power...........................................................................................102\nFigure  5.23 Transmitter Load Model for BMC Tx from a Source .........................................................................103\nFigure  5.24 Transmitter Load Model for BMC Tx from a Sink ..............................................................................103\nFigure  5.25 Transmitter diagram illustrating zDriver..............................................................................................107\nFigure  5.26 Inter-Frame Gap Timings..............................................................................................................................108\nFigure  5.27 Example Multi-Drop Configuration showing two DRPs ..................................................................111\nFigure  5.28 Example Multi-Drop Configuration showing a DFP and UFP........................................................111\nFigure  5.29 Test Frame...........................................................................................................................................................113\n6 Protocol Layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 114\nFigure  6.1 USB Power Delivery Packet Format for a Control Message...........................................................115\nFigure  6.2 USB Power Delivery Packet Format including Data Message Payload .....................................116\nFigure  6.3 USB Power Delivery Packet Format including an Extended Message Header and Payload\n116\n\nPage 20 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10Figure  6.4 Example Security_Request sequence Unchunked (Chunked bit = 0) ........................................123\nFigure  6.5 Example byte transmission for Security_Request Message of Data Size 7 (Chunked bit is \nset to zero)...........................................................................................................................................................123\nFigure  6.6 Example byte transmission for Security_Response Message of Data Size 30 (Chunked bit \nis set to zero) ......................................................................................................................................................124\nFigure  6.7 Example Security_Request sequence Chunked (Chunked bit = 1)..............................................125\nFigure  6.8 Example Security_Request Message of Data Size 7 (Chunked bit set to 1) .............................126\nFigure  6.9 Example Chunk 0 of Security_Response Message of Data Size 30 (Chunked bit set to 1)126\nFigure  6.10 Example byte transmission for a Security_Response Message Chunk request (Chunked bit \nis set to 1).............................................................................................................................................................127\nFigure  6.11 Example Chunk 1 of Security_Response Message of Data Size 30 (Chunked bit set to 1)127\nFigure  6.12 SPR Capabilities Message Construction..................................................................................................152\nFigure  6.13 Example Capabilities Message with 2 Power Data Objects............................................................152\nFigure  6.14 BIST Message .....................................................................................................................................................159\nFigure  6.15 Vendor Defined Message...............................................................................................................................162\nFigure  6.16 Discover Identity Command response....................................................................................................169\nFigure  6.17 Discover Identity Command response for a DRD...............................................................................169\nFigure  6.18 Example Discover SVIDs response with 3 SVIDs................................................................................186\nFigure  6.19 Example Discover SVIDs response with 4 SVIDs................................................................................187\nFigure  6.20 Example Discover SVIDs response with 12 SVIDs followed by an empty response...........187\nFigure  6.21 Example Discover Modes response for a given SVID with 3 Modes ..........................................188\nFigure  6.22 Successful Enter Mode sequence...............................................................................................................189\nFigure  6.23 Unsuccessful Enter Mode sequence due to NAK.................................................................................190\nFigure  6.24 Exit Mode sequence.........................................................................................................................................191\nFigure  6.25 Attention Command request/response sequence .............................................................................192\nFigure  6.26 Command request/response sequence..................................................................................................193\nFigure  6.27 Enter/Exit Mode Process ..............................................................................................................................195\nFigure  6.28 Battery_Status Message .................................................................................................................................196\nFigure  6.29 Alert Message.....................................................................................................................................................198\nFigure  6.30 Get_Country_Info Message ...........................................................................................................................201\nFigure  6.31 Enter_USB Message .........................................................................................................................................203\nFigure  6.32 EPR_Request Message ....................................................................................................................................205\nFigure  6.33 EPR Mode DO Message...................................................................................................................................206\nFigure  6.34 Illustration of process to enter EPR Mode.............................................................................................208\nFigure  6.35 Source_Info Message.......................................................................................................................................212\nFigure  6.36 Revision Message Data Object ....................................................................................................................214\nFigure  6.37 Source_Capabilities_Extended Message .................................................................................................216\nFigure  6.38 SOP Status Message.........................................................................................................................................221\nFigure  6.39 SOP'/SOP'' Status Message...........................................................................................................................226\nFigure  6.40 Get_Battery_Cap Message .............................................................................................................................227\nFigure  6.41 Get_Battery_Status Message ........................................................................................................................227\nFigure  6.42 Battery_Capabilities Message......................................................................................................................228\nFigure  6.43 Get_Manufacturer_Info Message................................................................................................................230\nFigure  6.44 Manufacturer_Info Message.........................................................................................................................231\nFigure  6.45 Security_Request Message............................................................................................................................233\nFigure  6.46 Security_Response Message ........................................................................................................................233\nFigure  6.47 Firmware_Update_Request Message .......................................................................................................234\nFigure  6.48 Firmware_Update_Response Message ....................................................................................................234\nFigure  6.49 PPS_Status Message.........................................................................................................................................235\nFigure  6.50 Country_Codes Message ................................................................................................................................237\nFigure  6.51 Country_Info Message ....................................................................................................................................238\nFigure  6.52 Sink_Capabilities_Extended Message.......................................................................................................239\nFigure  6.53 Extended_Control Message ..........................................................................................................................244\nFigure  6.54 Mapping SPR Capabilities to EPR Capabilities.....................................................................................245\nFigure  6.55 EPR_Source_Capabilities message with no EPR PDOs .....................................................................246\nFigure  6.56 Vendor_Defined_Extended Message ........................................................................................................247\nFigure  6.57 Outline of States ................................................................................................................................................275\nFigure  6.58 References to states.........................................................................................................................................275\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 21Figure  6.59 Chunking architecture Showing Message and Control Flow.........................................................277\nFigure  6.60 Chunked Rx State Diagram...........................................................................................................................278\nFigure  6.61 Chunked Tx State Diagram...........................................................................................................................281\nFigure  6.62 Chunked Message Router State Diagram...............................................................................................284\nFigure  6.63 Common Protocol Layer Message Transmission State Diagram.................................................286\nFigure  6.64 Source Protocol Layer Message Transmission State Diagram......................................................289\nFigure  6.65 Sink Protocol Layer Message Transmission State Diagram...........................................................291\nFigure  6.66 Protocol layer Message reception.............................................................................................................293\nFigure  6.67 Hard/Cable Reset .............................................................................................................................................295\n7 Power Supply . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 312\nFigure  7.1 Placement of Source Bulk Capacitance ...................................................................................................312\nFigure  7.2 Transition Envelope for Positive Voltage Transitions .....................................................................313\nFigure  7.3 Transition Envelope for Negative Voltage Transitions....................................................................314\nFigure  7.4 PPS Positive Voltage Transitions...............................................................................................................315\nFigure  7.5  PPS Negative Voltage Transitions............................................................................................................316\nFigure  7.6 SPR PPS Programmable Voltage and Current Limit..........................................................................318\nFigure  7.7 SPR PPS Constant Power...............................................................................................................................319\nFigure  7.8 AVS Positive Voltage Transitions ..............................................................................................................321\nFigure  7.9 AVS Negative Voltage Transitions.............................................................................................................321\nFigure  7.10 Source V BUS and V CONN  Response to Hard Reset................................................................................323\nFigure  7.11 Application of vSrcNew and vSrcValid limits after tSrcReady......................................................325\nFigure  7.12 Expected AVS/PPS Ripple Relative to an LSB......................................................................................326\nFigure  7.13 Allowed DNL errors and tolerance of Voltage and Current in AVS/PPS mode .....................327\nFigure  7.14 Source Peak Current Overload ...................................................................................................................329\nFigure  7.15 Holdup Time Measurement .........................................................................................................................330\nFigure  7.16 V BUS Power during Fast Role Swap ..........................................................................................................331\nFigure  7.17 V BUS detection and timing during Fast Role Swap, initial V BUS (at new source) > \nvSafe5V(min)......................................................................................................................................................332\nFigure  7.18  V BUS detection and timing during Fast Role Swap, initial V BUS (at new source) < \nvSafe5V(min)......................................................................................................................................................332\nFigure  7.19 Data Reset UFP V CONN  Power Cycle .........................................................................................................333\nFigure  7.20 Data Reset DFP V CONN  Power Cycle .........................................................................................................334\nFigure  7.21 Placement of Sink Bulk Capacitance ........................................................................................................335\nFigure  7.22 Transition Diagram for Increasing the Voltage...................................................................................342\nFigure  7.23 Transition Diagram for Increasing the Voltage and Current.........................................................345\nFigure  7.24 Transition Diagram for Increasing the Voltage and Decreasing the Current.........................348\nFigure  7.25 Transition Diagram for Decreasing the Voltage and Increasing the Current.........................351\nFigure  7.26 Transition Diagram for Decreasing the Voltage..................................................................................354\nFigure  7.27 Transition Diagram for Decreasing the Voltage and the Current................................................357\nFigure  7.28 Transition Diagram for no change in Current or Voltage ...............................................................360\nFigure  7.29 Transition Diagram for Increasing the Current ..................................................................................362\nFigure  7.30 Transition Diagram for Decreasing the Current .................................................................................365\nFigure  7.31 Transition Diagram for Increasing the Programmable Power Supply Voltage.....................368\nFigure  7.32 Transition Diagram for Decreasing the Programmable Power Supply Voltage ...................371\nFigure  7.33 Transition Diagram for increasing the Current in PPS mode........................................................374\nFigure  7.34 Transition Diagram for decreasing the Current in PPS mode.......................................................377\nFigure  7.35 Transition Diagram for no change in Current or Voltage in PPS mode ....................................380\nFigure  7.36 Transition Diagram for Increasing the Adjustable Power Supply Voltage..............................382\nFigure  7.37 Transition Diagram for Decreasing the Adjustable Voltage Supply Voltage ..........................385\nFigure  7.38 Transition Diagram for no change in Current or Voltage in AVS mode....................................387\nFigure  7.39 Transition Diagram for a Sink Requested Power Role Swap ........................................................389\nFigure  7.40 Transition Diagram for a Source Requested Power Role Swap ...................................................393\nFigure  7.41 Transition Diagram for a Source Initiated Hard Reset.....................................................................397\nFigure  7.42 Transition Diagram for a Sink Initiated Hard Reset..........................................................................399\nFigure  7.43 Transition Diagram for Fast Role Swap..................................................................................................401\n\nPage 22 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-108 Device Policy  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 416\nFigure  8.1 Example of daisy chained displays ...........................................................................................................422\nFigure  8.2 Basic Message Exchange (Successful) .....................................................................................................426\nFigure  8.3 Basic Message flow indicating possible errors....................................................................................427\nFigure  8.4 Basic Message Flow with Bad followed by a Retry............................................................................428\nFigure  8.5 Successful Fixed, Variable or Battery SPR Power Negotiation.....................................................448\nFigure  8.6 Rejected Fixed, Variable or Battery SPR Power Negotiation.........................................................452\nFigure  8.7 Wait response to Fixed, Variable or Battery SPR Power Negotiation .......................................455\nFigure  8.8 SPR PPS Keep Alive..........................................................................................................................................458\nFigure  8.9 SPR Sink Makes Request (Accept) ............................................................................................................461\nFigure  8.10 SPR Sink Makes Request (Reject)..............................................................................................................464\nFigure  8.11 SPR Sink Makes Request (Wait).................................................................................................................467\nFigure  8.12 Entering EPR Mode (Success).....................................................................................................................470\nFigure  8.13 Entering EPR Mode (Failure due to non-EPR cable).........................................................................473\nFigure  8.14 Entering EPR Mode (Failure of V CONN  Swap).......................................................................................476\nFigure  8.15 Successful Fixed EPR Power Negotiation ..............................................................................................480\nFigure  8.16 Rejected Fixed EPR Power Negotiation..................................................................................................484\nFigure  8.17 Wait response to Fixed EPR Power Negotiation.................................................................................487\nFigure  8.18 EPR Keep Alive ..................................................................................................................................................490\nFigure  8.19 Exiting EPR Mode (Sink Initiated) ............................................................................................................493\nFigure  8.20 Exiting EPR Mode (Source Initiated) .......................................................................................................496\nFigure  8.21 EPR Sink Makes Request (Accept) ............................................................................................................499\nFigure  8.22 EPR Sink Makes Request (Reject) .............................................................................................................502\nFigure  8.23 EPR Sink Makes Request (Wait) ................................................................................................................505\nFigure  8.24 Unsupported message....................................................................................................................................508\nFigure  8.25 Soft Reset .............................................................................................................................................................511\nFigure  8.26 DFP Initiated Data Reset where the DFP is the V CONN  Source......................................................514\nFigure  8.27 DFP Receives Data Reset where the DFP is the V CONN  Source .....................................................517\nFigure  8.28 DFP Initiated Data Reset where the UFP is the V CONN  Source......................................................520\nFigure  8.29 DFP Receives a Data Reset where the UFP is the V CONN  Source ..................................................524\nFigure  8.30 Source initiated Hard Reset .........................................................................................................................528\nFigure  8.31 Sink Initiated Hard Reset ..............................................................................................................................531\nFigure  8.32 Source initiated reset - Sink long reset ...................................................................................................534\nFigure  8.33 Successful Power Role Swap Sequence Initiated by the Source ..................................................538\nFigure  8.34 Rejected Power Role Swap Sequence Initiated by the Source......................................................542\nFigure  8.35 Power Role Swap Sequence with wait Initiated by the Source ....................................................545\nFigure  8.36 Successful Power Role Swap Sequence Initiated by the Sink .......................................................549\nFigure  8.37 Rejected Power Role Swap Sequence Initiated by the Sink...........................................................553\nFigure  8.38 Power Role Swap Sequence with wait Initiated by the Sink .........................................................556\nFigure  8.39 Successful Fast Role Swap Sequence .......................................................................................................560\nFigure  8.40 Data Role Swap, UFP operating as Sink initiates ................................................................................564\nFigure  8.41 Rejected Data Role Swap, UFP operating as Sink initiates.............................................................567\nFigure  8.42 Data Role Swap with Wait, UFP operating as Sink initiates...........................................................570\nFigure  8.43 Data Role Swap, UFP operating as Source initiates...........................................................................573\nFigure  8.44 Rejected Data Role Swap, UFP operating as Source initiates........................................................576\nFigure  8.45 Data Role Swap with Wait, UFP operating as Source initiates .....................................................579\nFigure  8.46 Data Role Swap, DFP operating as Source initiates...........................................................................582\nFigure  8.47 Rejected Data Role Swap, DFP operating as Source initiates........................................................585\nFigure  8.48 Data Role Swap with Wait, DFP operating as Source initiates .....................................................588\nFigure  8.49 Data Role Swap, DFP operating as Sink initiates................................................................................591\nFigure  8.50 Rejected Data Role Swap, DFP operating as Sink initiates .............................................................594\nFigure  8.51 Data Role Swap with Wait, DFP operating as Sink initiates...........................................................597\nFigure  8.52 Successful VCONN Source Swap, initiated by V CONN  Source .........................................................600\nFigure  8.53 Rejected VCONN Source Swap, initiated by V CONN  Source.............................................................603\nFigure  8.54 V CONN  Source Swap with Wait, initiated by V CONN  Source.............................................................606\nFigure  8.55 V CONN  Source Swap, initiated by non-V CONN  Source.........................................................................609\nFigure  8.56 Rejected V CONN  Source Swap, initiated by non-V CONN  Source......................................................612\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 23Figure  8.57 V CONN  Source Swap with Wait....................................................................................................................615\nFigure  8.58 Source Alert to Sink.........................................................................................................................................618\nFigure  8.59 Sink Alert to Source.........................................................................................................................................620\nFigure  8.60 Sink Gets Source Status..................................................................................................................................622\nFigure  8.61 Source Gets Sink Status..................................................................................................................................625\nFigure  8.62 V CONN  Source Gets Cable Plug Status.......................................................................................................628\nFigure  8.63 Sink Gets Source PPS Status.........................................................................................................................631\nFigure  8.64 Sink Gets Source's Capabilities...................................................................................................................634\nFigure  8.65 Dual-Role Source Gets Dual-Role Sink's Capabilities as a Source ...............................................637\nFigure  8.66 Source Gets Sink's Capabilities...................................................................................................................640\nFigure  8.67 Dual-Role Sink Gets Dual-Role Source's Capabilities as a Sink ....................................................643\nFigure  8.68 Sink Gets Source's EPR Capabilities .........................................................................................................646\nFigure  8.69 Dual-Role Source Gets Dual-Role Sink's Capabilities as an EPR Source...................................649\nFigure  8.70 Source Gets Sink's EPR Capabilities .........................................................................................................652\nFigure  8.71 Dual-Role Sink Gets Dual-Role Source's Capabilities as an EPR Sink ........................................655\nFigure  8.72 Sink Gets Source's Extended Capabilities ..............................................................................................658\nFigure  8.73 Dual-Role Source Gets Dual-Role Sink's Extended Capabilities...................................................661\nFigure  8.74 Source Gets Sink's Extended Capabilities ..............................................................................................664\nFigure  8.75 Dual-Role Sink Gets Dual-Role Source's Extended Capabilities...................................................667\nFigure  8.76 Sink Gets Source's Battery Capabilities ..................................................................................................670\nFigure  8.77 Source Gets Sink's Battery Capabilities ..................................................................................................673\nFigure  8.78 Sink Gets Source's Battery Status..............................................................................................................676\nFigure  8.79 Source Gets Sink's Battery Status..............................................................................................................679\nFigure  8.80 Source Gets Sink's Port Manufacturer Information ..........................................................................682\nFigure  8.81 Sink Gets Source's Port Manufacturer Information ..........................................................................685\nFigure  8.82 Source Gets Sink's Battery Manufacturer Information....................................................................688\nFigure  8.83 Sink Gets Source's Battery Manufacturer Information....................................................................691\nFigure  8.84 V CONN  Source Gets Cable Plug's Manufacturer Information..........................................................694\nFigure  8.85 Source Gets Sink's Country Codes.............................................................................................................697\nFigure  8.86 Sink Gets Source's Country Codes.............................................................................................................700\nFigure  8.87 V CONN  Source Gets Cable Plug's Country Codes..................................................................................703\nFigure  8.88 Source Gets Sink's Country Information ................................................................................................706\nFigure  8.89 Sink Gets Source's Country Information ................................................................................................709\nFigure  8.90 V CONN  Source Gets Cable Plug's Country Information .....................................................................712\nFigure  8.91 Source Gets Sink's Revision Information ...............................................................................................715\nFigure  8.92 Sink Gets Source's Revision Information ...............................................................................................718\nFigure  8.93 V CONN  Source Gets Cable Plug's Revision Information ....................................................................721\nFigure  8.94 Sink Gets Source's Information ..................................................................................................................724\nFigure  8.95 Dual-Role Source Gets Dual-Role Sink's Information as a Source...............................................727\nFigure  8.96 Source requests security exchange with Sink......................................................................................730\nFigure  8.97 Sink requests security exchange with Source......................................................................................733\nFigure  8.98 V CONN  Source requests security exchange with Cable Plug...........................................................736\nFigure  8.99 Source requests firmware update exchange with Sink ...................................................................739\nFigure  8.100 Sink requests firmware update exchange with Source ...................................................................742\nFigure  8.101 V CONN  Source requests firmware update exchange with Cable Plug.........................................745\nFigure  8.102 Initiator to Responder Discover Identity (ACK) .................................................................................748\nFigure  8.103 Initiator to Responder Discover Identity (NAK).................................................................................751\nFigure  8.104 Initiator to Responder Discover Identity (BUSY)...............................................................................754\nFigure  8.105 Initiator to Responder Discover SVIDs (ACK) .....................................................................................757\nFigure  8.106 Initiator to Responder Discover SVIDs (NAK).....................................................................................760\nFigure  8.107 Initiator to Responder Discover SVIDs (BUSY)...................................................................................763\nFigure  8.108 Initiator to Responder Discover Modes (ACK)....................................................................................766\nFigure  8.109 Initiator to Responder Discover Modes (NAK) ...................................................................................769\nFigure  8.110 Initiator to Responder Discover Modes (BUSY)..................................................................................772\nFigure  8.111 DFP to UFP Enter Mode .................................................................................................................................775\nFigure  8.112 DFP to UFP Exit Mode.....................................................................................................................................778\nFigure  8.113 DFP to Cable Plug Enter Mode ....................................................................................................................781\nFigure  8.114 DFP to Cable Plug Exit Mode .......................................................................................................................784\n\nPage 24 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10Figure  8.115 Initiator to Responder Attention...............................................................................................................787\nFigure  8.116 BIST Carrier Mode Test .................................................................................................................................789\nFigure  8.117 BIST Test Data Test .........................................................................................................................................792\nFigure  8.118 BIST Share Capacity Mode Test..................................................................................................................795\nFigure  8.119 UFP Entering USB4 Mode (Accept)...........................................................................................................798\nFigure  8.120 UFP Entering USB4 Mode (Reject)............................................................................................................801\nFigure  8.121 UFP Entering USB4 Mode (Wait)...............................................................................................................804\nFigure  8.122 Cable Plug Entering USB4 Mode (Accept) .............................................................................................807\nFigure  8.123 Cable Plug Entering USB4 Mode (Reject)...............................................................................................810\nFigure  8.124 Cable Plug Entering USB4 Mode (Wait)..................................................................................................813\nFigure  8.125 Unstructured VDM Message Sequence ...................................................................................................816\nFigure  8.126 VDEM Message Sequence..............................................................................................................................819\nFigure  8.127 Outline of States ................................................................................................................................................822\nFigure  8.128 References to states.........................................................................................................................................823\nFigure  8.129 Example of state reference with conditions .........................................................................................823\nFigure  8.130 Example of state reference with the same entry and exit ..............................................................823\nFigure  8.131 SenderResponseTimer Policy Engine State Diagram .......................................................................825\nFigure  8.132 Source Port State Diagram ...........................................................................................................................827\nFigure  8.133 Sink Port State Diagram.................................................................................................................................835\nFigure  8.134 SOP Source Port Soft Reset and Protocol Error State Diagram....................................................841\nFigure  8.135 Sink Port Soft Reset and Protocol Error Diagram ..............................................................................843\nFigure  8.136 DFP Data_Reset Message State Diagram ................................................................................................845\nFigure  8.137 UFP Data_Reset Message State Diagram ................................................................................................847\nFigure  8.138 Source Port Not Supported Message State Diagram.........................................................................850\nFigure  8.139 Sink Port Not Supported Message State Diagram ..............................................................................852\nFigure  8.140 Source Port Source Alert State Diagram.................................................................................................854\nFigure  8.141 Sink Port Source Alert State Diagram......................................................................................................855\nFigure  8.142 Sink Port Sink Alert State Diagram...........................................................................................................856\nFigure  8.143 Source Port Sink Alert State Diagram......................................................................................................857\nFigure  8.144 Sink Port Get Source Capabilities Extended State Diagram...........................................................858\nFigure  8.145 Source Give Source Capabilities Extended State Diagram..............................................................859\nFigure  8.146 Source Port Get Sink Capabilities Extended State Diagram...........................................................860\nFigure  8.147 Sink Give Sink Capabilities Extended State Diagram........................................................................861\nFigure  8.148 Sink Port Get Source Information State Diagram...............................................................................862\nFigure  8.149 Source Give Source Information State Diagram..................................................................................863\nFigure  8.150 Get Status State Diagram...............................................................................................................................864\nFigure  8.151 Give Status State Diagram.............................................................................................................................865\nFigure  8.152 Sink Port Get Source PPS Status State Diagram ..................................................................................866\nFigure  8.153 Source Give Source PPS Status State Diagram.....................................................................................867\nFigure  8.154 Get Battery Capabilities State Diagram...................................................................................................868\nFigure  8.155 Give Battery Capabilities State Diagram ................................................................................................869\nFigure  8.156 Get Battery Status State Diagram ..............................................................................................................870\nFigure  8.157 Give Battery Status State Diagram............................................................................................................871\nFigure  8.158 Get Manufacturer Information State Diagram.....................................................................................872\nFigure  8.159 Give Manufacturer Information State Diagram...................................................................................873\nFigure  8.160 Get Country Codes State Diagram .............................................................................................................874\nFigure  8.161 Give Country Codes State Diagram...........................................................................................................875\nFigure  8.162 Get Country Information State Diagram.................................................................................................876\nFigure  8.163 Give Country Information State Diagram ..............................................................................................877\nFigure  8.164 Get Revision State Diagram..........................................................................................................................878\nFigure  8.165 Give Revision State Diagram .......................................................................................................................879\nFigure  8.166 DFP Enter_USB Message State Diagram .................................................................................................880\nFigure  8.167 UFP Enter_USB Message State Diagram .................................................................................................881\nFigure  8.168 Send security request State Diagram.......................................................................................................882\nFigure  8.169 Send security response State Diagram....................................................................................................883\nFigure  8.170 Security response received State Diagram............................................................................................884\nFigure  8.171 Send firmware update request State Diagram ....................................................................................885\nFigure  8.172 Send firmware update response State Diagram .................................................................................886\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 25Figure  8.173 Firmware update response received State Diagram.........................................................................887\nFigure  8.174 DFP to UFP Data Role Swap State Diagram...........................................................................................888\nFigure  8.175 UFP to DFP Data Role Swap State Diagram...........................................................................................891\nFigure  8.176 Dual-Role Port in Source to Sink Power Role Swap State Diagram............................................894\nFigure  8.177 Dual-role Port in Sink to Source Power Role Swap State Diagram.............................................898\nFigure  8.178 Dual-Role Port in Source to Sink Fast Role Swap State Diagram.................................................902\nFigure  8.179 Dual-role Port in Sink to Source Fast Role Swap State Diagram..................................................906\nFigure  8.180 Dual-Role (Source) Get Source Capabilities diagram .......................................................................909\nFigure  8.181 Dual-Role (Source) Give Sink Capabilities diagram ..........................................................................910\nFigure  8.182 Dual-Role (Sink) Get Sink Capabilities State Diagram......................................................................911\nFigure  8.183 Dual-Role (Sink) Give Source Capabilities State Diagram ..............................................................912\nFigure  8.184 Dual-Role (Source) Get Source Capabilities Extended State Diagram ......................................913\nFigure  8.185 Dual-Role (Sink) Give Source Capabilities Extended diagram......................................................914\nFigure  8.186 Dual-Role (Sink) Get Sink Capabilities Extended State Diagram.................................................915\nFigure  8.187 Dual-Role (Source) Give Sink Capabilities Extended diagram......................................................916\nFigure  8.188 Dual-Role (Source) Get Source Information State Diagram ..........................................................917\nFigure  8.189 Dual-Role (Source) Give Source Information diagram ....................................................................918\nFigure  8.190 V CONN  Swap State Diagram ..........................................................................................................................919\nFigure  8.191 Initiator to Port VDM Discover Identity State Diagram...................................................................922\nFigure  8.192 Initiator VDM Discover SVIDs State Diagram ......................................................................................924\nFigure  8.193 Initiator VDM Discover Modes State Diagram.....................................................................................926\nFigure  8.194 Initiator VDM Attention State Diagram ..................................................................................................928\nFigure  8.195 Responder Structured VDM Discover Identity State Diagram .....................................................929\nFigure  8.196 Responder Structured VDM Discover SVIDs State Diagram..........................................................930\nFigure  8.197 Responder Structured VDM Discover Modes State Diagram ........................................................931\nFigure  8.198 Receiving a Structured VDM Attention State Diagram ....................................................................932\nFigure  8.199 DFP VDM Mode Entry State Diagram ......................................................................................................933\nFigure  8.200 DFP VDM Mode Exit State Diagram..........................................................................................................935\nFigure  8.201 UFP Structured VDM Enter Mode State Diagram ...............................................................................937\nFigure  8.202 UFP Structured VDM Exit Mode State Diagram...................................................................................939\nFigure  8.203 Cable Ready State Diagram ..........................................................................................................................941\nFigure  8.204 Cable Plug Soft Reset State Diagram ........................................................................................................942\nFigure  8.205 Cable Plug Hard Reset State Diagram......................................................................................................943\nFigure  8.206 DFP/V CONN  Source Soft Reset or Cable Reset of a Cable Plug or VPD State Diagram.........944\nFigure  8.207 UFP/V CONN  Source Soft Reset of a Cable Plug or VPD State Diagram .......................................946\nFigure  8.208 Source Startup Structured VDM Discover Identity State Diagram .............................................947\nFigure  8.209 Cable Plug Structured VDM Enter Mode State Diagram..................................................................949\nFigure  8.210 Cable Plug Structured VDM Exit Mode State Diagram .....................................................................951\nFigure  8.211 Source EPR Mode Entry State Diagram ..................................................................................................953\nFigure  8.212 Sink EPR Mode Entry State Diagram........................................................................................................956\nFigure  8.213 Source EPR Mode Exit State Diagram......................................................................................................958\nFigure  8.214 Sink EPR Mode Exit State Diagram...........................................................................................................959\nFigure  8.215 BIST Carrier Mode State Diagram .............................................................................................................960\nFigure  8.216 BIST Test Data Mode State Diagram ........................................................................................................962\nFigure  8.217 BIST Shared Capacity Test Mode State Diagram ................................................................................964\n9 States and Status Reporting . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 975\nFigure  9.1 Example PD Topology ....................................................................................................................................976\nFigure  9.2 Mapping of PD Topology to USB ................................................................................................................977\nFigure  9.3 Use of SPM in the PD System.......................................................................................................................978\nFigure  9.4 USB Attached to USB Powered State Transition.................................................................................980\nFigure  9.5 Any USB State to USB Attached State Transition (When operating as a Consumer)..........981\nFigure  9.6 Any USB State to USB Attached State Transition (When operating as a Provider).............981\nFigure  9.7 Any USB State to USB Attached State Transition (After a USB Type-C Data Role Swap)..982\nFigure  9.8 Software stack on a PD aware OS..............................................................................................................983\nFigure  9.9 Enumeration of a PDUSB Device................................................................................................................984\n\nPage 26 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-1010 Power Rules . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 995\nFigure  10.1 SPR Source Power Rule Illustration for Fixed Supply PDOs.......................................................1000\nFigure  10.2 SPR Source Power Rule Example For Fixed Supply PDOs...........................................................1001\nFigure  10.3 Valid SPR AVS Operating Region for a Source advertising in the range of 27W < PDP ≤ 45W\n1003\nFigure  10.4 Valid SPR AVS Operating Region for a Source advertising in the range of 45W < PDP ≤ 60W\n1003\nFigure  10.5 Valid SPR AVS Operating Region for a Source advertising in the range of 60W < PDP ≤ \n100W...................................................................................................................................................................1004\nFigure  10.6 Valid EPR AVS Operating Region............................................................................................................1011\nFigure  10.7 EPR Source Power Rule Illustration for Fixed PDOs......................................................................1012\nA CRC calculation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1015\nB Message Sequence Examples (Deprecated) . . . . . . . . . . . . . . . . . . . . . . . 1016\nC VDM Command Examples . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1017\nD BMC Receiver Design Examples . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1032\nFigure  D.1 Circuit Block of BMC Finite Difference Receiver..............................................................................1032\nFigure  D.2 BMC AC and DC noise from V BUS at Power Sink...............................................................................1033\nFigure  D.3 Sample BMC Signals (a) without USB 2.0 SE0 Noise (b) with USB 2.0 SE0 Noise.............1033\nFigure  D.4 Scaled BMC Signal Derivative with 50ns Sampling Rate (a) without USB 2.0 Noise (b) with \nUSB 2.0 Noise ..................................................................................................................................................1034\nFigure  D.5 BMC Signal and Finite Difference Output with Various Time Steps........................................1034\nFigure  D.6 Output of Finite Difference in dash line and Edge Detector in solid line ..............................1035\nFigure  D.7 Noise Zone and Detect Zone of BMC Receiver ..................................................................................1035\nFigure  D.8 Circuit Block of BMC Subtraction Receiver........................................................................................1036\nFigure  D.9 (a) Output of LPF1 and LPF2 (b) Subtraction of LPF1 and LPF2 Output..............................1036\nFigure  D.10 Output of the BMC LPF1 in blue dash curve and the Subtractor in red solid curve (a) at \nPower Source (b) at Power Sink.............................................................................................................1037\nE FRS System Level Example . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1038\nFigure  E.1 Example FRS Capable System ..................................................................................................................1038\nFigure  E.2 Slow V BUS Discharge ....................................................................................................................................1039\nFigure  E.3 Fast V BUS Discharge......................................................................................................................................1040\nFigure  E.4 Slow V BUS discharge after FR_Swap message is sent.....................................................................1044\nFigure  E.5 V BUS discharges quickly before FR_Swap message is sent after adapter disconnected.1046\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 27List of Tables\nRevision History  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2\nLIMITED COPYRIGHT LICENSE . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5\nINTELLECTUAL PROPERTY DISCLAIMER . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5\nEditors . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6\nContributors  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6\nTable Of Contents  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .13\nList of Figures . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .19\nList of Tables . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .27\n1 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .34\nTable 1.1 Section Overview.................................................................................................................................................... 36\nTable 1.2 Keywords ................................................................................................................................................................... 37\nTable 1.3 Document References........................................................................................................................................... 39\nTable 1.4 Terms and Abbreviations.................................................................................................................................... 40\n2 Overview . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .53\nTable 2.1 Fixed Supply Power Ranges............................................................................................................................... 75\nTable 2.2 PPS Voltage Power Ranges................................................................................................................................. 75\nTable 2.3 AVS Voltage Power Ranges ................................................................................................................................ 76\n3 USB Type-A and USB Type-B Cable Assemblies and Connectors . . . . . .77\n4 Electrical Requirements. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .78\n5 Physical Layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .79\nTable 5.1 4b5b Symbol Encoding ........................................................................................................................................ 80\nTable 5.2 Ordered Sets ............................................................................................................................................................. 81\nTable 5.3 Validation of Ordered Sets.................................................................................................................................. 82\nTable 5.4 Data Size ..................................................................................................................................................................... 83\nTable 5.5 SOP Ordered Set...................................................................................................................................................... 84\nTable 5.6 SOP’ Ordered Set..................................................................................................................................................... 85\nTable 5.7 SOP’’ Ordered Set.................................................................................................................................................... 85\nTable 5.8 SOP’_Debug Ordered Set...................................................................................................................................... 86\nTable 5.9 SOP’’_Debug Ordered Set..................................................................................................................................... 86\nTable 5.10 CRC-32 Mapping ..................................................................................................................................................... 88\nTable 5.11 Hard Reset Ordered Set ....................................................................................................................................... 89\nTable 5.12 Cable Reset Ordered Set ...................................................................................................................................... 90\nTable 5.13 Rp values used for Collision Avoidance......................................................................................................... 91\nTable 5.14 BMC Tx Mask Definition, X Values................................................................................................................... 97\nTable 5.15 BMC Tx Mask Definition, Y Values................................................................................................................... 98\nTable 5.16 BMC Rx Mask Definition ....................................................................................................................................102\nTable 5.17 BMC Common Normative Requirements ...................................................................................................105\nTable 5.18 BMC Transmitter Normative Requirements.............................................................................................106\nTable 5.19 BMC Receiver Normative Requirements....................................................................................................110\n6 Protocol Layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 114\nTable 6.1 Message Header ....................................................................................................................................................116\nTable 6.2 Revision Interoperability during an Explicit Contract .........................................................................119\nTable 6.3 Extended Message Header................................................................................................................................120\nTable 6.4 Use of Unchunked Message Supported bit ................................................................................................122\nTable 6.5 Control Message Types ......................................................................................................................................128\n\nPage 28 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10Table 6.6 Data Message Types ............................................................................................................................................138\nTable 6.7 Power Data Object................................................................................................................................................139\nTable 6.8 Augmented Power Data Object.......................................................................................................................140\nTable 6.9 Fixed Supply PDO – Source ..............................................................................................................................141\nTable 6.10 Fixed Power Source Peak Current Capability ..........................................................................................143\nTable 6.11 Variable Supply (non-Battery) PDO – Source ..........................................................................................143\nTable 6.12 Battery Supply PDO – Source ..........................................................................................................................144\nTable 6.13 SPR Programmable Power Supply APDO – Source................................................................................145\nTable 6.14 SPR Adjustable Voltage Supply APDO – Source.......................................................................................146\nTable 6.15 EPR Adjustable Voltage Supply APDO – Source ......................................................................................146\nTable 6.16 EPR AVS Power Source Peak Current Capability....................................................................................147\nTable 6.17 Fixed Supply PDO – Sink....................................................................................................................................148\nTable 6.18 Variable Supply (non-Battery) PDO – Sink................................................................................................149\nTable 6.19 Battery Supply PDO – Sink................................................................................................................................150\nTable 6.20 SPR Programmable Power Supply APDO – Sink .....................................................................................150\nTable 6.21 SPR Adjustable Voltage Supply APDO – Sink............................................................................................151\nTable 6.22 EPR Adjustable Voltage Supply APDO – Sink ...........................................................................................151\nTable 6.23 Fixed and Variable Request Data Object ....................................................................................................155\nTable 6.24 Battery Request Data Object............................................................................................................................156\nTable 6.25 PPS Request Data Object ...................................................................................................................................156\nTable 6.26 AVS Request Data Object...................................................................................................................................156\nTable 6.27 BIST Data Object ...................................................................................................................................................160\nTable 6.28 Unstructured VDM Header...............................................................................................................................163\nTable 6.29 Structured VDM Header ....................................................................................................................................164\nTable 6.30 Structured VDM Commands ............................................................................................................................165\nTable 6.31 SVID Values .............................................................................................................................................................165\nTable 6.32 Commands and Responses...............................................................................................................................167\nTable 6.33 ID Header VDO.......................................................................................................................................................169\nTable 6.34 Product Types (UFP)...........................................................................................................................................170\nTable 6.35 Product Types (Cable Plug/VPD) ..................................................................................................................171\nTable 6.36 Product Types (DFP)...........................................................................................................................................171\nTable 6.37 Cert Stat VDO..........................................................................................................................................................172\nTable 6.38 Product VDO ...........................................................................................................................................................172\nTable 6.39 UFP VDO ...................................................................................................................................................................172\nTable 6.40 DFP VDO ...................................................................................................................................................................175\nTable 6.41 Passive Cable VDO................................................................................................................................................176\nTable 6.42 Active Cable VDO1................................................................................................................................................179\nTable 6.43 Active Cable VDO2................................................................................................................................................180\nTable 6.44 VPD VDO...................................................................................................................................................................184\nTable 6.45 Discover SVIDs Responder VDO.....................................................................................................................186\nTable 6.46 Battery Status Data Object (BSDO) ...............................................................................................................196\nTable 6.47 Alert Data Object (ADO).....................................................................................................................................198\nTable 6.48 Country Code Data Object (CCDO) ................................................................................................................201\nTable 6.49 Enter_USB Data Object (EUDO) ......................................................................................................................203\nTable 6.50 EPR Mode Data Object (EPRMDO) ................................................................................................................206\nTable 6.51 Source_Info Data Object (SIDO)......................................................................................................................212\nTable 6.52 Revision Message Data Object (RMDO) ......................................................................................................214\nTable 6.53 Extended Message Types ..................................................................................................................................215\nTable 6.54 Source Capabilities Extended Data Block (SCEDB) ...............................................................................216\nTable 6.55 SOP Status Data Block (SDB) ...........................................................................................................................221\nTable 6.56  “SOP’/SOP’’ Status Data Block (SPDB)”......................................................................................................226\nTable 6.57 Get Battery Cap Data Block (GBCDB)...........................................................................................................227\nTable 6.58 Get Battery Status Data Block (GBSDB)......................................................................................................227\nTable 6.59  Battery Capability Data Block (BCDB)”......................................................................................................228\nTable 6.60 Get Manufacturer Info Data Block (GMIDB) .............................................................................................230\nTable 6.61 Manufacturer Info Data Block (MIDB) ........................................................................................................231\nTable 6.62  PPS Status Data Block (PPSSDB)...................................................................................................................235\nTable 6.63 Country Codes Data Block (CCDB) ................................................................................................................237\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 29Table 6.64 Country Info Data Block (CIDB) .....................................................................................................................238\nTable 6.65  Sink Capabilities Extended Data Block (SKEDB) ...................................................................................239\nTable 6.66 Extended Control Data Block (ECDB)..........................................................................................................244\nTable 6.67 Extended Control Message Types .................................................................................................................244\nTable 6.68 Time Values.............................................................................................................................................................262\nTable 6.69 Timers........................................................................................................................................................................264\nTable 6.70 Counter Parameters ............................................................................................................................................267\nTable 6.71 Counters ...................................................................................................................................................................267\nTable 6.72 Response to an incoming Message (except VDM)..................................................................................269\nTable 6.73 Response to an incoming VDM .......................................................................................................................269\nTable 6.74 Message Discarding .............................................................................................................................................274\nTable 6.75 Protocol Layer States ..........................................................................................................................................298\nTable 6.76 Message Applicability Abbreviations...........................................................................................................300\nTable 6.77 Applicability of Control Messages .................................................................................................................301\nTable 6.78 Applicability of Data Messages .......................................................................................................................303\nTable 6.79 Applicability of Extended Messages.............................................................................................................305\nTable 6.80 Applicability of Extended Control Messages ............................................................................................308\nTable 6.81 Applicability of Structured VDM Commands............................................................................................309\nTable 6.82 Applicability of Reset Signaling......................................................................................................................310\nTable 6.83 Applicability of Fast Role Swap Request ....................................................................................................310\nTable 6.84 Value Parameters .................................................................................................................................................311\n7 Power Supply . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 312\nTable 7.1 Sequence Description for Increasing the Voltage...................................................................................343\nTable 7.2 Sequence Diagram for Increasing the Voltage and Current...............................................................346\nTable 7.3 Sequence Description for Increasing the Voltage and Decreasing the Current ........................349\nTable 7.4 Sequence Description for Decreasing the Voltage and Increasing the Current ........................352\nTable 7.5 Sequence Description for Decreasing the Voltage .................................................................................355\nTable 7.6 Sequence Description for Decreasing the Voltage and the Current ...............................................358\nTable 7.7 Sequence Description for no change in Current or Voltage...............................................................360\nTable 7.8 Sequence Description for Increasing the Current..................................................................................363\nTable 7.9 Sequence Description for Decreasing the Current.................................................................................366\nTable 7.10 Sequence Description for Increasing the Programmable Power Supply Voltage ....................369\nTable 7.11 Sequence Description for Decreasing the Programmable Power Supply Voltage ...................372\nTable 7.12 Sequence Description for increasing the Current in PPS mode .......................................................375\nTable 7.13 Sequence Description for decreasing the Current in PPS mode ......................................................378\nTable 7.14 Sequence Description for no change in Current or Voltage in PPS mode....................................380\nTable 7.15 Sequence Description for Increasing the Adjustable Voltage Supply Voltage ...........................383\nTable 7.16 Sequence Description for Decreasing the Adjustable Voltage Supply Voltage..........................386\nTable 7.17 Sequence Description for no change in Current or Voltage in AVS mode ...................................387\nTable 7.18 Sequence Description for a Sink Requested Power Role Swap........................................................390\nTable 7.19 Sequence Description for a Source Requested Power Role Swap...................................................394\nTable 7.20 Sequence Description for a Source Initiated Hard Reset ....................................................................397\nTable 7.21 Sequence Description for a Sink Initiated Hard Reset .........................................................................399\nTable 7.22 Sequence Description for Fast Role Swap .................................................................................................402\nTable 7.23 Source Electrical Parameters ..........................................................................................................................404\nTable 7.24 Sink Electrical Parameters ...............................................................................................................................413\nTable 7.25 Common Source/Sink Electrical Parameters...........................................................................................415\n8 Device Policy  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 416\nTable 8.1 Basic Message Flow .............................................................................................................................................426\nTable 8.2 Potential issues in Basic Message Flow ......................................................................................................427\nTable 8.3 Basic Message Flow with CRC failure ..........................................................................................................429\nTable 8.4 Atomic Message Sequences..............................................................................................................................430\nTable 8.5 AMS: Power Negotiation (SPR) ......................................................................................................................431\nTable 8.6 AMS: Power Negotiation (EPR) ......................................................................................................................432\nTable 8.7 AMS: Unsupported Message ............................................................................................................................434\n\nPage 30 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10Table 8.8 AMS: Soft Reset......................................................................................................................................................434\nTable 8.9 AMS: Data Reset ....................................................................................................................................................434\nTable 8.10 AMS: Power Role Swap ......................................................................................................................................435\nTable 8.11 AMS: Fast Role Swap ...........................................................................................................................................435\nTable 8.12 AMS: Data Role Swap ..........................................................................................................................................436\nTable 8.13 AMS: V CONN  Swap .................................................................................................................................................437\nTable 8.14 AMS: Alert ................................................................................................................................................................437\nTable 8.15 AMS: Status..............................................................................................................................................................438\nTable 8.16 AMS: Source/Sink Capabilities (SPR) ..........................................................................................................438\nTable 8.17 AMS: Source/Sink Capabilities (EPR)..........................................................................................................439\nTable 8.18 AMS: Extended Capabilities .............................................................................................................................440\nTable 8.19 AMS: Battery Capabilities..................................................................................................................................440\nTable 8.20 AMS: Manufacturer Information....................................................................................................................441\nTable 8.21 AMS: Country Codes............................................................................................................................................441\nTable 8.22 AMS: Country Information ...............................................................................................................................441\nTable 8.23 AMS: Revision Information ..............................................................................................................................442\nTable 8.24 AMS: Source Information ..................................................................................................................................442\nTable 8.25 AMS: Security .........................................................................................................................................................442\nTable 8.26 AMS: Firmware Update......................................................................................................................................443\nTable 8.27 AMS: Structured VDM.........................................................................................................................................444\nTable 8.28 AMS: Built-In Self-Test (BIST).........................................................................................................................445\nTable 8.29 AMS: Enter USB .....................................................................................................................................................445\nTable 8.30 AMS: Unstructured VDM ...................................................................................................................................445\nTable 8.31 AMS: Hard Reset ...................................................................................................................................................446\nTable 8.32 Steps for a successful Power Negotiation ..................................................................................................449\nTable 8.33 Steps for a rejected Power Negotiation ......................................................................................................453\nTable 8.34 Steps for a Wait response to a Power Negotiation.................................................................................456\nTable 8.35 Steps for SPR PPS Keep Alive ..........................................................................................................................459\nTable 8.36 Steps for SPR Sink Makes Request (Accept) .............................................................................................462\nTable 8.37 Steps for SPR Sink Makes Request (Reject) ..............................................................................................465\nTable 8.38 Steps for SPR Sink Makes Request (Wait) .................................................................................................468\nTable 8.39 Steps for Entering EPR Mode (Success)......................................................................................................471\nTable 8.40 Steps for Entering EPR Mode (Failure due to non-EPR cable) .........................................................474\nTable 8.41 Steps for Entering EPR Mode (Failure of V CONN  Swap) .......................................................................477\nTable 8.42 Steps for a successful EPR Power Negotiation ........................................................................................481\nTable 8.43 Steps for a Rejected EPR Power Negotiation............................................................................................485\nTable 8.44 Steps for a Wait response to an EPR Power Negotiation ....................................................................488\nTable 8.45 Steps for EPR Keep Alive...................................................................................................................................491\nTable 8.46 Steps for Exiting EPR Mode (Sink Initiated) .............................................................................................494\nTable 8.47 Steps for Exiting EPR Mode (Source Initiated)........................................................................................497\nTable 8.48 Steps for EPR Sink Makes Request (Accept).............................................................................................500\nTable 8.49 Steps for EPR Sink Makes Request (Reject)..............................................................................................503\nTable 8.50 Steps for SPR Sink Makes Request (Wait) .................................................................................................506\nTable 8.51 Steps for an Unsupported Message ..............................................................................................................509\nTable 8.52 Steps for a Soft Reset...........................................................................................................................................512\nTable 8.53 Steps for a DFP Initiated Data Reset where the DFP is the V CONN  Source...................................515\nTable 8.54 Steps for a DFP Receiving a Data Reset where the DFP is the V CONN Source ..............................518\nTable 8.55 Steps for a DFP Initiated Data Reset where the UFP is the V CONN  Source ...................................521\nTable 8.56 Steps for a DFP Receiving a Data Reset where the UFP is the V CONN  Source .............................525\nTable 8.57 Steps for Source initiated Hard Reset..........................................................................................................529\nTable 8.58 Steps for Sink initiated Hard Reset ...............................................................................................................532\nTable 8.59 Steps for Source initiated Hard Reset - Sink long reset .......................................................................535\nTable 8.60 Steps for a Successful Source Initiated Power Role Swap Sequence .............................................539\nTable 8.61 Steps for a Rejected Source Initiated Power Role Swap Sequence.................................................543\nTable 8.62 Steps for a Source Initiated Power Role Swap with Wait Sequence...............................................546\nTable 8.63 Steps for a Successful Sink Initiated Power Role Swap Sequence...................................................550\nTable 8.64 Steps for a Rejected Sink Initiated Power Role Swap Sequence ......................................................554\nTable 8.65 Steps for a Sink Initiated Power Role Swap with Wait Sequence....................................................557\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 31Table 8.66 Steps for a Successful Fast Role Swap Sequence ....................................................................................561\nTable 8.67 Steps for Data Role Swap, UFP operating as Sink initiates.................................................................565\nTable 8.68 Steps for Rejected Data Role Swap, UFP operating as Sink initiates..............................................568\nTable 8.69 Steps for Data Role Swap with Wait, UFP operating as Sink initiates ...........................................571\nTable 8.70 Steps for Data Role Swap, UFP operating as Source initiates............................................................574\nTable 8.71 Steps for Rejected Data Role Swap, UFP operating as Source initiates.........................................577\nTable 8.72 Steps for Data Role Swap with Wait, UFP operating as Source initiates ......................................580\nTable 8.73 Steps for Data Role Swap, DFP operating as Source initiates............................................................583\nTable 8.74 Steps for Rejected Data Role Swap, DFP operating as Source initiates ........................................586\nTable 8.75 Steps for Data Role Swap with Wait, DFP operating as Source initiates ......................................589\nTable 8.76 Steps for Data Role Swap, DFP operating as Sink initiates.................................................................592\nTable 8.77 Steps for Rejected Data Role Swap, DFP operating as Sink initiates..............................................595\nTable 8.78 Steps for Data Role Swap with Wait, DFP operating as Sink initiates ...........................................598\nTable 8.79 Steps for Source to Sink V CONN  Source Swap ...........................................................................................601\nTable 8.80 Steps for Rejected V CONN  Source Swap .......................................................................................................604\nTable 8.81 Steps for V CONN  Source Swap with Wait.....................................................................................................607\nTable 8.82 Steps for V CONN  Source Swap, Initiated by non-V CONN  Source .........................................................610\nTable 8.83 Steps for Rejected V CONN  Source Swap, Initiated by non-V CONN  Source......................................613\nTable 8.84 Steps for V CONN  Source Swap with Wait.....................................................................................................616\nTable 8.85 Steps for Source Alert to Sink..........................................................................................................................619\nTable 8.86 Steps for Sink Alert to Source..........................................................................................................................621\nTable 8.87 Steps for a Sink getting Source Status Sequence.....................................................................................623\nTable 8.88 Steps for a Source getting Sink Status Sequence.....................................................................................626\nTable 8.89 Steps for a V CONN  Source getting Cable Plug Status Sequence..........................................................629\nTable 8.90 Steps for a Sink getting Source PPS status Sequence............................................................................632\nTable 8.91 Steps for a Sink getting Source Capabilities Sequence.........................................................................635\nTable 8.92 Steps for a Dual-Role Source getting Dual-Role Sink's capabilities as a Source Sequence...638\nTable 8.93 Steps for a Source getting Sink Capabilities Sequence.........................................................................641\nTable 8.94 Steps for a Dual-Role Sink getting Dual-Role Source capabilities as a Sink Sequence ...........644\nTable 8.95 Steps for a Sink getting EPR Source Capabilities Sequence ...............................................................647\nTable 8.96 Steps for a Dual-Role Source getting Dual-Role Sink's capabilities as an EPR Source Se -\nquence .......................................................................................................................................................................650\nTable 8.97 Steps for a Source getting Sink EPR Capabilities Sequence ...............................................................653\nTable 8.98 Steps for a Dual-Role Sink getting Dual-Role Source Capabilities as an EPR Sink Sequence\n656\nTable 8.99 Steps for a Sink getting Source Extended Capabilities Sequence ....................................................659\nTable 8.100 Steps for a Dual-Role Source getting Dual-Role Sink Extended Capabilities Sequence.........662\nTable 8.101 Steps for a Source getting Sink Extended Capabilities Sequence ....................................................665\nTable 8.102 Steps for a Dual-Role Sink getting Dual-Role Source Extended Capabilities Sequence.........668\nTable 8.103 Steps for a Sink getting Source Battery capabilities Sequence .........................................................671\nTable 8.104 Steps for a Source getting Sink Battery capabilities Sequence .........................................................674\nTable 8.105 Steps for a Sink getting Source Battery status Sequence ....................................................................677\nTable 8.106 Steps for a Source getting Sink Battery status Sequence ....................................................................680\nTable 8.107 Steps for a Source getting Sink's Port Manufacturer Information Sequence .............................683\nTable 8.108 Steps for a Source getting Sink's Port Manufacturer Information Sequence .............................686\nTable 8.109 Steps for a Source getting Sink's Battery Manufacturer Information Sequence.......................689\nTable 8.110 Steps for a Source getting Sink's Battery Manufacturer Information Sequence.......................692\nTable 8.111 Steps for a V CONN  Source getting Sink's Port Manufacturer Information Sequence ...............695\nTable 8.112 Steps for a Source getting Country Codes Sequence .............................................................................698\nTable 8.113 Steps for a Source getting Sink's Country Codes Sequence................................................................701\nTable 8.114 Steps for a V CONN  Source getting Sink's Country Codes Sequence..................................................704\nTable 8.115 Steps for a Source getting Country Information Sequence ................................................................707\nTable 8.116 Steps for a Source getting Sink's Country Information Sequence ...................................................710\nTable 8.117 Steps for a V CONN  Source getting Sink's Country Information Sequence.....................................713\nTable 8.118 Steps for a Source getting Revision Information Sequence ...............................................................716\nTable 8.119 Steps for a Source getting Sink's Revision Information Sequence..................................................719\nTable 8.120 Steps for a V CONN  Source getting Sink's Revision Information Sequence....................................722\nTable 8.121 Steps for a Sink getting Source Information Sequence ........................................................................725\n\nPage 32 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10Table 8.122 Steps for a Dual-Role Source getting Dual-Role Sink's Information as a Source Sequence .728\nTable 8.123 Steps for a Source requesting a security exchange with a Sink Sequence...................................731\nTable 8.124 Steps for a Sink requesting a security exchange with a Source Sequence...................................734\nTable 8.125 Steps for a V CONN  Source requesting a security exchange with a Cable Plug Sequence........737\nTable 8.126 Steps for a Source requesting a firmware update exchange with a Sink Sequence.................740\nTable 8.127 Steps for a Sink requesting a firmware update exchange with a Source Sequence.................743\nTable 8.128 Steps for a V CONN  Source requesting a firmware update exchange with a Cable Plug Se -\nquence .......................................................................................................................................................................746\nTable 8.129 Steps for Initiator to UFP Discover Identity (ACK) ................................................................................749\nTable 8.130 Steps for Initiator to UFP Discover Identity (NAK) ...............................................................................752\nTable 8.131 Steps for Initiator to UFP Discover Identity (BUSY)..............................................................................755\nTable 8.132 Steps for DFP to UFP Discover SVIDs (ACK).............................................................................................758\nTable 8.133 Steps for DFP to UFP Discover SVIDs (NAK) ............................................................................................761\nTable 8.134 Steps for DFP to UFP Discover SVIDs (BUSY) ..........................................................................................764\nTable 8.135 Steps for DFP to UFP Discover Modes (ACK) ...........................................................................................767\nTable 8.136 Steps for DFP to UFP Discover Modes (NAK)...........................................................................................770\nTable 8.137 Steps for DFP to UFP Discover Modes (BUSY).........................................................................................773\nTable 8.138 Steps for DFP to UFP Enter Mode..................................................................................................................776\nTable 8.139 Steps for DFP to UFP Exit Mode .....................................................................................................................779\nTable 8.140 Steps for DFP to Cable Plug Enter Mode.....................................................................................................782\nTable 8.141 Steps for DFP to Cable Plug Exit Mode ........................................................................................................785\nTable 8.142 Steps for Initiator to Responder Attention................................................................................................788\nTable 8.143 Steps for BIST Carrier Mode Test ..................................................................................................................790\nTable 8.144 Steps for BIST Test Data Test ..........................................................................................................................793\nTable 8.145 Steps for BIST Shared Capacity Test Mode Test .....................................................................................796\nTable 8.146 Steps for UFP USB4 Mode Entry (Accept)..................................................................................................799\nTable 8.147 Steps for UFP USB4 Mode Entry (Reject)...................................................................................................802\nTable 8.148 Steps for UFP USB4 Mode Entry (Wait)......................................................................................................805\nTable 8.149 Steps for Cable Plug USB4 Mode Entry (Accept) ....................................................................................808\nTable 8.150 Steps for Cable Plug USB4 Mode Entry (Reject)......................................................................................811\nTable 8.151 Steps for Cable Plug USB4 Mode Entry (Wait).........................................................................................814\nTable 8.152 Steps for Unstructured VDM Message Sequence....................................................................................817\nTable 8.153 Steps for VDEM Message Sequence ..............................................................................................................820\nTable 8.154 Policy Engine States.............................................................................................................................................966\n9 States and Status Reporting . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 975\nTable 9.1 USB Power Delivery Type Codes ...................................................................................................................985\nTable 9.2 USB Power Delivery Capability Descriptor ...............................................................................................986\nTable 9.3 Battery Info Capability Descriptor................................................................................................................987\nTable 9.4 PD Consumer Port Descriptor.........................................................................................................................988\nTable 9.5 PD Provider Port Descriptor............................................................................................................................989\nTable 9.6 PD Requests ............................................................................................................................................................990\nTable 9.7 PD Request Codes.................................................................................................................................................990\nTable 9.8 PD Feature Selectors ...........................................................................................................................................990\nTable 9.9 Get Battery Status Request...............................................................................................................................991\nTable 9.10 Battery Status Structure ....................................................................................................................................991\nTable 9.11 Set PD Feature........................................................................................................................................................992\nTable 9.12 Battery Wake Mask..............................................................................................................................................993\nTable 9.13 Charging Policy Encoding .................................................................................................................................994\n10 Power Rules . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 995\nTable 10.1 Considerations for Sources ..............................................................................................................................996\nTable 10.2 SPR Normative Voltages and Minimum Currents ..................................................................................997\nTable 10.3 SPR Source Capabilities When Port Present PDP is less than Port Maximum PDP.................998\nTable 10.4 SPR Source Port Present PDP less than Port Maximum PDP Examples .......................................999\nTable 10.5 Fixed Supply PDO - Source 5V......................................................................................................................1001\nTable 10.6 Fixed Supply PDO - Source 9V......................................................................................................................1002\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 33Table 10.7 Fixed Supply PDO - Source 15V...................................................................................................................1002\nTable 10.8 Fixed Supply PDO - Source 20V...................................................................................................................1002\nTable 10.9 SPR Adjustable Voltage Supply (AVS) Voltage Ranges......................................................................1004\nTable 10.10 SPR Programmable Power Supply PDOs and APDOs based on the Port Maximum PDP...1005\nTable 10.11 SPR Programmable Power Supply Voltage Ranges ............................................................................1006\nTable 10.12 EPR Source Capabilities based on the Port Maximum PDP and using an EPR Capable Cable\n1009\nTable 10.14 EPR Source Examples when Port Present PDP is less than Port Maximum PDP...................1010\nTable 10.13 EPR Source Capabilities when Port Present PDP is less than Port Maximum PDP and using \nan EPR-capable cable.......................................................................................................................................1010\nTable 10.15 EPR Adjustable Voltage Supply (AVS) Voltage Ranges .....................................................................1012\nA CRC calculation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1015\nB Message Sequence Examples (Deprecated) . . . . . . . . . . . . . . . . . . . . . . . 1016\nC VDM Command Examples . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1017\nTable C.1 Discover Identity Command request from Initiator Example .......................................................1017\nTable C.2 Discover Identity Command response from Active Cable Responder Example ....................1018\nTable C.3 Discover Identity Command response from Hub Responder Example .....................................1020\nTable C.4 Discover SVIDs Command request from Initiator Example............................................................1021\nTable C.5 Discover SVIDs Command response from Responder Example ...................................................1022\nTable C.6 Discover Modes Command request from Initiator Example ..........................................................1023\nTable C.7 Discover Modes Command response from Responder Example..................................................1024\nTable C.8 Enter Mode Command request from Initiator Example ...................................................................1025\nTable C.9 Enter Mode Command response from Responder Example...........................................................1026\nTable C.10 Enter Mode Command request with additional VDO Example .....................................................1027\nTable C.11 Exit Mode Command request from Initiator Example ......................................................................1028\nTable C.12 Exit Mode Command response from Responder Example..............................................................1029\nTable C.13 Attention Command request from Initiator Example........................................................................1030\nTable C.14 Attention Command request from Initiator with additional VDO Example ............................1031\nD BMC Receiver Design Examples . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1032\nE FRS System Level Example . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1038\nTable E.1 Sequence for setup of a Fast Role Swap (Hub connected to Power Adapter first)...............1041\nTable E.2 Sequence for setup of a Fast Role Swap (Hub connected to laptop before Power Adapter)\n1042\nTable E.3 Sequence for slow V BUS discharge (it discharges after FR_Swap message is sent)..............1045\nTable E.4 V BUS discharges quickly after adapter disconnected.........................................................................1046"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "1.1", "title": "Overview", "page": 34, "level": 2, "parent_id": "1", "full_path": "1.1 Overview", "tags": [], "content": "Page 34 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-101  Introduction\nUSB has evolved from a data interface capable of supplying limited power to a primary provider of power with a \ndata interface. Today many devices charge or get their power from USB Ports contained in laptops, cars, aircraft or \neven wall sockets. USB has become a ubiquitous power socket for many small devices such as cell phones and other \nhand-held devices. Users need USB to fulfill their requirements not only in terms of data but also to provide power \nto, or charge, their devices simply, often without the need to load a driver, in order to carry out “traditional” USB \nfunctions.\nThere are, however, still many devices which either require an additional power connection to the wall, or exceed \nthe USB default current in order to operate. Increasingly, international regulations require better energy \nmanagement due to ecological and practical concerns relating to the availability of power. Regulations limit the \namount of power available from the wall which has led to a pressing need to optimize power usage. The USB Power \nDelivery Specification has the potential to minimize waste as it becomes a standard for charging devices that are \nnot satisfied by [USBBC 1.2]  or [USB Type-C 2.4] .\nWider usage of wireless solutions is an attempt to remove data cabling but the need for “tethered” charging \nremains. In addition, industrial design requirements drive wired connectivity to do much more over the same \nconnector.\nUSB Power Delivery is designed to enable the maximum functionality of USB by providing more flexible power \ndelivery along with data over a single cable. Its aim is to operate with and build on the existing USB ecosystem; \nincreasing power levels from existing USB standards, for example [USBBC 1.2] , enabling new higher power use \ncases such as USB powered Hard Disk Drives (HDDs), laptops and monitors.\nWith USB Power Delivery the power direction is no longer fixed. This enables the product with the power (USB \nHost or Peripheral) to provide the power. For example, a display with a supply from the wall can power, or charge, \na laptop. Alternatively, USB Chargers are able to supply power to laptops and other Battery powered devices \nthrough their, traditional power providing, USB Ports.\nUSB Power Delivery enables Hubs (including Hubs embedded in other devices such as docks or monitors) to \nbecome the means to optimize power management across multiple peripherals by allowing each device to take \nonly the power it requires, and to get more power when required for a given application. Optionally  the Hubs can \ncommunicate with the PC to enable even more intelligent and flexible management of power either automatically \nor with some level of user intervention.\nUSB Power Delivery allows low power cases such as headsets to Negotiate for only the power they require. This \nprovides a simple solution that enables USB devices to operate at their optimal power levels. \nThe Power Delivery Specification, in addition to providing mechanisms to Negotiate power also can be used as a \nside-band channel for standard and vendor defined messaging. The specification enables discovery of cable \nCapabilities such as supported speeds and current levels. Power Delivery enables alternative modes of operation \nby providing the mechanisms to discover, enter and exit Modes such as EPR Mode, USB4® Mode or Alternate \nModes.\n1.1   Overview\nThis specification defines how USB Devices can Negotiate for more current and/or higher or lower voltages over \nthe USB cable (using the USB Type-C® CC wire as the communications channel) than are defined in the [USB 2.0] , \n[USB 3.2] , [USB4] , [USB Type-C 2.4]  or [USBBC 1.2]  specifications. It allows Devices with greater power \nrequirements than can be met with today's specification to get the power they require to operate from V BUS and \nNegotiate with external power sources (e.g., Chargers).\nIn addition, it allows a Source and Sink to swap Power Roles such that a USB Device could supply power to the USB \nHost. For example, a display could supply power to a laptop to operate or charge its Battery. This specification also \nadds a mechanism to swap the Data Roles such that the upstream facing Port becomes the downstream facing Port \nand vice versa. It also enables a swap of the end supplying V CONN  to a powered cable.\nThe USB Power Delivery Specification is guided by the following principles:\n Works seamlessly with legacy USB Devices."}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "1.2", "title": "Purpose", "page": 35, "level": 2, "parent_id": "1", "full_path": "1.2 Purpose", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 35 Compatible with existing spec-compliant USB cables.\n Minimizes potential damage from non-compliant cables (e.g., ‘Y’ cables etc.).\n Optimized for low-cost implementations.\nThis specification defines mechanisms to discover, enter and exit Alternate Modes defined either by a standard or \nby a particular vendor. These Alternate Modes can be supported either by the Port Partner or by a cable connecting \nthe two Port Partners.\nThe specification defines mechanisms to discover the Capabilities of cables which can communicate using Power \nDelivery.\nTo facilitate optimum charging, the specification defines two mechanisms a USB Charger can Advertise for the \ndevice to use:\n1) A list of Fixed Supply voltages each with a maximum current. The device selects a voltage and current \nfrom the list. This is the traditional model used by devices that use internal electronics to manage the \ncharging of their Battery including modifying the voltage and current actually supplied to the Battery. \nThe side-effect of this model is that the charging circuitry generates heat that can be problematic for \nsmall form factor devices.\n2) A list of programmable voltage ranges, in SPR PPS Mode, each with a maximum current. The device re -\nquests a voltage (in 20mV increments) that is within the Advertised range and a maximum current. The \nUSB PPS Charger delivers the requested voltage until the maximum current is reached at which time \nthe USB PPS Charger reduces its output voltage so as not to supply more than the requested maximum \ncurrent. During the high current portion of the charge cycle, the USB PPS Charger can be directly con -\nnected (through an appropriate safety device) to the Battery. This model is used by devices that want \nto minimize the thermal impact of their internal charging circuitry.\n3) A list of adjustable voltage ranges, in SPR AVS Mode or EPR AVS Mode, each with a maximum current. \nThe device requests a voltage (in 100mV increments) that is within the Advertised range and a maxi -\nmum current. The USB AVS Charger delivers the requested voltage.\n1.2   Purpose\nThe USB Power Delivery specification defines a power delivery system covering all elements of a USB system \nincluding USB Hosts, USB Devices, Hubs, Chargers and cable assemblies. This specification describes the \narchitecture, protocols, power supply behavior, connectors and cabling necessary for managing power delivery \nover USB at up to 100W in SPR Mode and 240W in EPR Mode. This specification is intended to be fully compatible \nwith and extend the existing USB infrastructure. It is intended that this specification will allow system OEMs, \npower supply and Peripheral developers adequate flexibility for product versatility and market differentiation \nwithout losing backwards compatibility.\nUSB Power Delivery is designed to operate independently of the existing USB bus defined mechanisms used to \nNegotiate power which are:\n [USB 2.0] , [USB 3.2]  in band requests for high power interfaces.\n [USBBC 1.2]  mechanisms for supplying higher power (not mandated by this specification).\n [USB Type-C 2.4]  mechanisms for supplying higher power.\nInitial operating conditions remain the USB Default Operation as defined in [USB 2.0] , [USB 3.2] , [USB Type-C 2.4]  \nor [USBBC 1.2] .\n The DFP sources vSafe5V  over V BUS.\n The UFP consumes power from V BUS."}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "1.3", "title": "Section Overview", "page": 36, "level": 2, "parent_id": "1", "full_path": "1.3 Section Overview", "tags": [], "content": "Page 36 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-101.2.1   Scope\nThis specification is intended as an extension to the existing [USB 2.0] , [USB 3.2] , [USB Type-C 2.4]  and [USBBC \n1.2]  specifications. It addresses only the elements required to implement USB Power Delivery. It is targeted at \npower supply vendors, manufacturers of [USB 2.0] , [USB 3.2] , [USB Type-C 2.4]  and [USBBC 1.2]  platforms, \ndevices and cable assemblies.\nNormative  information is provided to allow interoperability of components designed to this specification. \nInformative  information, when provided, illustrates possible design implementation.\n1.3   Section Overview\nThis specification contains the following sections:\nTable 1.1  Section Overview\nSection Description\nSection 1, \"Introduction\"Introduction, conventions used in the document, list of terms and abbreviations, \nreferences, and details of parameter usage.\nSection 2, \"Overview\"Overview of the document including a description of the operation of PD and the \narchitecture.\nSection 3, \"USB Type-A and USB Type-\nB Cable Assemblies and Connectors\"Mechanical and electrical characteristics of the cables and connectors used by PD. \nSection Deprecated . See [USBPD 2.0]  for legacy PD connector specification.\nSection 4, \"Electrical Requirements\" Electrical requirements for Dead Battery  operation and cable detection.\nSection 5, \"Physical Layer\" Details of the PD PHY Layer  requirements\nSection 6, \"Protocol Layer\"Protocol Layer  requirements including the Message s, timers, counters, and state \noperation.\nSection 7, \"Power Supply\" Power supply requirements for both Provider s and Consumer s.\nSection 8, \"Device Policy\"Device Policy Manager  requirements.\nPolicy Engine  Atomic Message Sequence  (AMS ) diagrams and state diagrams\nSection 9, \"States and Status \nReporting\"PDUSB Device  requirements including mapping of VBUS to USB states.\nSystem Policy Manager  requirements including descriptors, events, and requests.\nSection 10, \"Power Rules\" PDP Rating  definitions for PD.\nSection A, \"CRC calculation\" Example CRC  calculations.\nSection B, \"Message Sequence \nExamples (Deprecated)\"Scenarios illustrating Device Policy Manager  operation. Deprecated\nSection C, \"VDM Command Examples\" Examples of Structured VDM  usage.Section Deprecated .\nSection D, \"BMC Receiver Design \nExamples\"BMC  Receiver Design Examples.\nSection E, \"FRS System Level Example\" FRS System Level Example."}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "1.4.1", "title": "Precedence", "page": 37, "level": 3, "parent_id": "1.4", "full_path": "1.4.1 Precedence", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 371.4   Conventions\n1.4.1   Precedence\nIf there is a conflict between text, figures, and tables, the precedence Shall  be tables, figures, and then text.\nIn there is a conflict between a generic statement and a more specific statement, the more specific statement Shall  \napply.\n1.4.2   Keywords\nThe following keywords differentiate between the levels of requirements and options.\nTable 1.2  Keywords\nKeyword Definition\nConditional NormativeConditional Normative  is a keyword used to indicate a feature that is mandatory \nwhen another related feature has been implemented. Designers are mandated to \nimplement all such requirements, when the dependent features have been \nimplemented, to ensure interoperability with other compliant devices.\nDeprecatedDeprecated  is a keyword used to indicate a feature, supported in previous \nreleases of the specification, which is no longer supported.\nDiscard See Discarded .\nDiscardedDiscard , Discards  and Discarded  are equivalent keywords indicating that a \nPacket  when received Shall  be thrown away by the PHY Layer  and not passed to \nthe Protocol Layer  for processing. No GoodCRC  Message  Shall  be sent in response \nto the Packet .\nDiscards See Discarded .\nIgnore See Ignored .\nIgnoredIgnore , Ignores  and Ignored  are equivalent keywords indicating Message s or \nMessage  fields which, when received, Shall  result in no special action by the \nreceiver. An Ignored  Message  Shall  only result in returning a GoodCRC  Message  \nto acknowledge Message  receipt. A Message  with an Ignored  field Shall  be \nprocessed normally except for any actions relating to the Ignored  field.\nIgnores See Ignored .\nInformativeInformative  is a keyword indicating text with no specific requirements, \nprovided only to improve understanding.\nInvalidInvalid  is a keyword when used in relation to a Packet  indicates that the Packet ’s \nusage or fields fall outside of the defined specification usage. When Invalid  is \nused in relation to an Explicit Contract  it indicates that a previously established \nExplicit Contract  which can no longer be maintained by the Source . When Invalid  \nis used in relation to individual K-code s or K-code  sequences indicates that the \nreceived Signaling  falls outside of the defined specification.\nMay May  is a keyword that indicates a choice with no implied preference.\nMay NotMay Not  is a keyword that is the inverse of May . Indicates a choice to not \nimplement a given feature with no implied preference.\nN/AN/A  is a keyword that indicates that a field or value is not applicable and has no \ndefined value and Shall Not  be checked or used by the recipient.\nNormative See Shall .\nOptionalOptional , Optionally  and Optional Normative  are equivalent keywords that \ndescribe features not mandated by this specification. However, if an Optional  \nfeature is implemented, the feature Shall  be implemented as defined by this \nspecification.\nOptional Normative See Optional .\nOptionally See Optional ."}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "1.4.2", "title": "Keywords", "page": 37, "level": 3, "parent_id": "1.4", "full_path": "1.4.2 Keywords", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 371.4   Conventions\n1.4.1   Precedence\nIf there is a conflict between text, figures, and tables, the precedence Shall  be tables, figures, and then text.\nIn there is a conflict between a generic statement and a more specific statement, the more specific statement Shall  \napply.\n1.4.2   Keywords\nThe following keywords differentiate between the levels of requirements and options.\nTable 1.2  Keywords\nKeyword Definition\nConditional NormativeConditional Normative  is a keyword used to indicate a feature that is mandatory \nwhen another related feature has been implemented. Designers are mandated to \nimplement all such requirements, when the dependent features have been \nimplemented, to ensure interoperability with other compliant devices.\nDeprecatedDeprecated  is a keyword used to indicate a feature, supported in previous \nreleases of the specification, which is no longer supported.\nDiscard See Discarded .\nDiscardedDiscard , Discards  and Discarded  are equivalent keywords indicating that a \nPacket  when received Shall  be thrown away by the PHY Layer  and not passed to \nthe Protocol Layer  for processing. No GoodCRC  Message  Shall  be sent in response \nto the Packet .\nDiscards See Discarded .\nIgnore See Ignored .\nIgnoredIgnore , Ignores  and Ignored  are equivalent keywords indicating Message s or \nMessage  fields which, when received, Shall  result in no special action by the \nreceiver. An Ignored  Message  Shall  only result in returning a GoodCRC  Message  \nto acknowledge Message  receipt. A Message  with an Ignored  field Shall  be \nprocessed normally except for any actions relating to the Ignored  field.\nIgnores See Ignored .\nInformativeInformative  is a keyword indicating text with no specific requirements, \nprovided only to improve understanding.\nInvalidInvalid  is a keyword when used in relation to a Packet  indicates that the Packet ’s \nusage or fields fall outside of the defined specification usage. When Invalid  is \nused in relation to an Explicit Contract  it indicates that a previously established \nExplicit Contract  which can no longer be maintained by the Source . When Invalid  \nis used in relation to individual K-code s or K-code  sequences indicates that the \nreceived Signaling  falls outside of the defined specification.\nMay May  is a keyword that indicates a choice with no implied preference.\nMay NotMay Not  is a keyword that is the inverse of May . Indicates a choice to not \nimplement a given feature with no implied preference.\nN/AN/A  is a keyword that indicates that a field or value is not applicable and has no \ndefined value and Shall Not  be checked or used by the recipient.\nNormative See Shall .\nOptionalOptional , Optionally  and Optional Normative  are equivalent keywords that \ndescribe features not mandated by this specification. However, if an Optional  \nfeature is implemented, the feature Shall  be implemented as defined by this \nspecification.\nOptional Normative See Optional .\nOptionally See Optional .\n\nPage 38 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-101.4.3   Numbering\nNumbers that are immediately followed by a lowercase “b” (e.g., 01b) are binary values. Numbers that are \nimmediately followed by an uppercase “B” are byte values. Numbers that are immediately followed by a lowercase \n“h” (e.g., 3Ah) or are preceded by “0x” (e.g., 0xFF00) are hexadecimal values. Numbers not immediately followed by \neither a “b”, “B” , or “h” are decimal values.ReservedReserved  is a keyword indicating bits, bytes, words, fields, and code values that \nare set-aside for future standardization. Their use and interpretation May  be \nspecified by future extensions to this specification and Shall Not  be utilized or \nadapted by vendor implementation. A Reserved  bit, byte, word, or field Shall  be \nset to zero by the sender and Shall  be Ignored  by the receiver. Reserved  field \nvalues Shall Not  be sent by the sender and Shall  be Ignored  by the receiver.\nShallShall  and Normative  are equivalent keywords indicating a mandatory \nrequirement. Designers are mandated to implement all such requirements to \nensure interoperability with other compliant devices.\nShall NotShall Not  is a keyword that is the inverse of Shall  indicating non-compliant \noperation.\nShouldShould  is a keyword indicating flexibility of choice with a preferred alternative; \nequivalent to the phrase “it is recommended that…”.\nShould NotShould Not  is a keyword is the inverse of Should ; equivalent to the phrase “it is \nrecommended that implementations do not…”.\nStatic Static  is a keyword indicating that a field that never changes.\nValidValid  is a keyword that is the inverse of Invalid  indicating either a Packet or \nSignaling  that fall within the defined specification or an Explicit Contract  that can \nbe maintained by the Source .Table 1.2  Keywords (Continued)\nKeyword Definition\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 391.5   Related Documents\nDocument references listed in Table 1.3, \"Document References\"  are inclusive of all approved and published ECNs \nand Errata.\nTable 1.3  Document References\nBookmark Reference Title\n[DPTC2.1] DisplayPortTM Alt Mode on USB Type-C  Standard www.vesa.org .\n[IEC 60950-1]IEC 60950-1:2005 Information technology equipment – Safety – Part 1: General \nrequirements: Amendment 1:2009, Amendment 2:2013.  www.iec.ch .\n[IEC 60958-1] IEC 60958-1:2021 Digital Audio Interface Part:1 General. www.iec.ch .\n[IEC 62368-1]IEC 62368-1:2018 Audio/Video, information, and communication technology \nequipment – Part 1: Safety requirements. www.iec.ch .\n[IEC 62368-3]IEC 62368-3:2017 Audio/video, information, and communication technology \nequipment - Part 3: Safety aspects for DC power transfer through communication cables \nand ports www.iec.ch .\n[IEC 63002]IEC 63002:2021 Interoperability specifications and communication method for external \npower supplies used with computing and consumer electronics devices www.iec.ch .\n[ISO 3166]ISO 3166 international Standard for country codes and codes for their subdivisions. \nhttp://www.iso.org/iso/home/standards/country_codes.htm .\n[TBT3] see [USB4] Chapter 13 for ThunderboltTM 3 device operation.\n[UCSI]USB Type-C  Connector System Software Interface (UCSI) Specification https://\nwww.usb.org/documents .\n[USB 2.0] Universal Serial Bus 2.0 Specification, https://www.usb.org/documents .\n[USB 3.2] Universal Serial Bus 3.2 Specification https://www.usb.org/documents .\n[USB Type-C 2.4]Universal Serial Bus Type-C Cable and Connector Specification, https://www.usb.org/\ndocuments .\n[USB4] Universal Serial Bus 4 Specification (USB4®), https://www.usb.org/documents .\n[USBBC 1.2]Universal Serial Bus Battery Charging Specification plus Errata (referred to in this \ndocument as the Battery Charging specification). https://www.usb.org/documents .\n[USBPD 2.0] Universal Serial Bus Power Delivery Specification, https://www.usb.org/documents .\n[USBPDCompliance] USB Power Delivery Compliance Test Specification, https://www.usb.org/documents .\n[USBPDFirmwareUpdate 1.0]Universal Serial Bus Power Delivery Firmware Update Specification, https://\nwww.usb.org/documents .\n[USBTypeCAuthentication 1.0]Universal Serial Bus Type-C Authentication Specification, https://www.usb.org/\ndocuments .\n[USBTypeCBridge 1.1] Universal Serial Bus Type-C Bridge Specification, https://www.usb.org/documents .\n\nPage 40 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-101.6   Terms and Abbreviations\nThis section defines terms used throughout this document. For additional terms that pertain to the Universal Serial \nBus, see Chapter 2, “Terms and Abbreviations,” in [USB 2.0] , [USB 3.2] , [USB Type-C 2.4]  and [USBBC 1.2] .\nTable 1.4  Terms and Abbreviations\nTerm Description\n(A)PDO Refers to both the PDO  and APDO  collectively.\nAC Supply\nAC SuppliedRefers to the main AC power source typically provided to the wall AKA “mains”.\nActive Cable A cable with a USB Type-C  plug on each end that incorporates data bus signal conditioning \ncircuits. The cable supports the Structured VDM  Discover Identity  Command  to expose its \ncharacteristics in addition to other Structured VDM  Command s (Electronically Marked Cable \nsee [USB Type-C 2.4]).\nActive Cable VDO VDO  defining the Capabilities  of an Active Cable .\nActive Mode A Mode  which has been through the Mode Entry  process but not the Mode Exit  process.\nAdjustable Voltage Supply A power supply whose output voltage can be adjusted to an operating voltage within its \nAdvertised  range. These Capabilities  are exposed by the Adjustable Voltage Supply  (AVS) APDO  \n(see Section 6.4.1.2.4, \"Augmented Power Data Object (APDO)\" ).\nNote: Unlike the SPR PPS , the SPR AVS  and EPR AVS  do not support current limit.\nAdvertise An offer made by a Source  in the Source_Capabilities /EPR_Source_Capabilities  Message  (e.g., \nan APDO  or PDO ).\nAlternate Mode Operation defined by a Vendor or Standard’s organization, which is associated with a SVID . The \ndefinition of Alternate Mode s is outside the scope of USB-IF specifications. Entry to and exit from \nthe Alternate Mode  uses the Mode Entry  and Mode Exit  processes. As defined in [USB Type-C 2.4] .\nAlternate Mode Adapter A PDUSB Device  which supports Alternate Mode s as defined in [USB Type-C 2.4].\nNote: Since an AMA  is a PDUSB Device , it has a single UFP  that is only addressable by SOP \nPacket s.\nAlternate Mode Controller A DFP  that supports connection to AMA s as defined in [USB Type-C 2.4]. A DFP  that is an AMC  \ncan also be a PDUSB Host .\nAMA See Alternate Mode Adapter.\nAMC See Alternate Mode Controller .\nAMS See Atomic Message Sequence .\nAPDO See Augmented Power Data Object.\nAssured Capacity Charger As defined in [USB Type-C 2.4] . This maps to a Charger  with one or more Guaranteed Capability \nPorts.\nAssured Capacity Group As defined in [USB Type-C 2.4]. This maps to a group of  Guaranteed Capability Port s.\nAtomic Message Sequence A fixed sequence of Message s as defined in Section 8.3.2, \"Atomic Message Sequence Diagrams\"  \ntypically starting and ending in one of the following states: PE_SRC_Ready , PE_SNK_Ready  or \nPE_CBL_Ready . An AMS  is Non-interruptible .\nAttach Mechanical joining of the Port Pair  by a cable.\nAttached USB Power Delivery Ports which are mechanically joined with USB cable.\nAttachment See Attach .\nAugmented Power Data \nObjectData Object  used to expose a Source Port 's or Sink Port 's power Capabilities  as part of a \nSource_Capabilities /EPR_Source_Capabilities  or Sink_Capabilities /EPR_Sink_Capabilities  \nMessage  respectively. An SPR PPS  Data Object , SPR AVS  Data Object  and EPR AVS  Data Object  are \ndefined.\nAVS See Adjustable Voltage Supply .\nAVS Mode A power supply, currently operating as an AVS, is said to be operating in AVS Mode .\nBattery A power storage device residing behind a Port that can either be a Source  or Sink  of power.\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 41Battery Slot A physical location where a Hot Swappable Battery  can be installed. A Battery Slot  might or \nmight not have a Hot Swappable Battery  present in a Battery Slot  at any given time.\nBattery Supply A power supply that directly applies the output of a Battery  to VBUS. This is exposed by the \nBattery Supply  PDO  (see Section 6.4.1.2.3, \"Battery Supply Power Data Object\" ).\nBDO See BIST Data Object .\nBFSK See Binary Frequency Shift Keying .\nBi-phase Mark Coding Modification of Manchester coding where each zero has one transition and a one has two \ntransitions (see [IEC 60958-1] ).\nBinary Frequency Shift \nKeyingA Signaling Scheme  now Deprecated  in this specification. BFSK  used a pair of discrete \nfrequencies to transmit binary (0s and 1s) information over VBUS. See [USBPD 2.0]  for further \ndetails.\nBIST Built-In Self-Test - Power Delivery testing mechanism for the PHY Layer .\nBIST Data Object Data Object  used by BIST  Message s.\nBIST Mode A BIST  receiver or transmitter test mode enabled by a BIST  Message .\nBIST Carrier Mode A BIST Mode  in which the PHY Layer  sends out a BMC  encoded continuous string of \nalternating \"1\"s and \"0\"s.\nBIST Test Data Mode A BIST Mode  in which the PHY Layer  sends out a GoodCRC  Message  and then enters a test mode \nwhere it sends no further Message s, except  GoodCRC  Message s, in response to received \nMessage s.\nBIST Shared Capacity Test \nModeA BIST Mode  applicable only to a Shared Capacity Group  of Ports where the maximum Source \nCapabilities  are always offered on every Port, regardless of the availability of shared power i.e., \nall shared power management is disabled.\nBMC See Bi-phase Mark Coding .\nCable Capabilities Capabilities  offered by a Cable Plug .\nCable Discovered USB Power Delivery Ports that have exchanged a Message  and a GoodCRC  Message  response \nwith a Cable Plug  or a VPD  using the USB Power Delivery protocol so that both the Port and the \nCable Plug  know that each is PD Capable  and which Revision they each support.\nCable Discovery See Cable Discovered .\nCable Plug Term used to describe a PD Capable  element in a Multi-Drop  system addressed by SOP’ Packet s/\nSOP’’ Packet s. Logically the Cable Plug  is associated with a USB Type-C  plug at one end of the \ncable. In a practical implementation, the electronics might reside anywhere in the cable.\nCable Reset This is initiated by Cable Reset  Signaling  from the DFP . It restores the Cable Plug s to their \ndefault, power up condition and resets the PD communications engine in the cable to its default \nstate. It does not reset the Port Partner s but does restore VCONN  to its Attachment  state.\nCable VDO VDO  returned by the Cable Plug  containing Cable Capabilities .\nCapabilities Features supported by a product. These can include, for example, power levels supplied/\nneeded, cable type, Battery  support or [USB4]  support.\nCapabilities Mismatch Indication from the Sink  that the Source ’s Advertise d Capabilities  don’t match the Sink ’s needs.\nCC See Configuration Channel .\nCert Stat VDO The Cert Stat VDO  contains the XID assigned by USB-IF to the product before certification in \nbinary format.\nCharge Through A mechanism for a VCONN  Powered USB Device  (VPD ) to pass power and CC communication from \none Port to the other without any interference or re-regulation.\nCharge Through Port The USB Type-C  receptacle on a USB Device  that is designed to allow a Source  to be connected \nthrough the USB Device  to charge a system to which it is Attached . Most common use is to allow \na single Port USB Host  to support a USB Device  while being charged.\nCharger Provider  whose primary purpose is to supply power to a Consumer  or Consumer s in order to \ncharge their Battery .\nChunk A MaxExtendedMsgChunkLen (26 byte) or less portion of a Data Block . Data Block s can be sent \neither as a single Message  or as a series of Chunk s.Table 1.4  Terms and Abbreviations (Continued)\nTerm Description\n\nPage 42 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10Chunked See Chunking .\nChunked Extended Message Extended Message  which has been broken up into Chunk s.\nChunking The process of breaking up a Data Block  larger than MaxExtendedMsgLegacyLen (26-bytes) \ninto two or more Chunk s.\nChunking Layer Part of the Protocol Layer  responsible for Chunking .\nCL See Current Limit .\nCold Socket A Port that does not apply vSafe5V  on V BUS until a Sink  is Attached .\nCollision Avoidance Mechanisms to prevent simultaneous communication by the Source , Sink  and Cable Plug  on CC .\nCommand Request and response pair defined as part of a Structured Vendor Defined Message  (see Section \n6.4.4.2, \"Structured VDM\" ).\nConfiguration Channel Single wire used by the BMC  PHY Layer  Signaling Scheme  (see [USB Type-C 2.4]).\nConnect See Connected .\nConnected USB Power Delivery ports that have exchanged a Message  and a GoodCRC  Message  response \nusing the USB Power Delivery protocol so that both Port Partner s know that each is PD Capable .\nConstant Voltage A constant voltage feature of an SPR PPS  Source . The SPR PPS  Source  output voltage remains \nconstant as the load changes up to its Current Limit .\nConsumer The capability of a PD Port  (typically a Device 's UFP ) to sink power from the power conductor \n(e.g., VBUS). This corresponds to a USB Type-C  Port with Rd asserted on its CC wire.\nConsumer/Provider A Consumer  with the additional capability to function as a Provider . This corresponds to a Dual-\nRole Power Port with Rd asserted on its CC wire.\nContinuous BIST Mode The BIST Mode  where the Port or Cable Plug  being tested sends a continuous stream of test data.\nContract An agreement on both power level and direction is reached between a Port Pair . A Contract  \ncould be explicitly Negotiated  between the Port Pair  or could be an implicit power level defined \nby the current State . While operating in Power Delivery mode there will always be either an \nExplicit Contract  or Implicit Contract  in place. The Contract  can only be altered in the case of a \nNegotiation /Re-negotiation , Power Role Swap,  Fast Role Swap , Hard Reset , Error Recovery  or \nfailure of the Source .\nControl Message A Control Message  is defined as a Message  with the Number of Data Objects  field in the Message \nHeader  is set to zero. The Control Message  consists only of a Message Header  and a CRC .\nCRC CRC  stands for Cyclic Redundancy Check. It is an error-detecting code used to determine if a \nblock of data has been corrupted.\nCT-VPD See VCONN  Powered USB Charge Through Device .\nCurrent Limit A current limiting feature of an SPR PPS  Source . When a Sink  operating in SPR PPS  mode \nattempts to draw more current from the Source  than the requested Current Limit  value, the \nSource  reduces its output voltage so the current it supplies remains at or below the requested \nvalue.\nNote: Current Limit  is not supported by SPR AVS  and EPR AVS  Source s.\nCV See Constant Voltage.\nData Block An Extended Message  Payload  data unit. The size of each type of Data Block  is specified as a series \nof bytes up to MaxExtendedMsgLen  bytes in length. This is distinct from a Data Object  used by \na Data Message  which is always a 32-bit object.\nData Message A Data Message  consists of a Message Header  followed by one or more Data Object s. Data \nMessage s are easily identifiable because the Number of Data Objects  field in the Message \nHeader  is always a non-zero value.\nData Object A Data Message  Payload  data unit. This 32-bit object contains information specific to different \ntypes of Data Message . For example Power, Request, BIST , and Vendor Data Object s are defined.\nData Reset Process which resets USB Communication .\nData Role A Port Partner  will be in one of two Data Role s; either DFP  (USB Host ) or UFP  (USB Device ).\nData Role Swap Process of exchanging the Data Role s between Port Partner s.\nDead Battery A device has a Dead Battery  when the Battery  in a device is unable to power its functions.Table 1.4  Terms and Abbreviations (Continued)\nTerm Description\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 43Default Contract An agreement on current at 5V is reached between a Port Pair  based on USB Type-C  current \n([USB Type-C 2.4]).\nDetach Mechanical unjoining of the Port Pair  by removal of the cable.\nDetached USB Power Delivery Ports which are no longer mechanically joined with USB cable.\nDetaches See Detach .\nDevice When lower cased (device), it refers to any USB product, either USB Device  or USB Host . When \nin upper case refers to a USB Device  (Peripheral  or Hub ).\nDevice Policy Policy applied across multiple Ports in a Source  or Sink .\nDevice Policy Manager Module running in a Source  or Sink  that applies Device Policy  to each Port in the device, as Local \nPolicy , via the Policy Engine .\nDFP See Downstream Facing Port .\nDFP VDO VDO  returned by the DFP  containing Capabilities .\nDifferential Non-Linearity The difference between an ideal LSB step, and the real observable LSB step when the Power \nSource  is operating in either PPS or AVS mode. A DNL  of 0 indicates that the step is ideal. If DNL  \nis positive the step is larger than the ideal LSB, and if it is negative then the step is smaller than \nideal.\nDiscovery Process Command  sequence using Structured Vendor Defined Message s resulting in identification of the \nPort Partner  and Cable Plug , and their supported SVID s and Alternate Mode s.\nDNL See Differential Non-Linearity .\nDownstream Facing Port Indicates the Port's position in the USB topology which typically corresponds to a USB Host  root \nPort or Hub  downstream Port as defined in [USB Type-C 2.4] . At connection, the Port defaults to \noperation as the Source  and as a USB Host  (when USB Communication  is supported).\nDPM See Device Policy Manager .\nDRD See Dual-Role Data .\nDRP See Dual-Role Power .\nDual-Role Data Capability of operating as either a DFP  or UFP .\nDual-Role Data Port A Port capable of operating as DRD .\nDual-Role Power Capability of operating as either a Source  or Sink .\nDual-Role Power Device A product containing one or more Dual-Role Power Port s that can operate as either a Source  or \na Sink .\nDual-Role Power Port A Port capable of operating as a DRP .\nEM See Extended Message .\nEnd of Packet K-code  marker used to delineate the end of a Packet .\nEOP See End of Packet .\nEPR See Extended Power Range .\nEPR AVS A power supply operating in EPR Mode  whose output voltage can be adjusted to an operating \nvoltage within its Advertise d range. Unlike SPR PPS  it does not support current limit. The AVS \nCapabilities  are exposed by the Adjustable Voltage Supply  APDO  (see Section 6.4.1.2.4, \n\"Augmented Power Data Object (APDO)\" ). \nEPR AVS Mode A EPR Source , currently operating in an EPR AVS  Contract , is said to be operating in EPR AVS \nMode .\nEPR Cable A cable which is rated to operate in both SPR Mode  and EPR Mode .\nEPR Capabilities The EPR Capabilities  Message s (EPR_Source_Capabilities  and EPR_Sink_Capabilities ) are \nExtended Message s with the first seven positions filled with the same SPR (A)PDO s returned by \nthe SPR Capabilities  Message s (Source_Capabilities  and Sink_Capabilities ) followed by the EPR \n(A)PDO s starting in the eighth position.\nEPR Capable A product which has the ability to operate in EPR Mode .Table 1.4  Terms and Abbreviations (Continued)\nTerm Description\n\nPage 44 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10EPR Mode A Power Delivery mode of operation where maximum allowable voltage is 48V. The Sink  \ncomplies to the requirements of [IEC 62368-1]  for operation with a PS3 Source . The Source  \ncomplies to the requirements of [IEC 62368-1]  for operation with a PS3 Sink . The cable complies \nwith [IEC 62368-1] . Entry into the EPR Mode  requires that an EPR Source  is Attached  to an EPR \nSink  with an EPR Cable . The EPR Source  will only enter the EPR Mode  when requested to do so \nby the Sink  and it has determined it is Attached  to an EPR Sink  with an EPR Capable  cable.\nOnly the  EPR_Source_Capabilities  and the  EPR_Request  Message s are allowed to Negotiate  EPR  \nExplicit Contract s. The SPR Mode  Message s (Source_Capabilities  and Request ) are not allowed \nto be used while in EPR Mode .\nEPR (A)PDO Fixed Supply  PDO  that offers either 28V, 36V or 48V.\nAdjustable Voltage Supply  (AVS) APDO  whose Maximum voltage is the highest Fixed Supply  PDO  \nvoltage in the EPR_Source_Capabilities  Message  and no more than 240W.\nEPR Sink A Sink  that supports both SPR Mode  and EPR Mode .\nEPR Sink Port A Port exposed on an EPR Sink .\nEPR Source A Source  that supports both SPR Mode  and EPR Mode .\nEPR Source Port A Port exposed on an EPR Source .\nError Recovery Port enters the ErrorRecovery  State  as defined in [USB Type-C 2.4].\nExplicit Contract An agreement reached between a Port Pair  as a result of the Power Delivery Negotiation  \nprocess. An Explicit Contract  is established (or continued) when a Source  sends an Accept  \nMessage  in response to a Request  Message  sent by a Sink  followed by a PS_RDY  Message  sent by \nthe Source  to indicate that the power supply is ready. This corresponds to the PE_SRC_Ready  \nState  for a Source  Policy Engine  and the PE_SNK_Ready  State  for a Source  Policy Engine . The \nExplicit Contract  can be altered through the Re-negotiation  process. \nExtended Capabilities An Extended Message  containing Capabilities  information.\nExtended Control Message An Extended Message  containing control information only.\nExtended Message A Message  containing Data Block s. The Extended Message  is defined by the Extended  field in the \nMessage Header  being set to one and contains an Extended Message Header  immediately \nfollowing the Message Header .\nExtended Message Header Every Extended Message  contains a 16-bit Extended Message Header  immediately following the \nMessage Header  containing information about the Data Block  and any Chunking  being applied.\nExtended Power Range Extends the power range from a maximum of 100W ( SPR) to a maximum of 240W ( EPR ). When \noperating in the EPR Mode , only EPR  specific Message s (the EPR_Source_Capabilities  Message  \nand the  EPR_Request  Message ) are used to Negotiate  Explicit Contract s.\nExternal Supply Power supply external to the device. This could be powered from the wall or from any other \npower source.\nFast Role Swap Process of exchanging the Source  and Sink  Power Role s between Port Partner s rapidly due to the \ndisconnection of an external power supply.\nFast Role Swap Request An indication from an Initial Source  to the Initial Sink  that a Fast Role Swap  is needed. The Fast \nRole Swap Request  is indicated by driving the CC line to ground for a short period; it is not a \nMessage  or Signaling .\nFirst Explicit Contract The Explicit Contract that immediately follows an Attach , power on Hard Reset , Power Role Swap  \nor Fast Role Swap  event.\nFixed Battery\nFixed BatteriesA Battery  that is not easily removed or replaced by an end user e.g., requires a special tool to \naccess or is soldered in.\nFixed Supply A well-regulated fixed voltage power supply. This is exposed by the Fixed Supply  PDO  (see \nSection 6.4.1.2.1, \"Fixed Supply Power Data Object\" )\nFrame Generic term referring to an atomic communication transmitted by PD such as a Packet , Test \nFrame  or Signaling .\nFRS See Fast Role Swap .Table 1.4  Terms and Abbreviations (Continued)\nTerm Description\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 45Guaranteed Capability Port A Guaranteed Capability Port  is always capable of delivering its Port Maximum PDP  and \nindicates this by setting its Port Present PDP  to be the same as its Port Maximum PDP  except \nwhen limited by the cable’s Capabilities . This is a Static  capability.\nHard Reset This is initiated by Hard Reset  Signaling  from either Port Partner . It restores VBUS to USB Default \nOperation  and resets the PD communications engine to its default State  in both Port Partner s as \nwell as in any Attached  Cable Plug s. It restores both Port Partner s to their default Data Role s and \nreturns the VCONN  Source  to the Source  Port. A DRP  Source Port  operating as a Source  will \ncontinue to operate as a Source .\nHost See USB Host .\nHot Swappable Battery A Battery  that is easily accessible for a user to remove or change for another Battery .\nHub A USB Device  that provides additional connections to the USB.\nID Header VDO The VDO  in a Discover Identity  Command  immediately following the VDM Header . The ID \nHeader VDO  contains information corresponding to the Power Delivery Product.\nIdle Condition on CC where there are no signal transitions within a given time window. See Section \n5.8.6.1, \"Definition of Idle\" .\nImplicit Contract An agreement on power levels between a Port Pair  which occurs, not because of the Power \nDelivery Negotiation  process, but because of a Power Role Swap or Fast Role Swap . Implicit \nContract s are transitory since the Port Pair  is required to immediately Negotiate  an Explicit \nContract  after the Power Role Swap. An Implicit Contract  Shall  be limited to USB Type-C  current \n(see [USB Type-C 2.4]).\nInitial Sink Sink  at the start of a Power Role Swap or Fast Role Swap  which transitions to being the New \nSource .\nInitial Source Source  at the start of a Power Role Swap or Fast Role Swap  which transitions to being the New \nSink .\nInitiator The initial sender of a Command  request in the form of a query.\nInvariant PDOs A Source Port  that offers Invariant PDOs  will always Advertise  the same PDO s except when \nlimited by the cable.\nIoC The Negotiated  current value as defined in [IEC 63002] .\nIR Drop The voltage drop across the cable and connectors between the Source  and the Sink  as defined in \n[USB Type-C 2.4]. It is a function of the resistance of the ground and power wire in the cable plus \nthe contact resistance in the connectors times the current flowing over the path.\nK-code Special symbols provided by the 4b5b coding scheme. K-code s are used to signal Hard Reset  and \nCable Reset  and delineate Packet  boundaries.\nLocal Policy Every PD Capable  device has its own Policy , called the Local Policy  that is executed by its Policy \nEngine to control its power delivery behavior. The Local Policy  at any given time might be the \ndefault policy, hard coded or modified by changes in operating parameters or one provided by \nthe system USB Host  or some combination of these. The Local Policy  Optionally  can be changed \nby a System Policy Manager .\nLPS Limited Power Supply as defined in [IEC 62368-1] .\nLSB An abbreviation for Least Significant Bit.\nManaged Capability Port A Managed Capability Port  can have its Port Present PDP  set to a different value than its Port \nMaximum PDP . Its Port Present PDP  value can be dynamic and change during normal \noperation.\nMessage The Packet  Payload  consisting of a Message Header  for Control Message s and a Message Header  \nand data for Data Message s and Extended Message s as defined in Section 6.2, \"Messages\" .\nMessage Header Every Message  starts with a 16-bit Message Header  containing basic information about the \nMessage  and the PD Port’s Capabilities .\nMessaging Communication in the form of Message s as defined in Section 6, \"Protocol Layer\" .\nModal Operation Operation where there are one or more Active Mode s. Modal Operation  ends when there are no \nlonger any Active Mode s.\nMode Mode  is a general term used to describe a particular type of operation of a given device. \nExamples of modes are: Alternate Mode , EPR Mode , SPR Mode .Table 1.4  Terms and Abbreviations (Continued)\nTerm Description\n\nPage 46 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10Mode Entry Process to start operation in a particular Mode .\nMode Exit Process to end operation in a particular Mode .\nMulti-Drop PD is a Multi-Drop  system sharing the Power Delivery communication channel between the Port \nPartner s and the cable.\nNegotiate See Negotiation .\nNegotiated See Negotiation .\nNegotiation This is the PD process whereby:\n1) The Source  Advertise s its Capabilities .\n2) The Sink  requests one of the Advertise d Capabilities .\n3) The Source  acknowledges the request, alters its output to satisfy the request and informs \nthe Sink .\nThe result of the Negotiation  is a Contract  for power delivery/consumption between the Port \nPair . \nNew Sink Sink  at the end of a Power Role Swap  or Fast Role Swap  which has transition from being the Initial \nSource .\nNew Source Source  at the end of a Power Role Swap or Fast Role Swap  which has transition from being the \nInitial Sink .\nNon-interruptible There cannot be any unexpected Message s during an AMS ; it is therefore Non-interruptible . An \nAMS  starts when the first Message  in the AMS  has been sent (i.e., a GoodCRC  Message  has been \nreceived acknowledging the Message ). See Section 8.3.2.1.3, \"Atomic Message Sequences\" .\nOCP Over-Current Protection.\nOTP Over-Temperature Protection.\nOVP Over-Voltage Protection.\nPacket One entire unit of PD communication including a Preamble , SOP* , Payload , CRC  and EOP  as \ndefined in Section 5.6, \"Packet Format\" .\nPassive Cable Cable with a USB plug on each end at least one of which is a Cable Plug supporting SOP’  that does \nnot incorporate data bus signal conditioning circuits. Supports the Structured VDM  Discover \nIdentity  to determine its characteristics (Electronically Marked Cable see [USB Type-C 2.4]).\nNote: This specification does not discuss Passive Cable s that are not Electronically Marked.\nPassive Cable VDO VDO  defining the Capabilities  of a Passive Cable .\nPayload Data content of a Packet , provided to/from the Protocol Layer .\nPD USB Power Delivery\nPD Capable A Port that supports USB Power Delivery.\nPD Connection See Connected .\nPD Power The output power, in Watts, of a Source , as specified by the manufacturer and expressed in Fixed \nSupply  PDO s as defined in Section 10, \"Power Rules\" .\nPD SID See USB-IF PD SID .\nPDO See Power Data Object .\nPDP See PD Power .\nPDP Rating The PDP Rating  is the same as the Manufacturer declared PDP  for a Source Port  except where \nthere is a fractional value, in which case the PDP Rating  corresponds to the integer part of the \nManufacturer declared PDP Rating  (see Section 6.4.11.2, \"Port Maximum PDP Field\" ).\nPDUSB USB Device  Port or USB Host  Port that is both PD Capable  and capable of USB Communication . See \nalso PDUSB Host , PDUSB Device  and PDUSB Hub .\nPDUSB Device A USB Device  with a PD Capable  UFP . A PDUSB Device  is only addressed by SOP Packet s.\nPDUSB Host A USB Host  which is PD Capable  on at least one of its DFP s. A PDUSB Host  is only addressed by \nSOP Packet s.Table 1.4  Terms and Abbreviations (Continued)\nTerm Description\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 47PDUSB Hub A port expander USB Device  with a UFP  and one or more DFP s which is PD Capable  on at least \none of its Ports. A PDUSB Hub  is only addressed by SOP Packet s.\nA self-powered PDUSB Hub  is treated as a USB Type-C Multi-Port Charger .\nPDUSB Peripheral A USB Device  with a PD Capable  UFP  which is not a PDUSB Hub . A PDUSB Peripheral  is only \naddressed by SOP Packet s.\nPE See Policy Engine .\nPeripheral A physical entity that is Attached  to a USB cable and is currently operating as a USB Device .\nPHY Layer The Physical Layer responsible for sending and receiving Message s across the USB Type-C  CC \nwire between a Port Pair .\nPolicy Policy  defines the behavior of PD Capable  parts of the system and defines the Capabilities  it \nAdvertise s, requests made to (re) Negotiate  power and the responses made to requests received.\nPolicy Engine The Policy Engine  interprets the Device Policy Manager ’s input to implement Policy  for a given \nPort and directs the Protocol Layer  to send appropriate Message s.\nPort An interface typically exposed through a receptacle, or via a plug on the end of a hard-wired \ncaptive cable. USB Power Delivery defines the interaction between a Port Pair . \nPort Pair Two Attached  PD Capable  Ports.\nPort Partner A Contract  is Negotiated  between a Port Pair  connected by a USB cable. These ports are known \nas Port Partner s.\nPower Conductor The wire that delivers power from the Source  to Sink . For example, USB’s VBUS.\nPower Consumer See Consumer .\nPower Data Object Data Object  used to expose a Source Port ’s or Sink Port ’s power Capabilities  as part of a \nSource_Capabilities  / EPR_Source_Capabilities  or Sink_Capabilities  / EPR_Sink_Capabilities  \nMessage  respectively. Fixed Supply , Variable Supply  and Battery Supply  Power Data Object s are \ndefined; SPR Mode  uses all four while EPR Mode  uses only Fixed Supply  and AVS PDO s.\nPower Delivery Mode Operation after a Contract  has initially been established between a Port Pair . This Mode  persists \nduring normal Power Delivery operation, including after a Power Delivery Mode . Power Delivery \nMode  can only be exited by Detach ing the Ports, applying a Hard Reset  or by the Source  removing \npower (except when the Initial Source  removes power from VBUS during the Power Role Swap \nprocedure).\nPower Provider See Provider .\nPower Role A Port Partner  will be in one of two Power Role s; either Source  or Sink .\nPower Role Swap Process of exchanging the Source  and Sink  Power Role s between Port Partner s.\nPower Rules Define voltages and current ranges that are offered by compliant USB Power Delivery Source s \nand used by a USB Power Delivery Sink  for a given value of PDP Rating . See Section 10, \"Power \nRules\" .\nPPS See Programmable Power Supply .\nPPS Mode An SPR Source , currently operating as an PPS, is said to be operating in PPS Mode .\nPreamble Start of a transmission which is used to enable the receiver to lock onto the carrier. The \nPreamble  consists of a 64-bit sequence of alternating 0s and 1s starting with a \"0\" and ending \nwith a \"1\" which is not 4b5b encoded.\nProduct Type Product categorization returned as part of the Discover Identity  Command .\nProduct Type VDO VDO  identifying a certain Product Type  in the ID Header VDO  of a Discover Identity  Command .\nProduct VDO The Product VDO  contains identity information relating to the product. \nProgrammable Power \nSupplyA power supply, operating in SPR Mode, whose output voltage can be programmatically adjusted \nin small increments over its Advertise d range and has a programmable output current fold back \n(note that the SPR AVS  and EPR AVS  does not).The Capabilities  are exposed by the SPR \nProgrammable Power Supply  APDO  (see Section 6.4.1.2.4, \"Augmented Power Data Object \n(APDO)\" ).\nProtocol Error An unexpected Message  during an Atomic Message Sequence . A Protocol Error  during an AMS  will \nresult in either a Soft Reset  or a Hard Reset .Table 1.4  Terms and Abbreviations (Continued)\nTerm Description\n\nPage 48 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10Protocol Layer The entity that forms the Message s used to communicate information between Port Partner s.\nProvider A PD Port (typically a USB Host , Hub , or Charger  DFP ) that can source power over the power \nconductor (e.g., VBUS). This corresponds to a USB Type-C  Port with Rp asserted on its CC wire.\nProvider/Consumer A Provider  with the additional capability to act as a Consumer . This corresponds to a Dual-Role \nPower Port  with Rp asserted on its CC wire.\nPS1\nPS2\nPS3Classification of electrical power as defined in [IEC 62368-1] .\nPSD Sink  which draws power but has no other USB or Alternate Mode  communication function e.g., a \npower bank.\nRa Prior to application of VCONN , a powered cable applies a pull-down resistor Ra on its VCONN  pin.\nRd Pull-down resistor on the USB Type-C  CC wire used to indicate that the Port is a Sink  (see [USB \nType-C 2.4] ).\nRDO See Request Data Object .\nRe-attach Attach  of the Port Pair  by a cable after a previous Detach .\nRe-negotiate See Re-negotiation .\nRe-negotiated See Re-negotiation .\nRe-negotiation A process wherein one of the Port Partner s wants to alter the Negotiated  Contract .\nRequest Message  used by a Sink Port  to Negotiate  a Contract ; refers to either a Request /EPR_Request  \nMessage .\nRequest Data Object Data Object  used by a Sink Port  to Negotiate  a Contract  as a part of a Request /EPR_Request  \nMessage .\nResponder The receiver of a Command  request sent by an Initiator  that replies with a Command  response.\nRevision Major release of the USB Power Delivery specification. Each Revision will have various Version s \nassociated with it.\nRevision 1.0 Deprecated  major Revision of the USB Power Delivery Specification.\nRevision 2.0 Superseded major Revision of the USB Power Delivery Specification as defined in [USBPD 2.0] , \nwith which this specification is compatible.\nRevision 3.x Current major Revisions of the USB Power Delivery Specification.\nRp Pull-up resistor on the USB Type-C  CC wire used to indicate that the Port is a Source  (see [USB \nType-C 2.4] ).\nSafe Operation Source s must have the ability to tolerate vSafe5V  applied by both Port Partner s.\nShared Capacity Charger As defined in [USB Type-C 2.4] . This maps to a Charger  with multiple Managed Capability Port s.\nShared Capacity Group As defined in [USB Type-C 2.4]. This maps to a group  with Managed Capability Port s.\nSID See Standard ID .\nSignaling A Preamble followed by an ordered set of four K-code s used to indicate a particular line symbol \ne.g., Hard Reset  as defined in Section 5.4, \"Ordered Sets\" .\nSignaling Scheme Physical mechanism used to transmit bits. Only the BMC  Signaling Scheme  is defined in this \nspecification. \nNote: The BFSK  Signaling Scheme  supported in Revision 1.0  of this specification has been \nDeprecated .\nSingle-Role Port A Port that is only capable of operating either as a Source  or Sink , but not both. E.g., the port is \nnot a DRP .\nSink The Port consuming power from VBUS; most commonly a USB Device .\nSink Capabilities Capabilities  wanted by a Sink .\nSink Directed Charge A charging scheme whereby the Sink  connects the Source  to its Battery  through safety and other \ncircuitry. When the SPR PPS  Current Limit  feature is activated, the Source  automatically controls \nits output current by adjusting its output voltage.Table 1.4  Terms and Abbreviations (Continued)\nTerm Description\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 49Sink Port Port operating as a Sink .\nSink Standby During Sink Standby  the Sink reduces its current draw to iSnkStdby\nSoft Reset A process that resets the PD communications engine to its default state.\nSOP K-code  marker used for communication between Port Partner s. See also Start of Packet .\nSOP Communication Communication using SOP Packet s also implies that an AMS  is being followed.\nSOP Packet Any Power Delivery Packet  which starts with an SOP .\nSOP’ Communication Communication with a Cable Plug  using SOP’ Packet s, also implies that an AMS  is being followed.\nSOP’ Packet Any Power Delivery Packet  which starts with an SOP’  used to communicate with a Cable Plug .\nSOP’’ Communication Communication with a Cable Plug  using SOP’’ Packets, also implies that an AMS  is being followed.\nSOP’’ Packet Any Power Delivery Packet  which starts with an SOP’’  used to communicate with a Cable Plug  \nwhen SOP’ Packet s are being used to communicate with the other Cable Plug .\nSOP’\nSOP’’K-code  marker used for communication between a Port and a Cable Plug . See also Start of Packet .\nSOP* Used to generically refer to K-code  markers: SOP , SOP’  and SOP’’ . See also Start of Packet .\nSOP* Communication Communication using SOP* Packet s, also implies an AMS  is being followed.\nSOP* Packet A term referring to any Power Delivery Packet  starting with either SOP , SOP’ , or SOP’’ .\nSource The Power Role  a Port is operating in to supply power over VBUS; most commonly a USB Host  or \nHub  downstream port.\nSource Capabilities Capabilities  offered by a Source .\nSource Port Port operating as a Source .\nSpecification Revision See Revision.\nSPM See System Policy Manager .\nSPR See Standard Power Range .\nSPR AVS An SPR Source  whose output voltage can be adjusted to an operating voltage within its \nAdvertise d range. Unlike SPR PPS , it does not support current limit. The SPR AVS  Capabilities  are \nexposed by the SPR AVS  APDO  (see Section 6.4.1.2.4.2, \"SPR Adjustable Voltage Supply APDO\" ).\nSPR AVS Mode A SPR Source , currently operating in an SPR AVS  Contract , is said to be operating in SPR AVS \nMode .\nSPR Capabilities An SPR Capabilities  Message  (Source_Capabilities  Message  or Sink_Capabilities  Message ) has at \nleast one Power Data Object  for vSafe5V  followed by up to 6 additional Power Data Object s.\nSPR Contract Explicit Contract  Negotiate d, in SPR Mode , based on SPR (A)PDO s.\nSPR Mode The classic mode of PD operation where Explicit Contract s are Negotiated  using SPR (A)PDO s.\nSPR (A)PDO Fixed Supply  PDO  that offers up to 20V and no more than 100W.\nVariable Supply  PDO  whose Maximum voltage offers up to 21V and no more than 100W.\nBattery Supply  PDO  whose Maximum voltage offers up to 21V and no more than 100W.\nAdjustable Voltage Supply  (AVS) APDO  whose Maximum voltage is up to 20V and no more than \n100W.\nProgrammable Power Supply  (PPS) APDO  whose Maximum voltage is up to 21V and no more \nthan 100W.\nSPR PPS A power supply whose output voltage and output current can be programmatically adjusted in \nsmall increments over its Advertise d range. It supports current limit unlike SPR AVS  and EPR \nAVS. The Capabilities  are exposed by the Programmable Power Supply  APDO s (see Section \n6.4.1.2.4, \"Augmented Power Data Object (APDO)\" ).\nSPR PPS Mode A power supply, currently operating in an SPR PPS  Contract , is said to be operating in SPR PPS \nMode .\nSPR Sink A Sink  which only supports SPR Mode  and does not support EPR Mode .\nSPR Sink Port A Port exposed on an SPR Sink .\nSPR Source A Source  which only supports SPR Mode  and does not support EPR Mode .Table 1.4  Terms and Abbreviations (Continued)\nTerm Description\n\nPage 50 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10SPR Source Port A Port exposed on an SPR Source .\nStandard ID 16-bit unsigned value assigned by the USB-IF to a given industry standards organization’s \nspecification.\nStandard or Vendor ID Generic term referring to either a VID or a SID. SVID  is used in place of the phrase “Standard or \nVendor ID.”\nStandard Power Range Only the Source_Capabilities  and the Request  Message s are allowed to Negotiate  SPR  Explicit \nContract s. The EPR  Message s (the EPR_Source_Capabilities  Message  and the  EPR_Request  \nMessage ) are not allowed to be used while in SPR Mode .\nStart of Packet K-code  marker used to delineate the start of a Packet . \nState PD state machine state as defined in Section 6.12, \"State behavior\"  and Section 8.3.3, \"State \nDiagrams\"  state machines.\nStructured VDM See Structured Vendor Defined Message .\nStructured VDM Header The VDM Header  for a Structured Vendor Defined Message . \nStructured Vendor Defined \nMessageA Vendor Defined Message  where the contents and usage of bits 14...0 of the VDM Header  are \ndefined by this specification.\nSVDM See Structured Vendor Defined Message .\nSVID See Standard or Vendor ID .\nSwap Standby During Swap Standby  the Source  does not drive VBUS and the Sink's current draw does not \nexceed iSnkSwapStdby .\nSystem Policy Overall system Policy  generated by the system, broken up into the policies required by each Port \nPair  to affect the System Policy . It is programmatically fed to the individual devices for \nconsumption by their Policy Engine s.\nSystem Policy Manager Module running on the USB Host . It applies the System Policy  through communication with PD \nCapable  Consumer s and Provider s that are also connected to the USB Host  via USB.\nTest Frame Frame  consisting of a Preamble , SOP* , followed by test data (See Section 5.9, \"Built in Self-Test \n(BIST)\" ).\nTest Pattern Continuous stream of test data in a given sequence (See  Section 5.9, \"Built in Self-Test (BIST)\" ). \nTester The Tester  is assumed to be a piece of test equipment that manages the BIST  testing process of \na PD UUT .\nUFP See Upstream Facing Port .\nUFP VDO VDO  returned by the UFP  containing Capabilities .\nUI See Unit Interval .\nUnchunked See Unchunked Extended Message .\nUnchunked Extended \nMessageExtended Message  that has been transmitted whole without using Chunking .\nUnexpected Message Message  that a Port supports but has been received in an incorrect State .\nUnit Interval The time to transmit a single data bit on the wire.\nUnit Under Test The PD device that is being tested by the Tester  and responds to the initiation of a particular BIST  \ntest sequence.\nUnrecognized Message Message  that a Port does not understand e.g., a Message  using a Reserved  Message  type, a \nMessage  defined by a higher specification Revision than the Revision this Port supports, or an \nUnstructured Vendor Defined Message  for which the VID is not recognized.\nUnstructured VDM See Unstructured Vendor Defined Message .\nUnstructured VDM Header The VDM Header  for an Unstructured Vendor Defined Message . \nUnstructured Vendor \nDefined MessageA Vendor Defined Message  where the contents of bits 14...0 of the VDM Header  are undefined.\nUnsupported Message Message  that a Port recognizes but does not support. This is a Message  defined by the \nspecification, but which is not supported by this Port.Table 1.4  Terms and Abbreviations (Continued)\nTerm Description\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 51Upstream Facing Port Indicates the Port’s position in the USB topology typically a Port on a Device  as defined in [USB \nType-C 2.4] . At connection, the Port defaults to operation as a USB Device  (when USB \nCommunication  is supported) and Sink .\nUSB Attached State Synonymous with the [USB 2.0]  and [USB 3.2]  definition of the Attached  state\nUSB Communication Transfer of USB data Packet s as defined in [USB 2.0]  and [USB 3.2] .\nUSB Default Operation Operation of a Port at Attach  or after a Hard Reset  where the DFP  Source  applies vSafe5V  on VBUS \nand the UFP  Sink  is operating at vSafe5V  as defined in [USB 2.0] , [USB 3.2] , [USB Type-C 2.4]  or \n[USBBC 1.2] .\nUSB Device Either a Hub  or a Peripheral  device as defined in [USB 2.0] , [USB 3.2]  and [USB4] .\nUSB Host The computer system where the USB Host  controller is installed as defined in [USB 2.0] , [USB \n3.2]  and [USB4] .\nUSB Hub See Hub .\nUSB Powered State Synonymous with the [USB 2.0]  and [USB 3.2]  definition of the powered state.\nUSB Safe State State of the USB Type-C  connector when there are pins to be re-purposed (see [USB Type-C 2.4] ) \nso they are not damaged by and do not cause damage to their Port Partner .\nUSB Type-A Term used to refer to any A plug or receptacle including USB Micro-A plugs and USB Standard-\nA plugs and receptacles. USB Micro-AB receptacles are assumed to be a combination of USB \nType-A  and USB Type-B .\nUSB Type-B Terms used to refer to any B-plug or receptacle including USB Micro-B plugs and USB Standard-\nB plugs and receptacles, including the PD and non-PD versions. USB Micro-AB receptacles are \nassumed to be a combination of USB Type-A  and USB Type-B .\nUSB Type-C Term used to refer to the USB Type-C  connector plug, or receptacle as defined in [USB Type-C \n2.4] .\nUSB Type-C Multi-Port \nChargerA product that exposes multiple USB Type-C  Source  Ports for the purpose of charging multiple \nconnected USB Device s as defined in [USB Type-C 2.4].\nUSB-C® Port Control Module in a PD Capable  device which controls Attach /Detach  and either detects or sets the Rp \nvalue.\nUSB-IF PD SID Standard ID allocated to this specification by the USB Implementer’s Forum.\nUSB4® Mode Device is operating in a Mode  as defined in [USB4] .\nUUT See Unit Under Test .\nVariable Supply A poorly regulated power supply that is not a Battery . This is exposed by the Variable Supply  PDO  \n(see Section 6.4.2, \"Request Message\") .\nVBUS The VBUS wire delivers power from a Source  to a Sink .\nVCONN Once the connection between USB Host  and device is established, the CC pin (CC1 or CC2) in the \nreceptacle that is not connected via the CC wire through the standard cable is re-purposed to \nsource VCONN  to power circuits in a Cable Plug , VCONN  Powered Accessory  or VCONN  Powered USB \nDevice  (see [USB Type-C 2.4]).\nVCONN  Powered Accessory An accessory that is powered from VCONN  to operate in an Alternate Mode  (see [USB Type-C \n2.4] ).\nVCONN  Powered USB Charge \nThrough DeviceA CT-VPD  is a VPD  with an additional port for connecting a Source  (e.g., a Charger ) as defined in \n[USB Type-C 2.4]. \nWhen no Charger  is connected, a CT-VPD  behaves as a VPD . \nWhen a Charger  is connected, no PD communication to the CT-VPD  itself is possible as CC  is \nconnected to the Charger  port. Hence all PD communication then is with the Charger  and the \ncable with which it is connected.Table 1.4  Terms and Abbreviations (Continued)\nTerm Description\n\nPage 52 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-101.7   Parameter Values\nThe parameters in this specification are expressed in terms of absolute values. For details of how each parameter \nis measured in compliance please see [USBPDCompliance] .\n1.8   Changes from Revision 3.0 \nExtended Power Range (EPR) including Adjustable Voltage Supply (AVS) has been added.\n1.9   Compatibility with Revision 2.0\nThis Revision of the USB Power Delivery specification is designed to be fully inter-operable with [USBPD 2.0]  \nsystems using BMC Signaling over the [USB Type-C 2.4]  connector and to be compatible with Revision 2.0 \nhardware.\nPlease see Section 2.3, \"USB Power Delivery Capable Devices\"  for more details of the mechanisms defined to enable \ncompatibility. VCONN  Powered USB Device A captive cable USB Device  that can be powered by either VCONN  or VBUS as defined in [USB Type-\nC 2.4] . \nA VPD  is a captive cable USB Device  that can be powered by either VCONN  or VBUS and only \nresponds to SOP’ Communication  as defined in the Tables in Section 6.12, \"State behavior\") . It \nonly responds to Message s sent with a Specification Revision  of at least Revision 3.x . A VPD  is not \nallowed to support Alternate Mode s.\nThe term VPD  refers to either a VPD  or a CT-VPD  with no Charger  connected.\nVCONN  Source The USB Type-C  Port responsible for sourcing VCONN .\nVCONN  Swap Process of exchanging the VCONN  Source  between Port Partner s.\nVDEM See Vendor Defined Extended Message .\nVDM See Vendor Defined Message .\nVDM Header The first Data Object  following the Message Header  in a Vendor Defined Message . The VDM \nHeader  contains the SVID  relating to the VDM  being sent and provides information relating to \nthe Command  in the case of a Structured VDM  (see Section 6.4.4, \"Vendor Defined Message\") .\nVDO See Vendor Data Object .\nVendor Data Object Data Object  used to send Vendor specific information as part of a Message .\nVendor Defined Extended \nMessagePD Extended Message  defined for vendor/standards usage. A VDEM  does not define any \nstructure and Message s can be created in any manner that the vendor chooses.\nVendor Defined Message PD  Data Message  defined for vendor/standards usage. These are further partitioned into \nStructured Vendor Defined Message s, where Command s are defined in this specification, and \nUnstructured Vendor Defined Message s which are entirely vendor defined (see Section 6.4.4, \n\"Vendor Defined Message\") .\nVendor ID 16-bit unsigned value assigned by the USB-IF to a given Vendor.\nVersion A minor release of the USB Power Delivery specification associated with a particular Revision.\nVersion  numbers are also defined in VDM s.\nVI Same as power (i.e., voltage * current = power)\nVID See Vendor ID .\nVPD See VCONN  Powered USB Device .Table 1.4  Terms and Abbreviations (Continued)\nTerm Description"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "2.1", "title": "Introduction", "page": 53, "level": 2, "parent_id": "2", "full_path": "2.1 Introduction", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 532  Overview\nThis section contains no Normative  requirements. \n2.1   Introduction\nUSB Power Delivery ( PD) defines the mechanisms for pairs of directly Attached  Port s (also referred to as Port \nPartner s or Port Pair s) to Negotiate  voltage, current and/or direction of power flow over the USB cable. It uses the \nUSB Type-C® connector's CC  wire as the communications channel. The PD mechanisms operate independently of \nand supersede other USB methods defined in [USB 2.0] , [USB 3.2] , [USBBC 1.2]  and [USB Type-C 2.4] .\nUSB Power Delivery also defines sideband mechanisms used for configuration management of USB Type-C  devices \nand cables. Using Structured Vendor Defined Message s (Structured VDM s), PD facilitates discovery of device and \ncables features and performance. Structured VDM s are also used to enter/exit some Active Mode s, either USB-based \n(e.g., USB4® Mode ) or USB Type-C  Alternate Mode s. Alternate Mode s are associated with Standard or Vendor ID s \n(SVID s) and can be either standard (e.g., DisplayPort Alternate Mode ) or proprietary (e.g., Intel Thunderbolt™ 3).\n2.1.1   Power Delivery Source Operational Contracts\nA PD Source  will be in one of three Contract s:\n Default Contract  which it enters immediately following a Connect  where the Source  provides 5V and \nAdvertises the amount of current it can deliver using the Rp value as defined in [USB Type-C 2.4] . A \nSource  in a Default Contract  will remain in this Contract  until the Sink  is Detached  or the Source  and Sink  \nNegotiate  and enter an Explicit Contract .\n Implicit Contract  which immediately follows a Power Role Swap  or Fast Role Swap  and is transitory. The \nPD Source  provides 5V and Advertises the amount of current it can deliver using the Rp value as defined \nin [USB Type-C 2.4] . A Source  in an Implicit Contract  will immediately Negotiate  with the Sink  and enter \nan Explicit Contract .\n Explicit Contract  is the state of the Source  after any PD power Negotiation  consisting of the Source  \nsending a Source_Capabilities  Message , the Sink  responding with a Request  Message , the Source  \nacknowledging the request with an Accept  Message  and finally the Source  sends a PS_RDY  Message  \nwhen the Source  is ready to deliver the requested power. This is the normal operational state for PD. A \nSource  in an Explicit Contract  will remain in an Explicit Contract  during and after a Re-negotiation  of its \nContract  and will exit the Explicit Contract  when:\n Disconnected from the Sink  where it will restart in a Default Contract  when reconnected to the Sink .\n Following a Hard Reset  where it will restart as if it were Detached  then Attached  to the Sink .\n Following a Power Role Swap  or Fast Role Swap  where it will enter an Implicit Contract .\n Following USB Type-C  Error Recovery  which is an electrical Detach /Re-attach  (remove and assert \nRp).\n2.1.2   Power Delivery Contract Negotiation\nContract s Negotiate d using the USB Power Delivery Specification supersede any and all previous power contracts \nestablished whether from standard [USB 2.0] , [USB 3.2] , [USBBC 1.2]  or [USB Type-C 2.4]  mechanisms. While \noperating in Power Delivery Mode  there will be a Contract  in place (either Explicit Contract  or Implicit Contract ) that \ndetermines the power level available and the direction of that power. The Port Pair will remain in Power Delivery \nMode  until the Port Pair is Detached , there is a Hard Reset , or USB Type-C  Error Recovery , or the Source  removes \npower except as part of the Power Role Swap  or Fast Role Swap  processes.\nNote: [USB4]  does not define a default power, rather relies on a PD power Contract . When first Attached  the \n[USB4]  device operates in [USB 3.2]  Mode  which is its USB Default Operation .\nAn Explicit Contract  is Negotiate d by the process of the Source  sending a set of Capabilities , from which the Sink  is \nrequired to request a particular capability and then the Source  accepting this request."}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "2.1.3", "title": "Other Uses for Power Delivery", "page": 54, "level": 3, "parent_id": "2.1", "full_path": "2.1.3 Other Uses for Power Delivery", "tags": [], "content": "Page 54 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10An Implicit Contract  is the specified level of power allowed in particular states (i.e., during and after a Power Role \nSwap  or Fast Role Swap ). Implicit Contract s are temporary; Port Pair s are required to immediately Negotiate  an \nExplicit Contract .\nEach Provider  has a Local Policy , governing power allocation to its Port s. Consumer s also have their own Local Policy  \ngoverning how they draw power. A System Policy  can be enacted over USB that allows modification to this Local \nPolicy  and hence management of overall power allocation in the system.\nWhen PD Capable  devices are Attached  to each other, the DFP s and UFP s initially default to standard USB Default \nOperation . The DFP  supplies vSafe5V  and the UFP  draws current in accordance with the rules defined by [USB 2.0] , \n[USB 3.2] , [USB Type-C 2.4]  or [USBBC 1.2]  specifications. After Power Delivery Negotiation  has taken place, \npower can be supplied at higher, or lower, voltages and higher currents than defined in these specifications. It is \nalso possible to:\n Do a Power Role Swap or Fast Role Swap  to exchange the Power Role s such that the DFP  receives power \nand the UFP  supplies power. \n Do a Data Role Swap  such that the DFP  becomes the UFP  and vice-versa.\n Do a VCONN  Swap  to change the Port  supplying V CONN  to the cable.\n Enter into EPR Mode .\n Enter into USB4® Mode .\n Enter into Alternate Mode s.\n Send Vendor Defined Message s.\nPrior to the First Explicit Contract  only the Source Port , which is also the VCONN  Source , can communicate with the \nAttached  cable assembly. This is important where 5A and EPR  capability are marked as well as other details of the \ncable assembly such as the supported speed. \nCable Discovery , determining whether the cable can communicate, can occur on initial Attachment  of a Port Pair \nbefore an Explicit Contract  has been established. It is also possible to carry out Cable Discovery  after a Power Role \nSwap  or Fast Role Swap  prior to re-establishing an Explicit Contract , where the UFP  is the Source , and an Implicit \nContract  is in place. Cable Discovery  can be carried out after an Explicit Contract  has been established, if the cable \nhas not yet been discovered.\n2.1.3   Other Uses for Power Delivery\nOnce an Explicit Contract  is in place, PD can be used to manage the Port s and cables for non-power related \nfunctionality. \nPD is used to enter the USB4® Mode  of operation. Port s and cables can support functionality beyond power. For \nexample, a cable can have active components that require VCONN  power or a Port /cable can support a video display \nAlternate Mode  such as DisplayPort. PD defines an infrastructure to discover these additional Capabilities  and \nMode s that include:\n Discovering a Port  or Cable Plug 's Capabilities .\n Discovery of the SVID s a Port  or Cable Plug  supports.\n Discovery of the Mode s a Port  or Cable Plug  supports.\n Entry into a Mode  supported by the Port  and/or Cable Plug .\n Exiting Mode s supported by the Port  and/or Cable Plug .\n2.2   Compatibility with Revision 2.0\nRevision 3.x  of the USB Power Delivery specification is designed to be fully inter-operable with [USBPD 2.0]  \nsystems using BMC  Signaling  over the [USB Type-C 2.4]  connector and to be compatible with Revision 2.0  \nhardware. \n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 55This specification mandates that all Revision 3.x  systems fully support Revision 2.0  operation. They must discover \nthe supported Revision  used by their Port Partner  and any connected Cable Plug s and revert to operation using the \nlowest common Revision  number (see Section 6.2.1.1.5, \"Specification Revision\" ). \nThis specification defines Extended Message s containing data of up to 260 bytes (see Section 6.2.1.2, \"Extended \nMessage Header\" ). These Message s can be larger than expected by existing PHY HW. To accommodate Revision 2.0  \nbased systems a Chunking  mechanism is mandated such that Message s are limited to Revision 2.0  sizes unless it is \ndiscovered that both systems support the longer Message  lengths.\nThis specification includes changes to the Vendor Data Object s (VDO ) used in the discovery of passive/active \nmarked cables and Alternate Mode Adapter s (AMA ) (see Section 6.4.4.2, \"Structured VDM\" ). To enable systems to \ndetermine which VDO  format is being used the Structured Vendor Defined Message  (SVDM ) Version  number has \nbeen incremented to 2.x. Version  numbers have also been incorporated into the VDO s themselves to facilitate \nfuture changes if these become necessary.\n2.3   USB Power Delivery Capable Devices\nSome examples of USB Power Delivery capable devices can be seen in Figure 2.1, \"Logical Structure of USB Power \nDelivery Capable Devices\"  (a USB Host , a USB Device , a Hub , and a Charger ). These are given for reference only and \nare not intended to limit the possible configurations of products that can be built using this specification.\nFigure 2.1 Logical Structure of USB Power Delivery Capable Devices\nEach USB Power Delivery capable device is assumed to be made up of at least one Port . Provider s are assumed to \nhave a Source  and Consumer s a Sink . Each device contains one, or more, of the following components:\n UFP s that:\n Sink Power.\n Communicate using SOP Packets.\n Optionally  Communicate using SOP’ Packet s/SOP’’ Packet s.\n Optionally  source power (a Dual-Role Power Device ).\n Optionally  communicate via USB.\n Optionally  support Alternate Mode s.\n DFP s that:USB Host  \nUFPUSB Device\nPower \nStorageExternal \npowerUSB Hub\nDFPPower \nStorageExternal \npowerUSB Charger\nUFP\nPower \nStorageExternal \npowerExternal \npower\nPower \nStorage\nDFP DFP\nOptional\nPower inputOptional\nFeatureMultiple Power \ninputs/outputsMultiple Power \noutputs\nPower inputLegend\n\nPage 56 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Source Power\n Communicate using SOP Packets.\n Optionally  Communicate using SOP* Packet s.\n Optionally  Sink power (a Dual-Role Power Device ).\n Optionally  communicate via USB.\n Optionally  support Alternate Mode s.\n A Source  that can be:\n An externally powered source (e.g., AC powered).\n Power Storage (e.g., Battery /Power Bank).\n Derived from another Port  (e.g., bus-powered Hub ).\n A Sink  that can be:\n Power Storage (e.g., a Battery /Power Bank).\n Used to power internal functions.\n Used to power devices Attached  to other devices (e.g., a bus-powered Hub ).\n A VCONN  Source  that:\n Can be either Port Partner , either the DFP /UFP  or Source /Sink .\n Powers the Cable Plug (s).\n Powers VPD s (VCONN  Powered USB Device s).\n Is the only Port  allowed to talk to the Cable Plug (s) at any given time."}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "2.4.1", "title": "Introduction", "page": 57, "level": 3, "parent_id": "2.4", "full_path": "2.4.1 Introduction", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 572.4   SOP* Communication\n2.4.1   Introduction\nThe Start of Packet (or SOP ) is used as an addressing scheme to identify whether the communications were \nintended for one of the Port Partner s (SOP Communication ) or one of the Cable Plug s (SOP’ Communication /SOP’’ \nCommunication ). SOP /SOP’  and SOP’’  are collectively referred to as SOP* . All SOP* Communication s take place over \na single wire ( CC). The term Cable Plug  in the SOP’ Communication /SOP’’ Communication  case is used to represent \na logical entity in the cable which is capable of PD Communication, and which might or might not be physically \nlocated in the plug.\nNote: There are there are other SOP s defined for special operation such as debug which are not discussed here.\nThe following sections describe how this addressing scheme operates for Port -to-Port  and Port  to Cable Plug  \ncommunication.\n2.4.2   SOP* Collision Avoidance\nFor all SOP*  the Source  co-ordinates communication to avoid bus collisions by allowing the Sink  to initiate \nmessaging when it does not need to communicate itself. Once an Explicit Contract  is in place, the Source  \nmanipulates its Rp value (3A) to indicate to the Sink  that it can initiate an Atomic Message Sequence  (AMS ). This AMS  \ncan be communication with the Source  or with one of the Cable Plug s. As soon as the Source  itself needs to initiate \nan AMS , it will manipulate its Rp value (1.5A) to indicate this to the Sink . The Source  then waits for any outstanding \nSink  SOP* Communication  to complete before initiating an AMS  itself. In all cases, the Port  initiating an AMS  waits \nfor CC to be Idle before putting the Message  on CC.\n2.4.3   SOP Communication\nSOP Communication  is used for Port -to-Port  communication between the Source  and the Sink . SOP Communication  \nis recognized by both Port Partner s but not by any intervening Cable Plug s. SOP Communication  takes priority over \nother SOP* Communication s since it is critical to complete power related operations as soon as possible.\n2.4.4   SOP'/SOP'' Communication with Cable Plugs\nSOP’ Communication  is recognized by electronics in one Cable Plug  (see [USB Type-C 2.4] ). SOP’’ Communication  \ncan also be supported when SOP’ Communication  is also supported. SOP’  and SOP’’  assignment in the cable \nassembly is fixed and does not change dynamically.\nSOP Communication  between the Port Partner s is not recognized by the Cable Plug . Figure 2.2, \"Example SOP' \nCommunication between V CONN  Source and Cable Plug(s)\"  outlines the usage of SOP* Communication s between a \nVCONN  Source  (DFP /UFP ) and the Cable Plug s.\nSince all SOP* Communication s take place over a single wire ( CC), the SOP* Communication  periods must be \ncoordinated to prevent important communication from being blocked. For a product which does not recognize \nSOP /SOP’  or SOP’’  Packet s, this will look like a non- Idle channel, leading to missed Packet s and retries. \nCommunications between the Port Partner s take precedence meaning that communications with the Cable Plug  \ncan be interrupted but will not lead to a Soft Reset  or Hard Reset .\nWhen a Default Contract  or Implicit Contract  is in place (e.g., at startup, after a Power Role Swap or Fast Role Swap ) \nonly the Source Port  that is supplying VCONN  is allowed to send Packet s to a Cable Plug  (SOP’ ) and is allowed to \nrespond to Packet s from the Cable Plug  (SOP’ ) with a GoodCRC  Message  in order to discover the Cable Plug 's \ncharacteristics (see Figure 2.2, \"Example SOP' Communication between V CONN  Source and Cable Plug(s)\" ). During \nthis phase, all communication with the Cable Plug  is initiated and controlled by the VCONN  Source  which acts to \nprevent conflicts between SOP Packet s and SOP’ Packet s. The Sink  does not communicate with the Cable Plug  and \nDiscards  any SOP’ Packet s received.\nWhen an Explicit Contract  is in place, only the VCONN  Source  (either the DFP  or the UFP ) can communicate with the \nCable Plug (s) using SOP’ Packet s/SOP’’ Packet s (see Figure 2.2, \"Example SOP' Communication between V CONN  \nSource and Cable Plug(s)\" ). During this phase, all communication with the Cable Plug  is initiated and controlled by \nthe VCONN  Source  which acts to prevent conflicts between SOP* Packet s. The Port that is not the VCONN  Source  is not"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "2.4.2", "title": "SOP* Collision Avoidance", "page": 57, "level": 3, "parent_id": "2.4", "full_path": "2.4.2 SOP* Collision Avoidance", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 572.4   SOP* Communication\n2.4.1   Introduction\nThe Start of Packet (or SOP ) is used as an addressing scheme to identify whether the communications were \nintended for one of the Port Partner s (SOP Communication ) or one of the Cable Plug s (SOP’ Communication /SOP’’ \nCommunication ). SOP /SOP’  and SOP’’  are collectively referred to as SOP* . All SOP* Communication s take place over \na single wire ( CC). The term Cable Plug  in the SOP’ Communication /SOP’’ Communication  case is used to represent \na logical entity in the cable which is capable of PD Communication, and which might or might not be physically \nlocated in the plug.\nNote: There are there are other SOP s defined for special operation such as debug which are not discussed here.\nThe following sections describe how this addressing scheme operates for Port -to-Port  and Port  to Cable Plug  \ncommunication.\n2.4.2   SOP* Collision Avoidance\nFor all SOP*  the Source  co-ordinates communication to avoid bus collisions by allowing the Sink  to initiate \nmessaging when it does not need to communicate itself. Once an Explicit Contract  is in place, the Source  \nmanipulates its Rp value (3A) to indicate to the Sink  that it can initiate an Atomic Message Sequence  (AMS ). This AMS  \ncan be communication with the Source  or with one of the Cable Plug s. As soon as the Source  itself needs to initiate \nan AMS , it will manipulate its Rp value (1.5A) to indicate this to the Sink . The Source  then waits for any outstanding \nSink  SOP* Communication  to complete before initiating an AMS  itself. In all cases, the Port  initiating an AMS  waits \nfor CC to be Idle before putting the Message  on CC.\n2.4.3   SOP Communication\nSOP Communication  is used for Port -to-Port  communication between the Source  and the Sink . SOP Communication  \nis recognized by both Port Partner s but not by any intervening Cable Plug s. SOP Communication  takes priority over \nother SOP* Communication s since it is critical to complete power related operations as soon as possible.\n2.4.4   SOP'/SOP'' Communication with Cable Plugs\nSOP’ Communication  is recognized by electronics in one Cable Plug  (see [USB Type-C 2.4] ). SOP’’ Communication  \ncan also be supported when SOP’ Communication  is also supported. SOP’  and SOP’’  assignment in the cable \nassembly is fixed and does not change dynamically.\nSOP Communication  between the Port Partner s is not recognized by the Cable Plug . Figure 2.2, \"Example SOP' \nCommunication between V CONN  Source and Cable Plug(s)\"  outlines the usage of SOP* Communication s between a \nVCONN  Source  (DFP /UFP ) and the Cable Plug s.\nSince all SOP* Communication s take place over a single wire ( CC), the SOP* Communication  periods must be \ncoordinated to prevent important communication from being blocked. For a product which does not recognize \nSOP /SOP’  or SOP’’  Packet s, this will look like a non- Idle channel, leading to missed Packet s and retries. \nCommunications between the Port Partner s take precedence meaning that communications with the Cable Plug  \ncan be interrupted but will not lead to a Soft Reset  or Hard Reset .\nWhen a Default Contract  or Implicit Contract  is in place (e.g., at startup, after a Power Role Swap or Fast Role Swap ) \nonly the Source Port  that is supplying VCONN  is allowed to send Packet s to a Cable Plug  (SOP’ ) and is allowed to \nrespond to Packet s from the Cable Plug  (SOP’ ) with a GoodCRC  Message  in order to discover the Cable Plug 's \ncharacteristics (see Figure 2.2, \"Example SOP' Communication between V CONN  Source and Cable Plug(s)\" ). During \nthis phase, all communication with the Cable Plug  is initiated and controlled by the VCONN  Source  which acts to \nprevent conflicts between SOP Packet s and SOP’ Packet s. The Sink  does not communicate with the Cable Plug  and \nDiscards  any SOP’ Packet s received.\nWhen an Explicit Contract  is in place, only the VCONN  Source  (either the DFP  or the UFP ) can communicate with the \nCable Plug (s) using SOP’ Packet s/SOP’’ Packet s (see Figure 2.2, \"Example SOP' Communication between V CONN  \nSource and Cable Plug(s)\" ). During this phase, all communication with the Cable Plug  is initiated and controlled by \nthe VCONN  Source  which acts to prevent conflicts between SOP* Packet s. The Port that is not the VCONN  Source  is not"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "2.4.3", "title": "SOP Communication", "page": 57, "level": 3, "parent_id": "2.4", "full_path": "2.4.3 SOP Communication", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 572.4   SOP* Communication\n2.4.1   Introduction\nThe Start of Packet (or SOP ) is used as an addressing scheme to identify whether the communications were \nintended for one of the Port Partner s (SOP Communication ) or one of the Cable Plug s (SOP’ Communication /SOP’’ \nCommunication ). SOP /SOP’  and SOP’’  are collectively referred to as SOP* . All SOP* Communication s take place over \na single wire ( CC). The term Cable Plug  in the SOP’ Communication /SOP’’ Communication  case is used to represent \na logical entity in the cable which is capable of PD Communication, and which might or might not be physically \nlocated in the plug.\nNote: There are there are other SOP s defined for special operation such as debug which are not discussed here.\nThe following sections describe how this addressing scheme operates for Port -to-Port  and Port  to Cable Plug  \ncommunication.\n2.4.2   SOP* Collision Avoidance\nFor all SOP*  the Source  co-ordinates communication to avoid bus collisions by allowing the Sink  to initiate \nmessaging when it does not need to communicate itself. Once an Explicit Contract  is in place, the Source  \nmanipulates its Rp value (3A) to indicate to the Sink  that it can initiate an Atomic Message Sequence  (AMS ). This AMS  \ncan be communication with the Source  or with one of the Cable Plug s. As soon as the Source  itself needs to initiate \nan AMS , it will manipulate its Rp value (1.5A) to indicate this to the Sink . The Source  then waits for any outstanding \nSink  SOP* Communication  to complete before initiating an AMS  itself. In all cases, the Port  initiating an AMS  waits \nfor CC to be Idle before putting the Message  on CC.\n2.4.3   SOP Communication\nSOP Communication  is used for Port -to-Port  communication between the Source  and the Sink . SOP Communication  \nis recognized by both Port Partner s but not by any intervening Cable Plug s. SOP Communication  takes priority over \nother SOP* Communication s since it is critical to complete power related operations as soon as possible.\n2.4.4   SOP'/SOP'' Communication with Cable Plugs\nSOP’ Communication  is recognized by electronics in one Cable Plug  (see [USB Type-C 2.4] ). SOP’’ Communication  \ncan also be supported when SOP’ Communication  is also supported. SOP’  and SOP’’  assignment in the cable \nassembly is fixed and does not change dynamically.\nSOP Communication  between the Port Partner s is not recognized by the Cable Plug . Figure 2.2, \"Example SOP' \nCommunication between V CONN  Source and Cable Plug(s)\"  outlines the usage of SOP* Communication s between a \nVCONN  Source  (DFP /UFP ) and the Cable Plug s.\nSince all SOP* Communication s take place over a single wire ( CC), the SOP* Communication  periods must be \ncoordinated to prevent important communication from being blocked. For a product which does not recognize \nSOP /SOP’  or SOP’’  Packet s, this will look like a non- Idle channel, leading to missed Packet s and retries. \nCommunications between the Port Partner s take precedence meaning that communications with the Cable Plug  \ncan be interrupted but will not lead to a Soft Reset  or Hard Reset .\nWhen a Default Contract  or Implicit Contract  is in place (e.g., at startup, after a Power Role Swap or Fast Role Swap ) \nonly the Source Port  that is supplying VCONN  is allowed to send Packet s to a Cable Plug  (SOP’ ) and is allowed to \nrespond to Packet s from the Cable Plug  (SOP’ ) with a GoodCRC  Message  in order to discover the Cable Plug 's \ncharacteristics (see Figure 2.2, \"Example SOP' Communication between V CONN  Source and Cable Plug(s)\" ). During \nthis phase, all communication with the Cable Plug  is initiated and controlled by the VCONN  Source  which acts to \nprevent conflicts between SOP Packet s and SOP’ Packet s. The Sink  does not communicate with the Cable Plug  and \nDiscards  any SOP’ Packet s received.\nWhen an Explicit Contract  is in place, only the VCONN  Source  (either the DFP  or the UFP ) can communicate with the \nCable Plug (s) using SOP’ Packet s/SOP’’ Packet s (see Figure 2.2, \"Example SOP' Communication between V CONN  \nSource and Cable Plug(s)\" ). During this phase, all communication with the Cable Plug  is initiated and controlled by \nthe VCONN  Source  which acts to prevent conflicts between SOP* Packet s. The Port that is not the VCONN  Source  is not \n\nPage 58 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10allowed to communicate with the Cable Plug  and does not recognize any SOP’ Packet s/SOP’’ Packet s received. Only \nthe DFP , when acting as a VCONN  Source , is allowed to send SOP* Packet s to control the entry and exiting of Mode s \nand to manage Modal Operation .\nFigure 2.2 Example SOP' Communication between V CONN  Source and Cable Plug(s)\nVCONN  Source \n(DFP/UFP)\nSOP signalingSOP’\nsignaling\nSOP’’\nsignalingCable \nPlug1 \n(SOP’’)Electronically Marked \nCableCable \nPlug1 \n(SOP’)VCONN"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "2.5.1", "title": "Source Operation", "page": 59, "level": 3, "parent_id": "2.5", "full_path": "2.5.1 Source Operation", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 592.5   Operational Overview\nA USB Power Delivery Port  supplying power is known as a Source  and a Port  consuming power is known as a Sink . \nThere is only one Source Port  and one Sink Port  in each PD Connection  between the Port Partner s. At Attach  the \nSource Port  (the Port  with Rp asserted see [USB Type-C 2.4] ) is also the DFP  and VCONN  Source . At Attach  the Sink \nPort  (the Port  with Rd asserted) is also the UFP  and is not the VCONN  Source .\nThe original USB PD specification allowed Source s to deliver up to 100W. This classic Mode  of operation is referred \nto as the Standard Power Range  (SPR). The First Explicit Contract , the first Contract  after a Default Contract  or \nImplicit Contract , is always an SPR Contract . There is an Optional  higher power Mode  referred to as the Extended \nPower Range  (EPR ) where the Source  is allowed to deliver up to 240W. The EPR Mode  can only be entered from the \nSPR Mode . The entry process is designed to prevent accidental entry into this higher power Mode . It can be entered \nonly when an SPR Explicit Contract  is in place and both the Source Port  and Sink Port  as well as the cable support \nEPR .\nThe Source /Sink  Power Role s, DFP /UFP  Data Role s and VCONN  Source  role can all subsequently be swapped \northogonally to each other. A Port  that supports both Source  and Sink  Power Role s is called a Dual-Role Power Port  \n(DRP ). A Port  that supports both DFP  and UFP  Data Role s is called a Dual-Role Data Port  (DRD ).\nWhen USB Communications capability is supported in the DFP  Data Role  then the Port  will also be able to act as a \nUSB Host . Similarly, when USB Communication s capability is supported in the UFP  Data Role  then the Port  will also \nbe able to act as a USB Device .\nThe following sections describe the high-level operation of ports taking on the roles of DFP , UFP , Source  and Sink .\nFor details of how PD maps to USB states in a PDUSB Device  see Section 9.1.2, \"Mapping to USB Device States\" .\n2.5.1   Source Operation\nThe Source  operates differently depending on its Attachment  status:\n At Attach  (no PD Connection  or Contract ):\n For a Source -only Port  the Source  detects Sink  Attachment .\n For a DRP  that toggles between Source  and Sink  operation, the Port  becomes a Source Port  on \nAttachment  of a Sink\n The Source  then supplies vSafe5V .\n Before PD Connection  (no PD Connection  or Contract ):\n Prior to sending Source_Capabilities  Message s the Source  can detect the Cable Capabilities  and \nAdvertises its Capabilities  depending on the Cable Capabilities  detected:\n The default current carrying capability of a USB Type-C  cable is 3A.\n The Source  can attempt to communicate with one of the Cable Plug s using SOP’ Packet s. If the \nCable Plug  responds, then communication takes place to discover the cable's Capabilities  (e.g., 5A \ncapable).\n The Source  periodically Advertises its Capabilities  by sending Source_Capabilities  Message s every \ntTypeCSendSourceCap .\n Establishing PD Connection  (no PD Connection  or Contract ):\n Presence of a PD Capable  Port Partner  is detected either:\n By receiving a GoodCRC  Message  in response to a Source_Capabilities  Message .\n By receiving Hard Reset  Signaling .\n Establishing the First Explicit Contract  after an Attach , Hard Reset , USB Type-C  Error Recovery  or Implicit \nContract  as a result of a Power Role Swap  or Fast Role Swap :\n\nPage 60 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 The Source  receives a Request  Message  from the Sink  and, if this is a Valid  request, responds with \nan Accept  Message  followed by a PS_RDY  Message  when its power supply is ready to source power \nat the agreed level. At this point an Explicit Contract  has been agreed.\n A DFP  that does not generate SOP’ Packet s or SOP’’ Packet s, is not required to detect SOP’ Packet s or \nSOP’’ Packet s and Discards  them.\n When in an Explicit Contract  (PE_SRC_Ready  State):\n The Source  processes and responds (if a response is required) to all Message s received and sends \nappropriate Message s whenever its Local Policy  requires:\n The Source  informs the Sink  whenever its Capabilities  change, by sending a Source_Capabilities  \nMessage .\n The Source  responds to a Sink  Request  Message  with the Capabilities  mismatch bit set, by \nsending a Source_Capabilities  Message  with its maximum available power.\n The Source  will always have an Rp value asserted on its CC wire used for Collision Avoidance .\n When this Port  is a DRP  the Source  can initiate or receive a request for the exchange of Power \nRole s. After the Power Role Swap  this Port  will be a Sink  and in an Implicit Contract  until an \nExplicit Contract  is Negotiate d immediately afterwards.\n When this Port  is a DRD  the Source  can initiate or receive a request for an exchange of Data Role s. \nAfter a Data Role Swap  the DFP  (USB Host ) becomes a UFP  (USB Device ). The Port  remains a \nSource  and the VCONN  Source  role remains unchanged.\n The Source  can initiate or receive a request for an exchange of VCONN  Source  role. During a VCONN  \nSwap  VCONN  is applied by both Port s (make before break). The Port  remains a Source  and DFP /\nUFP  Data Role s remain unchanged.\n The Source  when it is the VCONN  Source  can communicate with a Cable Plug  using SOP’ \nCommunication  or SOP’’ Communication  at any time it is not engaged in any other SOP \nCommunication :\n If SOP Packets are received by the Source , during SOP’ Communication  or SOP’’ Communication , \nthe SOP’ Communication  or SOP’’ Communication  is immediately terminated (the Cable Plug  \ntimes out and does not retry).\n If the Source  needs to initiate an SOP Communication  during an ongoing SOP’ Communication  or \nSOP’’ Communication  (e.g., for a Capabilities  change) then the SOP’ Communication  or SOP’’ \nCommunication s will be interrupted. \n When the Source Port  is also a DFP :\n The Source  can control the entry and exiting of Mode s in the Cable Plug (s) and control Modal \nOperation .\n The Source  can initiate Unstructured VDM s or Structured VDM s.\n The Source  can control the entry and exiting of Mode s in the Sink  and control Modal Operation  \nusing Structured VDM s.\n Detach  or communications failure:\n A Source  detects plug Detach  and takes VBUS down to vSafe5V  within tSafe5V  and vSafe0V  within \ntSafe0V  (i.e. using USB Type-C  Detach  detection via CC).\n When the Source  detects the failure to receive a GoodCRC  Message  in response to a Message  within \ntReceive :\n Leads to a Soft Reset , within tSoftReset  of the CRCReceiveTimer  expiring.\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 61 If the Soft Reset  process cannot be completed a Hard Reset  will be issued within tHardReset  of \nthe CRCReceiveTimer  to restore VBUS to USB Default Operation  within ~1-1.5s:\n When the Source  is also the V CONN  Source , VCONN  will also be power cycled during the Hard \nReset .\n When the Source  operating in SPR PPS Mode  fails to receive periodic communication (e.g., a Request  \nMessage ) from the Sink  within tPPSTimeout:\n Source  issues a Hard Reset  and takes VBUS to vSafe5V .\n When the Source  operating in the EPR Mode  fails to receive periodic communication (i.e., an \nEPR_KeepAlive  Message  or any other Message ) from the Sink  within tSourceEPRKeepAlive :\n Source  issues a Hard Reset  and takes VBUS to vSafe5V .\n Receiving no response to further attempts at communication is interpreted by the Source  as an error \n(see Error handling).\n Errors during power transitions will automatically lead to a Hard Reset  to restore power to default \nlevels.\n Error handling:\n Protocol Error s are handled by a Soft_Reset  Message  issued by either Port Partner , that resets \ncounters, timers and states, but does not change the Negotiate d voltage and current or the Port 's \nrole (e.g., Source , DFP /UFP , VCONN  Source ) and does not cause an exit from Modal Operation .\n Serious errors are handled by Hard Reset  Signaling  issued by either Port Partner . A Hard Reset : \n Resets protocol as for a Soft Reset  but also returns the power supply to USB Default Operation  \n(vSafe0V  or vSafe5V  output) in order to protect the Sink .\n Restores the Port 's Data Role  to DFP .\n Restores the Port 's power to its USB default state.\n When the Sink  is the VCONN  Source  it removes VCONN  then the Source Port  is restored as the VCONN  \nSource .\n Causes all Active Mode s to be exited such that the Source  is no longer in Modal Operation .\n After a Hard Reset  it is expected that the Port Partner  will respond within tNoResponse . If this does \nnot occur then nHardResetCount  further Hard Reset s are carried out before the Source  performs \nadditional Error Recovery  steps, as defined in [USB Type-C 2.4] , by entering the ErrorRecovery  \nstate.\n\nPage 62 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-102.5.2   Sink Operation\n At Attach  (no PD Connection  or Contract ):\n Sink  detects Source  Attachment  through the presence of vSafe5V .\n For a DRP  that toggles between Source  and Sink  operation, the Port  becomes a Sink Port  on \nAttachment  of a Source .\n Once the Sink  detects the presence of vSafe5V  on VBUS it waits for a Source_Capabilities  Message  \nindicating the presence of a PD Capable  Source .\n If the Sink  does not receive a Source_Capabilities  Message  within tTypeCSinkWaitCap  then it can \nissue Hard Reset  Signaling  in order to cause the Source Port  to send a Source_Capabilities  Message  \nif the Source Port  is PD Capable .\n The Sink  does not generate SOP’ Packet s or SOP’’ Packet s, is not required to detect SOP’ Packet s or \nSOP’’ Packet s and Discards  them.\n Establishing PD Connection  (no PD Connection  or Contract ):\n The Sink  receives a Source_Capabilities  Message  and responds with a GoodCRC  Message .\n The Sink  does not generate SOP’ Packet s or SOP’’ Packet s, is not required to detect SOP’ Packet s or \nSOP’’ Packet s and Discards  them.\n Establishing the First Explicit Contract  after an Attach , Hard Reset  or Implicit Contract  as a result of a \nPower Role Swap  or Fast Role Swap :\n The Sink  receives a Source_Capabilities  Message  from the Source  and responds with a Request  \nMessage . If this is a Valid  request the Sink  receives an Accept  Message  followed by a PS_RDY  Message  \nwhen the Source 's power supply is ready to source power at the agreed level. At this point the Source  \nand Sink  have entered into an Explicit Contract :\n The Sink Port  can request one of the Capabilities  offered by the Source , even if this is the vSafe5V  \noutput offered by [USB 2.0] , [USB 3.2] , [USB Type-C 2.4]  or [USBBC 1.2] , in order to enable \nfuture power Negotiation :\n A Sink  not requesting any Valid  capability with a Request  Message  results in an error.\n A Sink  unable to fully operate at the offered Capabilities  requests the default capability but in -\ndicates that it would prefer another power level by setting the Capability Mismatch  bit in the \nRequest  Message  and also providing a physical indication of the failure to the end user (e.g., \nusing an LED).\n The Sink  does not generate SOP’ Packet s or SOP’’ Packet s, is not required to detect SOP’ Packet s or \nSOP’’ Packet s and Discards  them.\n During PD Connection  (Explicit Contract  - PE_SNK_Ready  state):\n The Sink  processes and responds (if a response is required) to all Message s received and sends \nappropriate Message s whenever its Local Policy  requires.\n A Sink  whose power needs have changed indicates this to the Source  with a new Request  Message . \nThe Sink Port  can request one of the Capabilities  previously offered by the Source , even if this is the \nvSafe5V  output offered by [USB 2.0] , [USB 3.2] , [USB Type-C 2.4] or [USBBC 1.2] , in order to enable \nfuture power Negotiation :\n Not requesting any capability with a Request  Message  results in an error.\n A Sink  unable to fully operate at the offered Capabilities  requests an offered capability but \nindicates a Capabilities Mismatch  i.e., that it would prefer another power level also providing a \nphysical indication of the failure to the end user (e.g., using an LED).\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 63 A Sink  operating in the SPR PPS Mode  periodically sends Request  Message  within tPPSRequest  even \nif its request is unchanged.\n A Sink  operating in the EPR Mode  periodically communicates with the Source  (i.e., sends an \nEPR_KeepAlive  Message  or any other Message ) within tSourceEPRKeepAlive .\n The Sink  will always have Rd asserted on its CC wire.\n When this Port  is a DRP , the Sink  can initiate or receive a request for the exchange of Power Role s. \nAfter the Power Role Swap  this Port  will be a Source  and an Implicit Contract  will be in place until an \nExplicit Contract  is Negotiated  immediately afterwards.\n When this Port  is a DRD  the Sink  can initiate or receive a request for an exchange of Data Role s. After \na Data Role Swap  the UFP  (USB Device ) becomes a DFP  (USB Host ). The Port  remains a Sink  and \nVCONN  Source  role (or not) remains unchanged.\n The Sink  can initiate or receive a request for an exchange of VCONN  Source . During a VCONN  Swap  \nVCONN  is applied by both ends (make before break). The Port  remains a Sink  and DFP /UFP  Data Role s \nremain unchanged.\n The Sink  when it is the VCONN  Source  can communicate with a Cable Plug  using SOP’ Communication  \nor SOP’’ Communication  at any time it is not engaged in any other SOP Communication :\n If SOP Packet s are received by the Sink , during SOP’ Communication or SOP’’ Communication , the \nSOP’ Communication  or SOP’’ Communication  is immediately terminated (the Cable Plug  times \nout and does not retry)\n If the Sink  needs to initiate an SOP Communication  during an ongoing SOP’ Communication  or \nSOP’’ Communication  (e.g., for a Capabilities  change) then the SOP’ Communication  or SOP’’ \nCommunication s will be interrupted. \n When the Sink Port  is also a DFP :\n The Sink  can initiate Unstructured VDM s or Structured VDM s.\n The Sink  can control the Mode Entry  and Mode Exit  of Mode s in the Source  and control Modal \nOperation  (e.g. [USB4] ).\n Detach  or Communications Failure:\n A Sink  detects the removal of VBUS and interprets this as the end of the PD Connection :\n This is unless the vSafe0V  is due to either a Hard Reset , Power Role Swap  or Fast Role Swap .\n A Sink  detects plug removal (i.e., absence of Rp or VBUS) and discharges VBUS.\n When the Sink  detects the failure to receive a GoodCRC  Message  in response to a Message  within \ntReceive :\n Leads to a Soft Reset , within tSoftReset  of the CRCReceiveTimer  expiring.\n If the Soft Reset  process cannot be completed a Hard Reset  will be issued within tHardReset  of \nthe CRCReceiveTimer  to restore VBUS to USB Default Operation  within ~1-1.5s.\n Receiving no response to further attempts at communication is interpreted by the Sink  as an \nerror (see Error handling).\n When the Sink  operating in the SPR PPS Mode  fails to send periodic communication (i.e. a Request  \nMessage ) to the Source  within tPPSRequest , the Source  will issue a Hard Reset  that results in VBUS \ngoing to vSafe5V .\n When the Sink  operating in the EPR Mode  fails to send periodic communication (i.e. an \nEPR_KeepAlive  Message  or any other Message ) to the Source  within tSourceEPRKeepAlive  the \nSource  will issue a Hard Reset  that results in VBUS going to vSafe5V .\n\nPage 64 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Errors during power transitions will automatically lead to a Hard Reset  to restore power to default \nlevels.\n Error handling:\n Protocol Error s are handled by a Soft_Reset  Message  issued by either Port Partner , that resets \ncounters, timers and states, but does not change the Negotiate  voltage and current or the Port 's role \n(e.g., Sink , DFP /UFP , VCONN  Source ) and does not cause an exit from Modal Operation .\n Serious errors are handled by Hard Reset  Signaling  issued by either Port Partner . A Hard Reset : \n resets protocol as for a Soft Reset  but also returns the power supply to USB Default Operation  \n(vSafe0V  or vSafe5V  output) in order to protect the Sink .\n restores the Port 's Data Role  to UFP .\n when the Sink  is the VCONN  Source it removes VCONN  then the Source Port  is restored as the VCONN  \nSource .\n causes all Active Mode s to be exited such that the Source  is no longer in Modal Operation .\n After a Hard Reset  it is expected that the Port Partner  will respond within tTypeCSinkWaitCap . If this \ndoes not occur, then two further Hard Reset s are carried out before the UFP  stays in the \nPE_SNK_Wait_for_Capabilities  state. \n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 652.5.3   Cable Plugs\n Cable Plug s are powered when VCONN  is present but are not aware of the status of the Contract  between \nthe ports the cable assembly is connecting.\n Cable Plug s do not initiate AMS s and only respond to Message s sent to them.\n Detach  or Communications Failure:\n Communications can be interrupted at any time.\n There is no communication timeout scheme between the DFP /UFP  and Cable Plug . \n The Cable Plug  is ready to respond to potentially repeated requests.\n Error handling:\n The Cable Plug  detects Hard Reset  Signaling  to determine that the Source  and Sink  have been reset \nand will need to reset itself (equivalent to a power cycle).\n The Cable Plug  cannot generate Hard Reset  Signaling  itself.\n The Hard Reset  process power cycles both VBUS and VCONN  so this is expected to reset the Cable \nPlug s by itself.\n A Cable Plug  detects Cable Reset  Signaling  to determine that it will need to reset itself (equivalent to a \npower cycle).\n\nPage 66 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-102.6   Architectural Overview\nThis logical architecture is not intended to be taken as an implementation architecture. An implementation \narchitecture is, by definition, a part of product definition and is therefore outside of the scope of this specification.\nThis section outlines the high-level logical architecture of USB Power Delivery referenced throughout this \nspecification. In practice various implementation options are possible based on many different possible types of \nPD devices. PD devices can have many different configurations e.g., USB Communication or non- USB \nCommunication , single versus multiple Port s, dedicated power supplies versus supplies shared on multiple ports, \nhardware versus software-based implementations etc. The architecture outlined in this section is therefore \nprovided only for reference to indicate the high-level logical model used by the PD specification. This architecture \nis used to identify the key concepts and to indicate logical blocks and possible links between them.\nThe USB Power Delivery is a Port  to Port  architecture in which each PD Capable  device is made up of several major \ncomponents.\n Figure 2.3, \"USB Power Delivery Communications Stack\"  illustrates the relationship of the layers of the \ncommunications stack between a Port Pair.\nThe communications stack consists of:\n A Device Policy Manager  (see Section 8.2, \"Device Policy Manager\" ) that exists in all devices and manages \nUSB Power Delivery resources within the device across one or more Port s based on the device's Local \nPolicy .\n A Policy Engine  (see Section 8.3, \"Policy Engine\" ) that exists in each USB Power Delivery Port  \nimplements the Local Policy  for that Port .\n A Protocol Layer  (see Section 6, \"Protocol Layer\" ) that enables Message s to be exchanged between a Source \nPort  and a Sink Port .\n A PHY Layer  (see Section 5, \"Physical Layer\" ) that handles transmission and reception of bits on the wire \nand handles data transmission\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 67Figure 2.3 USB Power Delivery Communications Stack\nAdditionally, USB Power Delivery devices which can operate as USB devices can communicate over USB (see Figure \n2.4, \"USB Power Delivery Communication Over USB\" ). An Optional  System Policy Manager  (see Chapter 9  and [UCSI] ) \nthat resides in the USB Host  communicates with the PDUSB Device  over USB, via the root Port  and potentially \nmanages the individual Port  to Port  connections over a tree of USB Hub s. The Device Policy Manager  interacts with \nthe USB interface in each device to provide and update PD related information in the USB domain. \nNote: A PD device is not required to have a USB device interface.ProtocolPolicy EngineDevice Policy \nManager\nCCPhysical Layer Physical LayerProtocolPolicy EngineDevice Policy \nManagerProvider Consumer\n\nPage 68 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10Figure 2.4 USB Power Delivery Communication Over USB\nFigure 2.5, \"High Level Architecture View\"  shows the logical blocks between two Attached  PD Port s (Port Pair). In \naddition to the communication stack described above there are also:\n For a Provider  or Dual-Role Power Device : one or more Source s providing power to one or more Port s.\n For a Consumer  or Dual-Role Power Device : A Sink  consuming power.\n A USB-C® Port Control  module (see Section4.4 \"Cable Type Detection \") that detects cable Attach /Detach  \nas defined in [USB Type-C 2.4] .\n USB Power Delivery uses standard cabling as defined in [USB Type-C 2.4] .System Policy\nManager\nPhysical LayerProtocolPolicy EngineDevice Policy \nManager\nCCPD USB \nDeviceUSB Host\nUSB Root Hub\nUSB Interface  USB HubUSB Hub\nPhysical LayerProtocolPolicy EngineDevice Policy \nManager\nCCPD USB \nDevice\nUSB Interface"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "2.6.1", "title": "Policy", "page": 69, "level": 3, "parent_id": "2.6", "full_path": "2.6.1 Policy", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 69The Device Policy Manager  talks to the communication stack, Source /Sink , and the USB-C® Port Control  block to \nmanage the resources in the Provider  or Consumer .\nFigure 2.5, \"High Level Architecture View\"  illustrates a Provider  and a Consumer . Dual-Role Power Device s can be \nconstructed by combining the elements of both Provider  and Consumer  into a single device. Provider s can also \ncontain multiple Source Port s each with their own communications stack and USB-C® Port Control .\nFigure 2.5 High Level Architecture View\n2.6.1   Policy\nThere are two levels of Policy:\n1) System Policy  applied system wide by the System Policy Manager  across multiple Provider s or Consumer s.\n3) Local Policy  enforced on a Provider  or Consumer  by the Device Policy Manager  for a device.\nPolicy comprises several logical blocks:\n System Policy Manager  (system wide).\n Device Policy Manager  (one per Provider  or Consumer ).\n Policy Engine  (one per Source Port  or Sink Port ).\n2.6.1.1   System Policy Manager\nSince the USB Power Delivery protocol is Port  to Port , implementation of a System Policy  requires communication \nby an additional data communication mechanism i.e., USB. [UCSI] has been created to define an interface for the \nSystem Policy Manager  to communicate with the Device Policy Manager . When present, the System Policy Manager  \nmonitors and controls System Policy  between various Provider s and Consumer s connected via USB. The System \nPolicy Manager  resides in the USB Host  and communicates via USB with the Device Policy Manager  in each \nconnected Device . Device s without USB Communication capability or are not data connected, will not be able to \nparticipate in System Policy .\nThe System Policy Manager  is Optional  so USB Power Delivery Provider s and Consumer s will operate without it \nbeing present. This includes systems where the USB Host  does not provide a System Policy Manager  and can also \ninclude \"headless\" systems without any USB Host . In those cases where a USB Host  is not present, USB Power \nDelivery is useful for charging purposes, or the powering of devices since useful USB functionality is not possible. \nWhere there is a USB Host , but no System Policy Manager , Provider s and Consumer s can Negotiate  power between Power \nSource(s)\nPhysical LayerProtocolSource  PortDevice Policy ManagerProvider\nPolicy Engine\nPower \nSink\nPhysical LayerProtocolSink PortDevice Policy ManagerConsumer\nPolicy Engine\nUSB-C Port \nControlUSB-C Port \nControl\nVBUSUSB Port\nVBUSUSB Port\nCC CCBMC BMC\nCCVBUS"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "2.6.3", "title": "Collision Avoidance", "page": 70, "level": 3, "parent_id": "2.6", "full_path": "2.6.3 Collision Avoidance", "tags": [], "content": "Page 70 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10themselves, independently of USB power rules, but are more limited in terms of the options available for managing \npower.\n2.6.1.2   Device Policy Manager\nThe Device Policy Manager  provides mechanisms to monitor and control the USB Power Delivery system within a \nparticular Consumer  or Provider . The Device Policy Manager  enables Local Policy  to be enforced across the system \nby communication with the System Policy Manager . Local Policy  is enacted on a per Port  basis by the Device Policy \nManager 's control of the Source Port s/Sink Port s and by communication with the Policy Engine  and USB-C® Port \nControl  for that Port . The Device Policy Manager  is responsible for the sharing algorithm used in Shared Capacity \nCharger s (see [USB Type-C 2.4] )\n2.6.1.3   Policy Engine\nProvider s and Consumer s are free to implement their own Local Policy  on their directly connected Source Port s or \nSink Port s. These will be supported by Negotiation  and status mechanisms implemented by the Policy Engine  for \nthat Port . The Policy Engine  interacts directly with the Device Policy Manager  to determine the present Local Policy  \nto be enforced. The Device Policy Manager  will also inform the Policy Engine  whenever there is a change in Local \nPolicy  (e.g., Capabilities  change).\n2.6.2   Message Formation and Transmission\n2.6.2.1   Protocol Layer\nThe Protocol Layer  forms the Message s used to communicate information between a Port Pair . It is responsible for \nforming Capabilities  Message s, requests and acknowledgments. Additionally, it forms Message s used to swap roles \nand maintain presence. It receives inputs from the Policy Engine  indicating which Message s to send and indicates \nthe responses back to the Policy Engine .\nThe basic protocol uses a push model where the Provider  pushes its Capabilities  to the Consumer  that in turn \nresponds with a request based on the offering. However, the Consumer  can asynchronously request the Provider 's \npresent Capabilities  and can select another voltage/current.\nExtended Message s of up to a Data Size  of MaxExtendedMsgLen  can be sent and received provided the Protocol \nLayer  determines that both Port Partner s support this capability. When one of both Port Partner s do not support \nExtended Message s of Data Size  greater than MaxExtendedMsgLegacyLen  then the Protocol Layer  supports a \nChunking  mechanism to break larger Message s into smaller Chunk s of size MaxExtendedMsgChunkLen . All Port s \nthat support Extended Message s longer than MaxExtendedMsgLegacyLen  are required to support Chunking .\n2.6.2.2   PHY Layer\nThe PHY Layer  is responsible for sending and receiving Message s across the USB Type-C  CC wire and for managing \ndata. PD is a Multi-Drop  system, sharing CC between the Port Partner s and the Cable Plug (s) that implements \nCollision Avoidance  and recovery mechanisms. The PHY Layer  detects errors in the Message s using a CRC .\n2.6.3   Collision Avoidance\n2.6.3.1   Policy Engine\nThe Policy Engine  in a Source  will indicate to the Protocol Layer  the start and end of each Atomic Message Sequence  \n(AMS ) that the Source  initiates. The Policy Engine  in a Sink  will indicate to the Protocol Layer  the start of each AMS  \nthe Sink  initiates. This enables co-ordination of AMS  initiation between the Port Partner s.\n2.6.3.2   Protocol Layer\nThe Protocol Layer  in the Source  will request the PHY to set the Rp value to SinkTxOK  when it is not actively sending \nMessage s. This indicates to the Sink  that it can initiate an AMS  by sending the first Message  in the sequence. The \nProtocol Layer  in the Source  will request the PHY Layer  to set the Rp value to SinkTxNG to indicate that the Sink  \ncannot initiate an AMS  since the Source  is about to initiate an AMS ."}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "2.6.4", "title": "Power supply", "page": 71, "level": 3, "parent_id": "2.6", "full_path": "2.6.4 Power supply", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 71The Protocol Layer  in the Sink , when the Policy Engine  indicates that an AMS  is being initiated, will wait for the Rp \nvalue to be set to SinkTxOK  before initiating the AMS  by sending the first Message  in the sequence.\n2.6.3.3   PHY Layer\nThe PHY Layer  in the Source  will set the Rp value to either SinkTxOK  or SinkTxNG as directed by the Protocol Layer . \nThe PHY Layer  in the Sink  will detect the present Rp value and inform the Protocol Layer .\n2.6.4   Power supply\n2.6.4.1   Source\nEach Provider  will contain one or more power sources that are shared between one or more Port s. These power \nsources are controlled by the Local Policy . Source Port s start up in USB Type-C  Operation where the Port  applies \nvSafe0V  on VBUS and returns to this state on Detach  or after a Hard Reset . When the Source  detects Attach  events it \ntransitions its output to vSafe5V .\n2.6.4.2   Sink\nConsumer s are assumed to have one Sink  connected to a Port . This Sink  is controlled by Local Policy . Sink s start up \nin USB Default Operation  where the Port  can operate at vSafe5V  with USB default specified current levels and \nreturn to this state on Detach  or after a Hard Reset .\n2.6.4.3   Dual-Role Power Ports\nDual-Role Power Port s have the ability to operate as either a Source  or a Sink  and to swap between the two Power \nRole s using Power Role Swap  or Fast Role Swap .\n2.6.4.4   Dead Battery or Lost Power Detection\n[USB Type-C 2.4] defines mechanisms intended to communicate with and to charge a Sink  or DRP  with a Dead \nBattery . \n2.6.4.5   V CONN  Source\nThe Source Port  at Attach , is also the VCONN  Source . The responsibility for sourcing VCONN  can be swapped between \nthe Source Port s and Sink Port s in a make before break fashion to ensure that the Cable Plug s are continuously \npowered. To ensure reliable communication with the Cable Plug s only the Port  that is the VCONN  Source  is permitted \nto communicate with the Cable Plug s.\nNote: Prior to a Power Role Swap , Data Role Swap  or Fast Role Swap  each new Source Port  needs to ensure that \nit is the VCONN  Source  if it needs to communicate with the Cable Plug s after the swap.\n2.6.5   DFP/UFP\n2.6.5.1   Downstream Facing Port (DFP)\nThe Downstream Facing Port  or DFP  is equivalent in the USB topology to the Port  a USB Device  is Attached  to. The \nDFP  will also correspond to the USB Host  but only if USB Communication is supported while acting as a DFP . \nProducts such as Charger s can be a DFP  while not having USB Communication capability. Only the DFP  is allowed \nto control Alternate Mode  operation.\n2.6.5.2   Upstream Facing Port (UFP)\nThe Upstream Facing Port  or UFP  is equivalent in the USB topology to the Port  on a USB Device  that is connected to \nthe USB Host  or USB Hub 's DFP . The UFP  will also correspond to the USB Device  but only if USB Communication is \nsupported while acting as a UFP . Products which charge can be a UFP  while not having USB Communication \ncapability."}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "2.6.5", "title": "DFP/UFP", "page": 71, "level": 3, "parent_id": "2.6", "full_path": "2.6.5 DFP/UFP", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 71The Protocol Layer  in the Sink , when the Policy Engine  indicates that an AMS  is being initiated, will wait for the Rp \nvalue to be set to SinkTxOK  before initiating the AMS  by sending the first Message  in the sequence.\n2.6.3.3   PHY Layer\nThe PHY Layer  in the Source  will set the Rp value to either SinkTxOK  or SinkTxNG as directed by the Protocol Layer . \nThe PHY Layer  in the Sink  will detect the present Rp value and inform the Protocol Layer .\n2.6.4   Power supply\n2.6.4.1   Source\nEach Provider  will contain one or more power sources that are shared between one or more Port s. These power \nsources are controlled by the Local Policy . Source Port s start up in USB Type-C  Operation where the Port  applies \nvSafe0V  on VBUS and returns to this state on Detach  or after a Hard Reset . When the Source  detects Attach  events it \ntransitions its output to vSafe5V .\n2.6.4.2   Sink\nConsumer s are assumed to have one Sink  connected to a Port . This Sink  is controlled by Local Policy . Sink s start up \nin USB Default Operation  where the Port  can operate at vSafe5V  with USB default specified current levels and \nreturn to this state on Detach  or after a Hard Reset .\n2.6.4.3   Dual-Role Power Ports\nDual-Role Power Port s have the ability to operate as either a Source  or a Sink  and to swap between the two Power \nRole s using Power Role Swap  or Fast Role Swap .\n2.6.4.4   Dead Battery or Lost Power Detection\n[USB Type-C 2.4] defines mechanisms intended to communicate with and to charge a Sink  or DRP  with a Dead \nBattery . \n2.6.4.5   V CONN  Source\nThe Source Port  at Attach , is also the VCONN  Source . The responsibility for sourcing VCONN  can be swapped between \nthe Source Port s and Sink Port s in a make before break fashion to ensure that the Cable Plug s are continuously \npowered. To ensure reliable communication with the Cable Plug s only the Port  that is the VCONN  Source  is permitted \nto communicate with the Cable Plug s.\nNote: Prior to a Power Role Swap , Data Role Swap  or Fast Role Swap  each new Source Port  needs to ensure that \nit is the VCONN  Source  if it needs to communicate with the Cable Plug s after the swap.\n2.6.5   DFP/UFP\n2.6.5.1   Downstream Facing Port (DFP)\nThe Downstream Facing Port  or DFP  is equivalent in the USB topology to the Port  a USB Device  is Attached  to. The \nDFP  will also correspond to the USB Host  but only if USB Communication is supported while acting as a DFP . \nProducts such as Charger s can be a DFP  while not having USB Communication capability. Only the DFP  is allowed \nto control Alternate Mode  operation.\n2.6.5.2   Upstream Facing Port (UFP)\nThe Upstream Facing Port  or UFP  is equivalent in the USB topology to the Port  on a USB Device  that is connected to \nthe USB Host  or USB Hub 's DFP . The UFP  will also correspond to the USB Device  but only if USB Communication is \nsupported while acting as a UFP . Products which charge can be a UFP  while not having USB Communication \ncapability."}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "2.6.8", "title": "Power Rules", "page": 72, "level": 3, "parent_id": "2.6", "full_path": "2.6.8 Power Rules", "tags": [], "content": "Page 72 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-102.6.5.3   Dual-Role Data Ports\nDual-Role Data Port s have the ability to operate as either a DFP  or a UFP  and to swap between the two Data Role s \nusing Data Role Swap . \nNote: Products can be Dual-Role Data Port s without being Dual-Role Power Port s that is they can switch \nlogically between DFP  and UFP  Data Role s even if they are Source -only or Sink -only Ports.\n2.6.6   Cable and Connectors\nThe USB Power Delivery specification assumes certified USB cables and associated detection mechanisms as \ndefined in the [USB Type-C 2.4]  specification.\n2.6.6.1   USB-C Port Control\nThe USB-C® Port Control  block provides mechanisms to:\n Inform the Device Policy Manager  of cable Attach /Detach  events.\n Inform Sink 's Device Policy Manager  of the Rp value.\n Allow Source 's Device Policy Manager  to set the Rp value.\n2.6.7   Interactions between Non-PD, BC, and PD devices\nUSB Power Delivery only operates when two USB Power Delivery devices are directly connected. When a device \nfinds itself a mixed environment, where the other device does not support the USB Power Delivery Specification, \nthe existing rules on supplying vSafe5V  as defined in the [USB 2.0] , [USB 3.2] , [USBBC 1.2]  or [USB Type-C 2.4]  \nspecifications are applied.\nThere are two primary cases to consider:\n The USB Host  (DFP /Source ) is non- PD and as such will not send any Advertisements. An Attached  PD \nCapable  device will not see any Advertisements and operates using the rules defined in the [USB 2.0] , \n[USB 3.2] , [USBBC 1.2]  or [USB Type-C 2.4]  specifications.\n The Device  (UFP /Sink ) is non- PD and as such will not see any Advertisements and therefore will not \nrespond. The USB Host  (DFP /Source ) will continue to supply vSafe5V  to VBUS as specified in the [USB \n2.0] , [USB 3.2] , [USBBC 1.2]  or [USB Type-C 2.4]  specifications.\n2.6.8   Power Rules\nPower Rules  define voltages and current ranges that are offered by compliant USB Power Delivery Source s and used \nby a USB Power Delivery Sink  for a given value of PDP Rating . See Chapter 10 \"Power Rules\"  for further details.\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 732.7   Extended Power Range (EPR) Operation\nExtended Power Range  is a Mode  that provides for up to 240W which is considerably more power than the 100W \nthe original PD specification ( SPR Mode ) offered. It is a Mode  of operation that can be entered only when an Explicit \nContract  is in place and both the Port s and the Cable Plug (s) support EPR .\nEntry into EPR Mode  follows a strict process; this assures that the higher voltages, at power levels above 100W, are \nonly transferred between known EPR Capable  Source s and EPR Capable  Sink s over EPR Capable  cables. EPR Source s \nare capable of both Fixed Supply  and Adjustable Voltage Supply  (AVS) operation. Maintaining EPR Mode  operation \nalso requires maintaining a regular cadence of USB PD communications; loss of communications between the EPR \nSource  and EPR Sink  will cause a Hard Reset  to be initiated resulting in a return to SPR operation.\nThe EPR Mode  entry, operational and exit process is summarized by the following steps:\n1) Negotiate  and enter into an Explicit Contract  in the Standard Power Range . During this step, EPR Capable  \nSource s and Sink s will declare their supported EPR  Capabilities  through PDO/APDO  and RDO  exchanges.\n2) An EPR Sink , having discovered an EPR Source , can request EPR Mode  entry.\n3) The EPR Source , having already confirmed that the Attached  cable assembly is EPR Capable  during the \nFirst Explicit Contract  Negotiation , will respond to the EPR Sink  with an acknowledgment of the EPR \nMode  entry request.\n4) While in EPR Mode :\na) The EPR Source  sends EPR Capabilities  (Fixed Supply  PDOs and an AVS APDO ) to the EPR Sink  which \nrequires the Sink  to evaluate and respond as appropriate to adjust the Explicit Contract .\nb) The EPR Sink  maintains a regular cadence of communications with the EPR Source  to allow EPR \nMode  to continue.\n5) When either the EPR Source  or EPR Sink  no longer wants to remain in EPR Mode  operation, a normal \nexit from EPR Mode  will first require adjusting the Explicit Contract  to a voltage of 20V or lower ( SPR \n(A)PDO ) followed by an explicit EPR Mode  exit request.\na) Source  initiated: EPR Source  sends an EPR_Source_Capabilities Message  that only includes SPR \nvoltages to force the EPR Sink  to drop to 20V or below followed by the EPR Mode  exit. Once EPR Mode  \nis exited, a new SPR Contract is Negotiate d to return to SPR Mode  operation.\nb) Sink  initiated; EPR Sink  requests a drop to 20V or below followed by the EPR Mode  exit. Once EPR \nMode  is exited, a new SPR Contract is Negotiate d to return to SPR Mode  operation.\nFigure 2.6, \"Example of a Normal EPR Mode Operational Flow\"  illustrates an example of a normal EPR Mode  \noperational flow. In this example, at some time during the EPR Mode  operation, the Source  decides that it needs to \nexit EPR Mode , so it resends the EPR  Capabilities  to the Sink  with only SPR (A)PDO s to cause the Sink  to Negotiate  \nan SPR Contract of 20V or lower and then the Source  follows with an EPR Mode  exit  Message . Once EPR Mode  is \nexited, a new SPR Contract  is Negotiate d to return to SPR Mode  operation.\n\nPage 74 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10Figure 2.6 Example of a Normal EPR Mode Operational Flow\nNot illustrated in Figure 2.6, \"Example of a Normal EPR Mode Operational Flow\" , while in EPR Mode  operation, the \nSink  might decide it wants to exit EPR Mode . In this case, the Sink  must initiate the exit process by revising its \nExplicit Contract  with the Source  at 20V or less followed with an EPR_Mode exit  Message . Once EPR Mode  is exited, \na new SPR Contract is Negotiate d to formalize the return to SPR Mode  operation. Failure to revise the Explicit \nContract  to one at 20V or less before attempting to exit EPR Mode  will result in a Hard Reset .EPR Source EPR Cable EPR Sink\nEnter EPR \nMode?\nCable is EPR?\nExit EPR \nMode?Establish SPR Contract\n(Source/Sink EPR Status)\nRequest EPR Mode\nAccept EPR Mode\nEstablish EPR Contract\nMaintain PD Repetitive Communications\nEstablish EPR Contract (20V or less)\nExit EPR Mode\nEstablish SPR Contract\n(Source/Sink EPR Status)EPR Mode\nEntry \nPhase\nEPR Mode\nOperation\nEPR Mode\nExit Phase"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "2.8.1", "title": "Fixed Supply Charging Models", "page": 75, "level": 3, "parent_id": "2.8", "full_path": "2.8.1 Fixed Supply Charging Models", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 752.8   Charging Models\nThis section provides a charging model overview for each of the primary power delivery methods: Fixed Supply , \nProgrammable Power Supply  and Adjustable Voltage Supply .\n2.8.1   Fixed Supply Charging Models\nUSB Power Delivery supports Fixed Supply  charging using a set of defined standard voltages with current available \nup to the limit of the Source 's and cable's Advertised Capabilities . As summarized in Table 2.1, \"Fixed Supply Power \nRanges\" , the standard voltages are available in either the Standard Power Range  (SPR) and/or the Extended Power \nRange  (EPR ).\n2.8.2   Programmable Power Supply (PPS) Charging Models\nUSB Power Delivery includes support for Programmable Power Supply  (PPS) charging using a set of defined \nstandard voltage ranges. With current up to the limit of the Source 's and cable's Advertised Capabilities . \nAdditionally, when operating in SPR Mode  the current is also limited by the Operating Current  field value in the \nRequest  Message . \nNote: PPS operation is not available in EPR Mode .\nThe standard voltage ranges available in the Standard Power Range  (SPR) for PPS are summarized in Table 2.2, \n\"PPS Voltage Power Ranges\" .Table 2.1  Fixed Supply Power Ranges\nPower Range Available Current and \nVoltagesPDP Range Notes\nStandard Power Range  (SPR) 3A: 5V, 9V, 15V, 20V\n5A1: 20V15 – 60W\n>60 – 100W\nExtended Power Range  (EPR ) 3A2: 5V, 9V, 15V, 20V\n5A2: 20V\n5A2: 28V, 36V, 48V15 – 60W\n>60 – 100W\n>100 – 240WRequires entry into EPR Mode .\n1) Requires 5A cable.\n2) Requires EPR  cable.\nTable 2.2  PPS Voltage Power Ranges\nAvailable Current Prog Min Voltage (V) Max Voltage (V) PDP Range\n3A 9V Prog 5 11 16 – 60W\n15V Prog 5 16\n20V Prog 5 21\n5A1 20V Prog 5 21 61 – 100W\n1) Requires 5A cable.\n\nPage 76 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-102.8.3   Adjustable Voltage Supply (AVS) Charging Models\nUSB Power Delivery operating in SPR Mode  (when PDP is higher than 27W) and EPR Mode  includes support for \nAdjustable Voltage Supply  (AVS) charging using a set of defined standard voltage ranges based on the Source 's PDP \nRating .\nThe standard voltage ranges available for AVS are summarized in Table 2.3, \"AVS Voltage Power Ranges\" .\nTable 2.3  AVS Voltage Power Ranges\nPDP\nMinimum \nVoltage (V)Maximum \nVoltage (V)Maximum \nAvailable \nCurrent3Minimum \nVoltage (V)Maximum \nVoltage (V)Maximum \nAvailable \nCurrent\n>27…45W 9 15 3A N/A\n>45…60W 9 20 3A\n>60…100W 9 20 5A1\n100…140W 9 20 5A2 15 28 5A2\n>140…180W 9 20 5A2 15 36 5A2\n>180…240W 9 20 5A2 15 48 5A2\n1) Requires 5A cable.\n2) Requires an EPR  Cable.\n3) The maximum available SPR AVS  current is determined by the maximum available current in the \nFixed Supply  15V PDO  in the 9 - 15V range and Fixed Supply  20V PDO  in the 15 - 20V range.\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 773  USB Type-A and USB Type-B Cable Assemblies and \nConnectors\nThis section has been Deprecated . Please refer to [USBPD 2.0]  for details of cables and connectors used in scenar -\nios utilizing the BFSK  Signaling Scheme  in conjunction with USB Type-A  or USB Type-B  connectors."}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "4.3", "title": "Cable IR Ground Drop (IR Drop)", "page": 78, "level": 2, "parent_id": "4", "full_path": "4.3 Cable IR Ground Drop (IR Drop)", "tags": [], "content": "Page 78 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-104  Electrical Requirements \nThis chapter covers the platform's electrical requirements for implementing USB Power Delivery. \n4.1   Interoperability with other USB Specifications\nUSB Power Delivery May  be implemented alongside the [USB 2.0] , [USB 3.2] , [USB4] , [USBBC 1.2]  and [USB Type-\nC 2.4]  (USB Type-C ) specifications. In the case where a Device  requests power via [USBBC 1.2]  and then the USB \nPower Delivery Specification, it Shall  follow the USB Power Delivery Specification until the Port Pair is Detached  \nor there is a Hard Reset . If the USB Power Delivery connection is lost, the Port  Shall  return to its default state, see \nSection 6.8.3, \"Hard Reset\" .\n4.2   Dead Battery Detection / Unpowered Port Detection\nDead Battery /unpowered operation is when a USB Device  needs to provide power to a USB Host  under the \ncircumstances where the USB Host :\n Has a Dead Battery  that requires charging or\n Has lost its power source or\n Does not have a power source or\n Does not want to provide power.\nDead Battery  charging operation for connections between USB Type-C  connectors is defined in [USB Type-C 2.4] .\n4.3   Cable IR Ground Drop (IR Drop)\nEvery PD Sink Port  capable of USB Communication can be susceptible to unreliable USB Communication if the \nvoltage drop across ground falls outside of the acceptable common mode range for the USB Hi-Speed transceivers \ndata lines due to excessive current draw. Certified USB cabling is specified such that such errors don't typically \noccur (See [USB Type-C 2.4] ).\n4.4   Cable Type Detection\nStandard USB Type-C® cable assemblies are rated for PD voltages higher than vSafe5V  and current levels of at least \n3A (See [USB Type-C 2.4] ). The Source  Shall  limit maximum Capabilities  it offers so as not to exceed the Capabilities  \nof the type of cabling detected.\nSource s capable of offering more than 3A Shall  detect the type of Attached  cable and limit the Capabilities  they offer \nbased on the current carrying capability of the cable determined by the Cable Capabilities  determined using the \nDiscover Identity  Command  (see Section 6.4.4.3.1, \"Discover Identity\" ) sent using SOP’ Communication  (see Section \n2.4, \"SOP* Communication\" ) to the Cable Plug . The Cable VDO  returned as part of the Discover Identity  Command  \ndetails the maximum current and voltage values that Shall  be Negotiate d for a given cable as part of an Explicit \nContract .\nThe Cable Discovery  process is usually run when the Source  is powered up, after a Power Role Swap  or Fast Role \nSwap  or when power is applied to a Sink . The method used to detect these events Shall  meet the following \nrequirements:\n Source s Shall  run the Cable Discovery  process prior to the Source  sending Source_Capabilities  Messag -\nes offering currents in excess of 3A and/or voltages in excess of 20V.\n Sink s with USB Type-C  connectors Shall  select Capabilities  from the offered Source Capabilities  assum -\ning that the Source  has already determined the Capabilities  of the cable.\n Sink s with the Dual-Role Power bit set, Shall  respond to a Get_Source_Cap Message  by declaring their \nfull Source Capabilities , without limiting them based on the cable's Capabilities ."}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "4.4", "title": "Cable Type Detection", "page": 78, "level": 2, "parent_id": "4", "full_path": "4.4 Cable Type Detection", "tags": [], "content": "Page 78 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-104  Electrical Requirements \nThis chapter covers the platform's electrical requirements for implementing USB Power Delivery. \n4.1   Interoperability with other USB Specifications\nUSB Power Delivery May  be implemented alongside the [USB 2.0] , [USB 3.2] , [USB4] , [USBBC 1.2]  and [USB Type-\nC 2.4]  (USB Type-C ) specifications. In the case where a Device  requests power via [USBBC 1.2]  and then the USB \nPower Delivery Specification, it Shall  follow the USB Power Delivery Specification until the Port Pair is Detached  \nor there is a Hard Reset . If the USB Power Delivery connection is lost, the Port  Shall  return to its default state, see \nSection 6.8.3, \"Hard Reset\" .\n4.2   Dead Battery Detection / Unpowered Port Detection\nDead Battery /unpowered operation is when a USB Device  needs to provide power to a USB Host  under the \ncircumstances where the USB Host :\n Has a Dead Battery  that requires charging or\n Has lost its power source or\n Does not have a power source or\n Does not want to provide power.\nDead Battery  charging operation for connections between USB Type-C  connectors is defined in [USB Type-C 2.4] .\n4.3   Cable IR Ground Drop (IR Drop)\nEvery PD Sink Port  capable of USB Communication can be susceptible to unreliable USB Communication if the \nvoltage drop across ground falls outside of the acceptable common mode range for the USB Hi-Speed transceivers \ndata lines due to excessive current draw. Certified USB cabling is specified such that such errors don't typically \noccur (See [USB Type-C 2.4] ).\n4.4   Cable Type Detection\nStandard USB Type-C® cable assemblies are rated for PD voltages higher than vSafe5V  and current levels of at least \n3A (See [USB Type-C 2.4] ). The Source  Shall  limit maximum Capabilities  it offers so as not to exceed the Capabilities  \nof the type of cabling detected.\nSource s capable of offering more than 3A Shall  detect the type of Attached  cable and limit the Capabilities  they offer \nbased on the current carrying capability of the cable determined by the Cable Capabilities  determined using the \nDiscover Identity  Command  (see Section 6.4.4.3.1, \"Discover Identity\" ) sent using SOP’ Communication  (see Section \n2.4, \"SOP* Communication\" ) to the Cable Plug . The Cable VDO  returned as part of the Discover Identity  Command  \ndetails the maximum current and voltage values that Shall  be Negotiate d for a given cable as part of an Explicit \nContract .\nThe Cable Discovery  process is usually run when the Source  is powered up, after a Power Role Swap  or Fast Role \nSwap  or when power is applied to a Sink . The method used to detect these events Shall  meet the following \nrequirements:\n Source s Shall  run the Cable Discovery  process prior to the Source  sending Source_Capabilities  Messag -\nes offering currents in excess of 3A and/or voltages in excess of 20V.\n Sink s with USB Type-C  connectors Shall  select Capabilities  from the offered Source Capabilities  assum -\ning that the Source  has already determined the Capabilities  of the cable.\n Sink s with the Dual-Role Power bit set, Shall  respond to a Get_Source_Cap Message  by declaring their \nfull Source Capabilities , without limiting them based on the cable's Capabilities ."}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "5.1", "title": "Physical Layer Overview", "page": 79, "level": 2, "parent_id": "5", "full_path": "5.1 Physical Layer Overview", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 795  Physical Layer\n5.1   Physical Layer Overview\nThe Physical Layer ( PHY Layer ) defines the Signaling  technology for USB Power Delivery. This chapter defines the \nelectrical requirements and parameters of the PHY Layer  required for interoperability between PDUSB Device s.\n5.2   Physical Layer Functions\nThe USB PD PHY Layer consists of a pair of transmitters and receivers that communicate across a single signal wire \n(CC). All communication is half duplex. The PHY Layer  practices Collision Avoidance  to minimize communication \nerrors on the channel.\nThe transmitter performs the following functions:\n Receive Packet  data from the Protocol Layer .\n Calculate and append a CRC .\n Encode the Packet  data including the CRC (i.e., the Payload ).\n Transmit the Packet  (Preamble , SOP* , Payload , CRC  and EOP ) across the channel using Bi-phase Mark \nCoding  (BMC ) over CC.\nThe receiver performs the following functions:\n Recover the clock and lock onto the Packet  from the Preamble .\n Detect the SOP* .\n Decode the received data including the CRC.\n Detect the EOP  and validate the CRC:\n If the CRC is Valid , deliver the Packet  data to the Protocol Layer . \n If the CRC  is Invalid , flush the received data."}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "5.2", "title": "Physical Layer Functions", "page": 79, "level": 2, "parent_id": "5", "full_path": "5.2 Physical Layer Functions", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 795  Physical Layer\n5.1   Physical Layer Overview\nThe Physical Layer ( PHY Layer ) defines the Signaling  technology for USB Power Delivery. This chapter defines the \nelectrical requirements and parameters of the PHY Layer  required for interoperability between PDUSB Device s.\n5.2   Physical Layer Functions\nThe USB PD PHY Layer consists of a pair of transmitters and receivers that communicate across a single signal wire \n(CC). All communication is half duplex. The PHY Layer  practices Collision Avoidance  to minimize communication \nerrors on the channel.\nThe transmitter performs the following functions:\n Receive Packet  data from the Protocol Layer .\n Calculate and append a CRC .\n Encode the Packet  data including the CRC (i.e., the Payload ).\n Transmit the Packet  (Preamble , SOP* , Payload , CRC  and EOP ) across the channel using Bi-phase Mark \nCoding  (BMC ) over CC.\nThe receiver performs the following functions:\n Recover the clock and lock onto the Packet  from the Preamble .\n Detect the SOP* .\n Decode the received data including the CRC.\n Detect the EOP  and validate the CRC:\n If the CRC is Valid , deliver the Packet  data to the Protocol Layer . \n If the CRC  is Invalid , flush the received data.\n\nPage 80 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-105.3   Symbol Encoding\nExcept for the Preamble , all communications on the line Shall  be encoded with a line code to ensure a reasonable \nlevel of DC-balance and a suitable number of transitions. This encoding makes receiver design less complicated and \nallows for more variations in the receiver design.\n4b5b line code Shall  be used. This encodes 4-bit data to 5-bit symbols for transmission and decodes 5-bit symbols \nto 4-bit data for consumption by the receiver.\nThe 4b5b code provides data encoding along with special symbols. Special symbols are used to signal Hard Reset , \nand delineate Packet  boundaries (see Table 5.1, \"4b5b Symbol Encoding\" ).\nTable 5.1  4b5b Symbol Encoding\nName 4b 5b Symbol Description\n0 0000 11110 hex data 0\n1 0001 01001 hex data 1\n2 0010 10100 hex data 2\n3 0011 10101 hex data 3\n4 0100 01010 hex data 4\n5 0101 01011 hex data 5\n6 0110 01110 hex data 6\n7 0111 01111 hex data 7\n8 1000 10010 hex data 8\n9 1001 10011 hex data 9\nA 1010 10110 hex data A\nB 1011 10111 hex data B\nC 1100 11010 hex data C\nD 1101 11011 hex data D\nE 1110 11100 hex data E\nF 1111 11101 hex data F\nSync-1 K-code 11000 Startsynch #1\nSync-2 K-code 10001 Startsynch #2\nRST-1 K-code 00111 Hard Reset  #1\nRST-2 K-code 11001 Hard Reset  #2\nEOP K-code 01101 EOP  End of Packet\nError 00000 Shall Not  be used\nError 00001 Shall Not be used\nError 00010 Shall Not be used\nError 00011 Shall Not be used\nError 00100 Shall Not be used\nError 00101 Shall Not be used\nSync-3 K-code 00110 Startsynch #3\nError 01000 Shall Not be used\nError 01100 Shall Not be used\nError 10000 Shall Not be used\nError 11111 Shall Not be used\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 815.4   Ordered Sets\nOrdered sets Shall  be interpreted according to Figure 5.1, \"Interpretation of ordered sets\" .\nAn ordered set consists of 4 K-code s sent as shown in Figure 5.1, \"Interpretation of ordered sets\" .\nFigure 5.1 Interpretation of ordered sets\nA list of the ordered sets used by USB Power Delivery can be seen in Table 5.2, \"Ordered Sets\" . SOP*  is a generic term \nused in place of SOP /SOP’ /SOP’’ .\nThe receiver Shall  search for all four K-code s. When the receiver finds all four K-code s in the correct place, it Shall  \ninterpret this as a Valid  ordered set. When the receiver finds three out of four K-code s in the correct place, it May  Table 5.2  Ordered Sets\nOrdered Set Reference\nCable Reset Section 5.6.5, \"Cable Reset\"  \nHard Reset Section 5.6.4, \"Hard Reset\"  \nSOP Section 5.6.1.2.1, \"Start of Packet Sequence (SOP)\"\nSOP’ Section 5.6.1.2.2, \"Start of Packet Sequence Prime (SOP')\"\nSOP’_Debug Section 5.6.1.2.4, \"Start of Packet Sequence Prime Debug (SOP'_Debug)\"\nSOP’’ Section 5.6.1.2.3, \"Start of Packet Sequence Double Prime (SOP'')\"\nSOP’’_Debug Section 5.6.1.2.5, \"Start of Packet Sequence Double Prime Debug (SOP''_Debug)\"K-code 4 K-code 3 K-code 2 K-code 1Transmit last Transmit first\nTransmit last Transmit firstb4     b0\nBIT\n4BIT\n3BIT\n2BIT\n1BIT\n0\n\nPage 82 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10interpret this as a Valid  ordered set. The receiver Should  ensure that all four K-code s are Valid  to avoid ambiguity \nin detection (see Table 5.3, \"Validation of Ordered Sets\" ).\nTable 5.3  Validation of Ordered Sets\n1st code 2nd code 3rd code 4th code\nValid1 Corrupt K-code K-code K-code\nValid1 K-code Corrupt K-code K-code\nValid1 K-code K-code Corrupt K-code\nValid1 K-code K-code K-code Corrupt\nValid2 (perfect) K-code K-code K-code K-code\nInvalid  (example) K-code Corrupt K-code Corrupt\n1) May  be interpreted as a Valid  ordered set.\n2) Shall  be interpreted as a Valid ordered set.\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 835.5   Transmitted Bit Ordering\nThis section describes the order of bits on the wire that Shall  be used when transmitting data of varying sizes. \nTable 5.4, \"Data Size\"  shows the different data sizes that are possible. \nFigure 5.2, \"Transmit Order for Various Sizes of Data\"  shows the transmission order that Shall  be followed.\nFigure 5.2 Transmit Order for Various Sizes of DataTable 5.4  Data Size\nUnencoded Encoded\nByte 8-bits 10-bits\nWord 16-bits 20- bits\nDWord 32-bits 40-bits\nb31                                b0\nb31 Transmit last b16 b15    Transmit first    b0\nb15                    b8 b7                      b0\nb7       b4 b3       b0\nb4              b04b5b\nTransmit last Transmit firstBIT\n3BIT\n2BIT\n1BIT\n0BIT\n4"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "5.6.1", "title": "Packet Framing", "page": 84, "level": 3, "parent_id": "5.6", "full_path": "5.6.1 Packet Framing", "tags": [], "content": "Page 84 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-105.6   Packet Format \nThe Packet  format Shall  consist of a Preamble , an SOP* , (see Section 5.6.1.2, \"Start of Packet Sequences\" ), Packet  data \nincluding the Message Header , a CRC and an EOP  (see Section 5.6.1.5, \"End of Packet (EOP)\" ). The Packet  format is \nshown in Figure 5.3, \"USB Power Delivery Packet Format\"  and indicates which parts of the Packet  Shall  be 4b/5b \nencoded. Once 4b/5b encoded, the entire Packet  Shall  be transmitted using BMC  over CC. \nNote: All the bits in the Packet , including the Preamble , are BMC  encoded. \nSee Section 6.2.1, \"Message Construction\"  for more details of the Packet  construction for Control Message s, Data \nMessage s and Extended Message s.\nFigure 5.3 USB Power Delivery Packet Format\n5.6.1   Packet Framing\nThe transmission starts with a Preamble  that is used to allow the receiver to lock onto the carrier. It is followed by \na SOP*  (Start of Packet). The Packet  is terminated with an EOP  (End of Packet ) K-code .\n5.6.1.1   Preamble\nThe Preamble  is used to achieve lock in the receiver by presenting an alternating series of \"0s\" and \"1s\", so the \naverage frequency is the carrier frequency. Unlike the rest of the Packet , the Preamble  Shall  Not be 4b/5b encoded.\nThe Preamble  Shall  consist of a 64-bit sequence of alternating 0s and 1s. The Preamble  Shall  start with a \"0\" and \nShall  end with a \"1\".\n5.6.1.2   Start of Packet Sequences\n5.6.1.2.1   Start of Packet Sequence (SOP)\nSOP  is an ordered set. The SOP  ordered set is defined as: three Sync-1  K-code s followed by one Sync-2  K-code  (see \nTable 5.5, \"SOP Ordered Set\" ).\nA Power Delivery Capable Source  or Sink  Shall  be able to detect and communicate with Packet s using SOP . If a Valid  \nSOP  is not detected (see Table 5.3, \"Validation of Ordered Sets\" ) then the whole transmission Shall  be Discarded .\nSending and receiving of SOP Packets Shall  be limited to PD Capable  Port s on PDUSB Host s and PDUSB Device s. \nCable Plug s and VPD s Shall  neither send nor receive SOP Packets.Table 5.5  SOP Ordered Set\nK-Code Number K-Code in Code \nTable\n1 Sync-1\n2 Sync-1\n3 Sync-1\n4 Sync-2\nPreamble(training for receiver)\nSOP* (Start \nOf Packet)Message \nHeaderByte 0 Byte 1 ...\n... Byte n-1 Byte n\n CRC\nEOP (End Of \nPacket)\nLEGEND:\nTraining sequence provided by the \nPhysical layer, not encoded with 4b5b\nProvided by the Physical \nlayer, encoded with 4b5bProvided by the Protocol \nlayer, encoded with 4b5b"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "5.6.2", "title": "CRC", "page": 86, "level": 3, "parent_id": "5.6", "full_path": "5.6.2 CRC", "tags": [], "content": "Page 86 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-105.6.1.2.4   Start of Packet Sequence Prime Debug (SOP'_Debug)\nThe SOP’_Debug  ordered set is defined as the following sequence of K-code s: Sync-1 , RST-2 , RST-2 , Sync-3  (see \nTable 5.8, \"SOP’_Debug Ordered Set\" ). The usage of this Ordered Set is presently undefined.\n5.6.1.2.5   Start of Packet Sequence Double Prime Debug (SOP''_Debug)\nThe SOP’’_Debug  ordered set is defined as the following sequence of K-code s: Sync-1 , RST-2 , Sync-3 , Sync-2  (see \nTable 5.9, \"SOP’’_Debug Ordered Set\" ). The usage of this Ordered Set is presently undefined.\n5.6.1.3   Packet Payload\nThe Packet  data is delivered from the Protocol Layer  (see Section 6.2, \"Messages\" ) and Shall  be encoded with the \nhex data codes from Table 5.1, \"4b5b Symbol Encoding\" .\n5.6.1.4   CRC\nThe CRC  Shall  be inserted just after the Payload . It is described in Section 5.6.2, \"CRC\" .\n5.6.1.5   End of Packet (EOP)\nThe end of Packet  marker Shall  be a single EOP  K-code  as defined in Figure 5.1, \"Interpretation of ordered sets\" . This \nShall  mark the end of the CRC. After the EOP , the CRC -residual Shall  be checked. If the CRC  is not good, the whole \ntransmission Shall  be Discarded , if it is good, the Packet  Shall  be delivered to the Protocol Layer .\nNote: An EOP  May  be used to prematurely terminate a Packet  e.g., before sending Hard Reset  Signaling .\n5.6.2   CRC\nThe Message Header  and data Shall  be protected by a 32-bit CRC . \n CRC -32 protects the data integrity of the data Payload . CRC -32 is defined as follows: \n The CRC -32 polynomial Shall  be = 04C1_1DB7h. \n The CRC -32 Initial value Shall  be = FFFF_FFFFh. \n CRC -32 Shall  be calculated for all bytes of the Payload  not inclusive of any Packet  framing symbols (i.e., \nexcludes the Preamble , SOP* , EOP ).\n CRC -32 calculation Shall  begin at byte 0, bit 0 and continue to bit 7 of each of the bytes of the Packet .\n The remainder of CRC -32 Shall  be complemented.\n The residual of CRC -32 Shall  be C704 DD7Bh.Table 5.8  SOP’_Debug Ordered Set\nK-Code Number K-Code in Code \nTable\n1 Sync-1\n2 RST-2\n3 RST-2\n4 Sync-3\nTable 5.9  SOP’’_Debug Ordered Set\nK-Code Number K-Code in Code \nTable\n1 Sync-1\n2 RST-2\n3 Sync-3\n4 Sync-2\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 87This inversion of the CRC -32 remainder adds an offset of FFFF_FFFFh that will create a constant CRC-32 residual of \nC704_DD7Bh at the receiver side. \nNote: The CRC  implementation is identical to the one used in [USB 3.2] .\nFigure 5.4, \"CRC-32 Generation\"  is an illustration of CRC -32 generation. The output bit ordering Shall  be as detailed \nin Table 5.10, \"CRC-32 Mapping\" ."}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "5.6.4", "title": "Hard Reset", "page": 89, "level": 3, "parent_id": "5.6", "full_path": "5.6.4 Hard Reset", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 895.6.3   Packet Detection Errors\nCRC  errors, or errors detected while decoding encoded symbols using the code table, Shall  be treated the same \nway; the Message  Shall  be Discarded  and a GoodCRC  Message  Shall Not  be returned.\nWhile the receiver is processing a Packet , if at any time the CC-line becomes Idle the receiver Shall  stop processing \nthe Packet  and Discard  it (no GoodCRC  Message  is returned). See Section 5.8.6.1, \"Definition of Idle\"  for the \ndefinition of BMC  Idle .\n5.6.4   Hard Reset\nHard Reset  Signaling  is an ordered set of bytes sent with the purpose to be recognized by the PHY Layer . The Hard \nReset  Signaling  ordered set is defined as: three RST-1  K-code s followed by one RST-2  K-code  (see Table 5.11, \"Hard \nReset Ordered Set\" ).\nA device Shall  perform a Hard Reset  when it receives Hard Reset  Signaling . After receiving the Hard Reset  \nSignaling , the device Shall  reset as described in Section 6.8.3, \"Hard Reset\" . If a Valid  Hard Reset  is not detected (see \nTable 5.3, \"Validation of Ordered Sets\" ) then the whole transmission Shall  be Discarded .\nA Cable Plug  Shall  perform a Hard Reset  when it detects Hard Reset  Signaling  being sent between the Port Partner s. \nAfter receiving the Hard Reset  Signaling , the device Shall  reset as described in Section 6.8.3, \"Hard Reset\" .\nThe procedure for sending Hard Reset  Signaling  Shall  be as follows:\n If the PHY Layer is currently sending a Message , the Message  Shall  be interrupted by sending an EOP  K-\ncode  and the rest of the Message  Discarded .\n If CC is not Idle, wait for it to become Idle (see Section 5.8.6.1, \"Definition of Idle\" ).\n Wait tInterFrameGap .\n If CC is still Idle send the Preamble  followed by the 4 K-code s for Hard Reset  Signaling .\n Disable the channel (i.e., stop sending and receiving), reset the PHY Layer  and inform the Protocol Layer  \nthat the PHY Layer  has been reset.\n Re-enable the channel when requested by the Protocol Layer .\nFigure 5.5, \"Line format of Hard Reset\"  shows the line format of Hard Reset  Signaling  which is a Preamble  followed \nby the Hard Reset  Ordered Set.\nFigure 5.5 Line format of Hard ResetTable 5.11  Hard Reset Ordered Set\nK-Code Number K-Code in Code \nTable\n1 RST-1\n2 RST-1\n3 RST-1\n4 RST-2\nPreamble(training for receiver)\n RST-1\nLEGEND:\nPreamble provided by the Physical layer, \nnot encoded with 4b5b\nProvided by the Physical \nlayer, encoded with 4b5b\nRST-1\n RST-1\n RST-2\n\nPage 90 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-105.6.5   Cable Reset\nCable Reset  Signaling  is an ordered set of bytes sent with the purpose to be recognized by the PHY Layer . The Cable \nReset  Signaling  ordered set is defined as the following sequence of K-code s: RST-1 , Sync-1 , RST-1 , Sync-3  (see \nTable 5.12, \"Cable Reset Ordered Set\" ).\nCable Reset  Signaling  Shall  only be sent by the DFP . The Cable Reset  Ordered Set is used to reset the Cable Plug s \nwithout the need to Hard Reset  the Port Partner s. The state of the Cable Plug  after the Cable Reset  Signaling  Shall  \nbe equivalent to power cycling the Cable Plug .\nFigure 5.6, \"Line format of Cable Reset\"  shows the line format of Cable Reset Signaling  which is a Preamble  followed \nby the Cable Reset  Ordered Set.\nFigure 5.6 Line format of Cable ResetTable 5.12  Cable Reset Ordered Set\nK-Code Number K-Code in Code \nTable\n1 RST-1\n2 Sync-1\n3 RST-1\n4 Sync-3\nPreamble(training for receiver)\n RST-1\nLEGEND:\nPreamble provided by the Physical layer, \nnot encoded with 4b5b\nProvided by the Physical \nlayer, encoded with 4b5b\nSync-1\n RST-1\n Sync-3\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 915.7   Collision Avoidance\nThe PHY Layer  Shall  monitor the channel for data transmission and only initiate transmissions when CC  is Idle. If \nthe bus Idle condition is present, it Shall  be considered safe to start a transmission provided the conditions detailed \nin Section 5.8.5.4, \"Inter-Frame Gap\"  are met. The bus Idle condition Shall  be checked immediately prior to \ntransmission. If transmission cannot be initiated, then the Packet  Shall  be Discarded . If the Packet  is Discarded  \nbecause CC  is not Idle, the PHY Layer  Shall  signal to the Protocol Layer  that it has Discarded  the Message  as soon \nas CC becomes Idle. See Section 5.8.6.1, \"Definition of Idle\"  for the definition of Idle CC.\nIn addition, during an Explicit Contract , the PHY Layer  Shall  control the Rp resistor value to avoid collisions \nbetween Source  and Sink  transmissions. The Source  Shall  set an Rp value corresponding to a current of 3A \n(SinkTxOK ) to indicate to the Sink  that it May  initiate an AMS . The Source  Shall  set an Rp value corresponding to a \ncurrent of 1.5A (SinkTxNG) this Shall  indicate to the Sink  that it Shall Not  initiate an AMS  and Shall  only respond \nto Message s as part of an AMS . See [USB Type-C 2.4]  (USB Type-C ) for details of the corresponding Rp values. During \nthe Implicit Contract  that precedes an Explicit Contract  (including Power Role Swap  and Fast Role Swap ) the Rp \nresistor value is used to specify USB Type-C  current and is not used for Collision Avoidance .\nTable 5.13, \"Rp values used for Collision Avoidance\"  details the Rp values that Shall  be used by the Source  to control \nSink  initiation of an AMS .\nSee also Section 6.6.16, \"Collision Avoidance Timers\"  and Section 6.10, \"Collision Avoidance\" .Table 5.13  Rp values used for Collision Avoidance\nSource RpParameter Description Sink Operation Source Operation\n1.5A@5V SinkTxNG Sink  Transmit “No Go,”The Sink  Shall Not  initiate \nan AMS  once tSinkDelay  has \nelapsed after SinkTxNG  is \nasserted.Source  can initiate an AMS  \ntSinkTx  after setting Rp to \nthis value.\n3A@5V SinkTxOK Sink  Transmit “Ok” Sink  can initiate an AMS .Source  cannot initiate an \nAMS  while it has this value \nset."}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "5.8.1", "title": "Encoding and signaling", "page": 92, "level": 3, "parent_id": "5.8", "full_path": "5.8.1 Encoding and signaling", "tags": [], "content": "Page 92 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-105.8   Bi-phase Mark Coding (BMC) Signaling Scheme\nBi-phase Mark Coding  (BMC ) is the PHY Layer  Signaling Scheme  for carrying USB Power Delivery Message s. This \nencoding assumes a dedicated DC connection, over the CC wire, which is used for sending PD Message s.\nBi-phase Mark Coding  is a version of Manchester coding (see [IEC 60958-1] ). In BMC , there is a transition at the \nstart of every bit time (UI ) and there is a second transition in the middle of the UI when a 1 is transmitted. BMC  is \neffectively DC balanced, (each 1 is DC balanced and two successive zeros are DC balanced, regardless of the number \nof intervening 1's). It has bounded disparity (limited to 1 bit over an arbitrary Packet , so a very low DC level). \nFigure 5.7, \"BMC Example\"  illustrates Bi-phase Mark Coding . This example shows the transition from a Preamble  to \nthe Sync-1  K-code s of the SOP  Ordered Set at the start of a Message . \nNote: Other K-code s can occur after the Preamble  for Signaling  such as Hard Reset  and Cable Reset .\nFigure 5.7 BMC Example\n5.8.1   Encoding and signaling\nBMC  uses DC coupled baseband Signaling  on CC. Figure 5.8, \"BMC Transmitter Block Diagram\"  shows a block \ndiagram for a Transmitter and Figure 5.9, \"BMC Receiver Block Diagram\"  shows a block diagram for the \ncorresponding Receiver.\nFigure 5.8 BMC Transmitter Block DiagramPreamble Sync-1 Sync-1\n01010101 01 01 00 00 11\nData In\nBMC\nto CCData4b5b\nEncoder\nCRCBMC \nEncoder\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 93Figure 5.9 BMC Receiver Block Diagram\nThe USB PD baseband signal Shall  be driven on the CC wire with a tristate driver that Shall  cause a vSwing  swing \non CC. The tristate driver is slew rate limited (see min rise/fall time in Section 5.8.5, \"BMC Transmitter \nSpecifications\" ) to limit coupling to D+/D- and to other signal lines in the USB Type-C  fully featured cables (see [USB \nType-C 2.4] ). This slew rate limiting can be performed either with driver design or an RC filter on the driver output.\nWhen sending the Preamble , the transmitter Shall  start by transmitting a low level. The receiver Shall  tolerate the \nloss of the first edge. The transmitter May  vary the start of the Preamble  by tStartDrive  min (see Figure 5.10, \"BMC \nEncoded Start of Preamble\" ).\nFigure 5.10 BMC Encoded Start of Preamble\nThe transmitter Shall  terminate the final bit of the Frame  by an edge (the “trailing edge”) to help ensure that the \nreceiver clocks the final bit. If the trailing edge results in the transmitter driving CC low (i.e., the final half- UI of the \nFrame  is high, see Figure 5.11, \"Transmitting or Receiving BMC Encoded Frame Terminated by Zero with High-to-Low \nLast Transition\"  and Figure 5.12, \"Transmitting or Receiving BMC Encoded Frame Terminated by One with High-to-\nLow Last Transition\" ), then the transmitter:\n Shall  continue to drive CC low for tHoldLowBMC .\n Should  release CC to high impedance as soon as possible after min tHoldLowBMC  and Shall  release CC \nby max tEndDriveBMC .\nFigure 5.11, \"Transmitting or Receiving BMC Encoded Frame Terminated by Zero with High-to-Low Last Transition\"  \nillustrates the end of a BMC  encoded Frame  with an encoded zero for which the final bit of the Frame  is terminated \nby a high to low transition. Figure 5.12, \"Transmitting or Receiving BMC Encoded Frame Terminated by One with \nHigh-to-Low Last Transition\"  illustrates the end of a BMC  Encoded Frame  with an encoded one for which the final \nbit of the Frame  is terminated by a high to low transition. Both figures also illustrate the tInterFrameGap  timing \nrequirement before the start of the next Frame  when the Port  has either been transmitting or receiving the \nprevious Frame  (see Section 5.8.5.4, \"Inter-Frame Gap\" ).Datafrom CC 5b4b\nDecoder\nCRCBMC \nDecoderSOP \nDetect\n1UI 1UI 1UI 1UI 1UI 1UI01 01 01 etc\nHigh Impedance\n(level set by R p/Rd)\ntStartDrive\n\nPage 94 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10Figure 5.11 Transmitting or Receiving BMC Encoded Frame Terminated by Zero with High-to-Low Last \nTransition\nFigure 5.12 Transmitting or Receiving BMC Encoded Frame Terminated by One with High-to-Low Last \nTransition\nIf the trailing edge results in the transmitter driving CC  high (i.e., the final half-UI  of the Frame  is low, see Figure \n5.13, \"Transmitting or Receiving BMC Encoded Frame Terminated by Zero with Low to High Last Transition\"  and \nFigure 5.14, \"Transmitting or Receiving BMC Encoded Frame Terminated by One with Low to High Last Transition\" ), \nthen the transmitter:\n Shall  continue to drive CC high for 1 UI.\n Then Shall  drive CC low for tHoldLowBMC .\n Should  release CC to high impedance as soon as possible after min tHoldLowBMC  and Shall  release CC \nby max tEndDriveBMC .\nFigure 5.13, \"Transmitting or Receiving BMC Encoded Frame Terminated by Zero with Low to High Last Transition\"  \nillustrates the ending of a BMC  encoded Frame  that ends with an encoded zero for which the final bit of the Frame  \nis terminated by a low to high transition. Figure 5.14, \"Transmitting or Receiving BMC Encoded Frame Terminated \nby One with Low to High Last Transition\"  illustrates the ending of a BMC  encoded Frame  that ends with an encoded \none for which the final bit of the Frame  is terminated by a low to high transition. Both figures also illustrate the \ntInterFrameGap  timing requirement before the start of the next Frame  when the Port  has either been transmitting \nor receiving the previous Frame  (see Section 5.8.5.4, \"Inter-Frame Gap\" ).1UI\nmax tEndDriveBMC\ntInterFrameGapmin tHoldLowBMCfinal bit\nof frame\n0pre-amable for \nnext frame\n0trailing edge of \nfinal bit\nHigh Impedance \n(level set by R p/Rd)\n1UI\nmax tEndDriveBMC\ntInterFrameGapmin tHoldLowBMCfinal bit\nof frame\n0pre-amable for \nnext frame\n0trailing edge of \nfinal bit\nHigh Impedance \n(level set by R p/Rd)\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 95Figure 5.13 Transmitting or Receiving BMC Encoded Frame Terminated by Zero with Low to High Last \nTransition\nFigure 5.14 Transmitting or Receiving BMC Encoded Frame Terminated by One with Low to High Last \nTransition\nNote: There is no requirement to maintain a timing phase relationship between back-to-back Packet s.1UI 1UI\nmax tEndDriveBMC\ntInterFrameGapmin tHoldLowBMCfinal bit\nof frame\n0pre-amable for \nnext frame\n0trailing edge of \nfinal bit\nHigh Impedance \n(level set by R p/Rd)\n1UI 1UI\nmax tEndDriveBMC\ntInterFrameGapmin tHoldLowBMCfinal bit\nof frame\n1pre-amable for \nnext frame\n0trailing edge of \nfinal bit\nHigh Impedance \n(level set by R p/Rd)"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "6.1", "title": "Overview", "page": 114, "level": 2, "parent_id": "6", "full_path": "6.1 Overview", "tags": [], "content": "Page 114 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-106  Protocol Layer\n6.1   Overview\nThis chapter describes the requirements of the USB Power Delivery Specification's Protocol Layer  including:\n Details of how Message s are constructed and used.\n Use of timers and timeout values.\n Use of Message  and retry counters.\n Reset operation.\n Error handling.\n State  behavior.\nRefer to Section 2.6, \"Architectural Overview\"  for an overview of the theory of operation of USB Power Delivery."}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "1", "title": "Ground pin supported when set", "page": 216, "level": 1, "parent_id": null, "full_path": "1 Ground pin supported when set", "tags": [], "content": "Page 216 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-106.5.1   Source_Capabilities_Extended Message\nThe Source_Capabilities_Extended  Message  Should  be sent in response to a Get_Source_Cap_Extended  Message . \nThe Source_Capabilities_Extended  Message  enables a Source  or a DRP  to inform the Sink  about its Capabilities  as a \nSource .\nThe Source_Capabilities_Extended  Message  Shall  return a 25-byte Source Capabilities Extended Data Block \n(SCEDB) whose format Shall  be as shown in Figure 6.37, \"Source_Capabilities_Extended Message\"  and Table 6.54, \n\"Source Capabilities Extended Data Block (SCEDB)\" .\nFigure 6.37 Source_Capabilities_Extended Message\nTable 6.54  Source Capabilities Extended Data Block (SCEDB)\nOffset Field Description\n0 VID Vendor ID  (assigned by the USB-IF)\n2 PID Product ID (assigned by the manufacturer)\n4 XID Value provided by the USB-IF assigned to the product\n8 FW Version Firmware version number \n9 HW Version Hardware version number \n10 Voltage RegulationBit Description\n1…000b: 150mA/µs Load Step (default)\n01b: 500mA/µs Load Step\n11b…10b: Reserved  and Shall Not  be used.\n20b: 25% IoC (default)\n1b: 90% IoC\n3…7 Reserved  and Shall Not  be used\n11 Holdup TimeOutput will stay with regulated limits for this number of milliseconds after removal of \nthe AC from the input.\n0x00 = feature not supported\nNote: A value of at least 3ms Should  be used (see Section 7.1.12.2, \"Holdup Time Field\" ).\n12 ComplianceCompliance in SPR Mode :\nBit Description\n0 LPS compliant when set\n1 PS1 compliant when set\n2 PS2 compliant when set\n3…7 Reserved  and Shall Not  be used\n13 Touch CurrentBit Description\n0 Low touch current EPS when set\n1 Ground pin supported when set\n2 Ground pin intended for protective earth when set\n3...7 Reserved  and Shall Not  be usedExtended Header\nData Size = 25\nSCEDB\n(25-byte Data Block)"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "2", "title": "PID Product ID (assigned by the manufacturer)", "page": 216, "level": 1, "parent_id": null, "full_path": "2 PID Product ID (assigned by the manufacturer)", "tags": [], "content": "Page 216 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-106.5.1   Source_Capabilities_Extended Message\nThe Source_Capabilities_Extended  Message  Should  be sent in response to a Get_Source_Cap_Extended  Message . \nThe Source_Capabilities_Extended  Message  enables a Source  or a DRP  to inform the Sink  about its Capabilities  as a \nSource .\nThe Source_Capabilities_Extended  Message  Shall  return a 25-byte Source Capabilities Extended Data Block \n(SCEDB) whose format Shall  be as shown in Figure 6.37, \"Source_Capabilities_Extended Message\"  and Table 6.54, \n\"Source Capabilities Extended Data Block (SCEDB)\" .\nFigure 6.37 Source_Capabilities_Extended Message\nTable 6.54  Source Capabilities Extended Data Block (SCEDB)\nOffset Field Description\n0 VID Vendor ID  (assigned by the USB-IF)\n2 PID Product ID (assigned by the manufacturer)\n4 XID Value provided by the USB-IF assigned to the product\n8 FW Version Firmware version number \n9 HW Version Hardware version number \n10 Voltage RegulationBit Description\n1…000b: 150mA/µs Load Step (default)\n01b: 500mA/µs Load Step\n11b…10b: Reserved  and Shall Not  be used.\n20b: 25% IoC (default)\n1b: 90% IoC\n3…7 Reserved  and Shall Not  be used\n11 Holdup TimeOutput will stay with regulated limits for this number of milliseconds after removal of \nthe AC from the input.\n0x00 = feature not supported\nNote: A value of at least 3ms Should  be used (see Section 7.1.12.2, \"Holdup Time Field\" ).\n12 ComplianceCompliance in SPR Mode :\nBit Description\n0 LPS compliant when set\n1 PS1 compliant when set\n2 PS2 compliant when set\n3…7 Reserved  and Shall Not  be used\n13 Touch CurrentBit Description\n0 Low touch current EPS when set\n1 Ground pin supported when set\n2 Ground pin intended for protective earth when set\n3...7 Reserved  and Shall Not  be usedExtended Header\nData Size = 25\nSCEDB\n(25-byte Data Block)"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "4", "title": "XID Value provided by the USB-IF assigned to the product", "page": 216, "level": 1, "parent_id": null, "full_path": "4 XID Value provided by the USB-IF assigned to the product", "tags": [], "content": "Page 216 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-106.5.1   Source_Capabilities_Extended Message\nThe Source_Capabilities_Extended  Message  Should  be sent in response to a Get_Source_Cap_Extended  Message . \nThe Source_Capabilities_Extended  Message  enables a Source  or a DRP  to inform the Sink  about its Capabilities  as a \nSource .\nThe Source_Capabilities_Extended  Message  Shall  return a 25-byte Source Capabilities Extended Data Block \n(SCEDB) whose format Shall  be as shown in Figure 6.37, \"Source_Capabilities_Extended Message\"  and Table 6.54, \n\"Source Capabilities Extended Data Block (SCEDB)\" .\nFigure 6.37 Source_Capabilities_Extended Message\nTable 6.54  Source Capabilities Extended Data Block (SCEDB)\nOffset Field Description\n0 VID Vendor ID  (assigned by the USB-IF)\n2 PID Product ID (assigned by the manufacturer)\n4 XID Value provided by the USB-IF assigned to the product\n8 FW Version Firmware version number \n9 HW Version Hardware version number \n10 Voltage RegulationBit Description\n1…000b: 150mA/µs Load Step (default)\n01b: 500mA/µs Load Step\n11b…10b: Reserved  and Shall Not  be used.\n20b: 25% IoC (default)\n1b: 90% IoC\n3…7 Reserved  and Shall Not  be used\n11 Holdup TimeOutput will stay with regulated limits for this number of milliseconds after removal of \nthe AC from the input.\n0x00 = feature not supported\nNote: A value of at least 3ms Should  be used (see Section 7.1.12.2, \"Holdup Time Field\" ).\n12 ComplianceCompliance in SPR Mode :\nBit Description\n0 LPS compliant when set\n1 PS1 compliant when set\n2 PS2 compliant when set\n3…7 Reserved  and Shall Not  be used\n13 Touch CurrentBit Description\n0 Low touch current EPS when set\n1 Ground pin supported when set\n2 Ground pin intended for protective earth when set\n3...7 Reserved  and Shall Not  be usedExtended Header\nData Size = 25\nSCEDB\n(25-byte Data Block)"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "8", "title": "FW Version Firmware version number", "page": 216, "level": 1, "parent_id": null, "full_path": "8 FW Version Firmware version number", "tags": [], "content": "Page 216 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-106.5.1   Source_Capabilities_Extended Message\nThe Source_Capabilities_Extended  Message  Should  be sent in response to a Get_Source_Cap_Extended  Message . \nThe Source_Capabilities_Extended  Message  enables a Source  or a DRP  to inform the Sink  about its Capabilities  as a \nSource .\nThe Source_Capabilities_Extended  Message  Shall  return a 25-byte Source Capabilities Extended Data Block \n(SCEDB) whose format Shall  be as shown in Figure 6.37, \"Source_Capabilities_Extended Message\"  and Table 6.54, \n\"Source Capabilities Extended Data Block (SCEDB)\" .\nFigure 6.37 Source_Capabilities_Extended Message\nTable 6.54  Source Capabilities Extended Data Block (SCEDB)\nOffset Field Description\n0 VID Vendor ID  (assigned by the USB-IF)\n2 PID Product ID (assigned by the manufacturer)\n4 XID Value provided by the USB-IF assigned to the product\n8 FW Version Firmware version number \n9 HW Version Hardware version number \n10 Voltage RegulationBit Description\n1…000b: 150mA/µs Load Step (default)\n01b: 500mA/µs Load Step\n11b…10b: Reserved  and Shall Not  be used.\n20b: 25% IoC (default)\n1b: 90% IoC\n3…7 Reserved  and Shall Not  be used\n11 Holdup TimeOutput will stay with regulated limits for this number of milliseconds after removal of \nthe AC from the input.\n0x00 = feature not supported\nNote: A value of at least 3ms Should  be used (see Section 7.1.12.2, \"Holdup Time Field\" ).\n12 ComplianceCompliance in SPR Mode :\nBit Description\n0 LPS compliant when set\n1 PS1 compliant when set\n2 PS2 compliant when set\n3…7 Reserved  and Shall Not  be used\n13 Touch CurrentBit Description\n0 Low touch current EPS when set\n1 Ground pin supported when set\n2 Ground pin intended for protective earth when set\n3...7 Reserved  and Shall Not  be usedExtended Header\nData Size = 25\nSCEDB\n(25-byte Data Block)"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "10", "title": "Voltage RegulationBit Description", "page": 216, "level": 1, "parent_id": null, "full_path": "10 Voltage RegulationBit Description", "tags": [], "content": "Page 216 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-106.5.1   Source_Capabilities_Extended Message\nThe Source_Capabilities_Extended  Message  Should  be sent in response to a Get_Source_Cap_Extended  Message . \nThe Source_Capabilities_Extended  Message  enables a Source  or a DRP  to inform the Sink  about its Capabilities  as a \nSource .\nThe Source_Capabilities_Extended  Message  Shall  return a 25-byte Source Capabilities Extended Data Block \n(SCEDB) whose format Shall  be as shown in Figure 6.37, \"Source_Capabilities_Extended Message\"  and Table 6.54, \n\"Source Capabilities Extended Data Block (SCEDB)\" .\nFigure 6.37 Source_Capabilities_Extended Message\nTable 6.54  Source Capabilities Extended Data Block (SCEDB)\nOffset Field Description\n0 VID Vendor ID  (assigned by the USB-IF)\n2 PID Product ID (assigned by the manufacturer)\n4 XID Value provided by the USB-IF assigned to the product\n8 FW Version Firmware version number \n9 HW Version Hardware version number \n10 Voltage RegulationBit Description\n1…000b: 150mA/µs Load Step (default)\n01b: 500mA/µs Load Step\n11b…10b: Reserved  and Shall Not  be used.\n20b: 25% IoC (default)\n1b: 90% IoC\n3…7 Reserved  and Shall Not  be used\n11 Holdup TimeOutput will stay with regulated limits for this number of milliseconds after removal of \nthe AC from the input.\n0x00 = feature not supported\nNote: A value of at least 3ms Should  be used (see Section 7.1.12.2, \"Holdup Time Field\" ).\n12 ComplianceCompliance in SPR Mode :\nBit Description\n0 LPS compliant when set\n1 PS1 compliant when set\n2 PS2 compliant when set\n3…7 Reserved  and Shall Not  be used\n13 Touch CurrentBit Description\n0 Low touch current EPS when set\n1 Ground pin supported when set\n2 Ground pin intended for protective earth when set\n3...7 Reserved  and Shall Not  be usedExtended Header\nData Size = 25\nSCEDB\n(25-byte Data Block)"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "3", "title": "Internal Power from Battery  when set", "page": 221, "level": 1, "parent_id": null, "full_path": "3 Internal Power from Battery  when set", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 2216.5.2   Status Message\nThe Status  Message  Shall  be sent in response to a Get_Status  Message . The content of the Status  Message  depends \non the target of the Get_Status  Message . When sent to SOP  the Status  Message  returns the status of the Port 's Port \nPartner . When sent to SOP’  or SOP’’  the Status  Message  returns the status of one of the Active Cable 's Cable Plug s.\n6.5.2.1   SOP Status Message\nA Status  Message , sent in response to Get_Status  Message  to SOP , enables a Port  to inform its Port Partner  about \nthe present status of the Source  or Sink . Typically, a Get_Status  Message  will be sent by the Port  after receipt of an \nAlert  Message . Some of the reported events are critical such as OCP , OVP  and OTP , while others are informational \nsuch as change in a Battery 's status from charging to neither charging nor discharging. \nThe Status  Message  returns a 7-byte Status Data Block (SDB) whose format Shall  be as shown in Figure 6.38, \"SOP \nStatus Message\"  and Table 6.55, \"SOP Status Data Block (SDB)\" .\nFigure 6.38 SOP Status Message\nTable 6.55  SOP Status Data Block (SDB)\nOffset (Byte) Field Description\n0 Internal TempSource  or Sink ’s internal temperature in °C\n0 = feature not supported\n1 = temperature is less than 2°C. \n2-255 = temperature in °C.\n1 Present InputBit Description\n0 Reserved  and Shall  be set to zero\n1 External Power when set\n2External Power AC/DC ( Valid  when Bit 1 set)\n0: DC\n1: AC \nReserved  when Bit 1 is zero\n3 Internal Power from Battery  when set\n4 Internal Power from non-Battery  power source when set\n5...7 Reserved  and Shall  be set to zero\n2Present Battery \nInputWhen Present Input  field bit 3 set Shall  contain the bit corresponding \nto the Battery  or Batteries providing power:\nUpper nibble = Hot Swappable Battery (b7…4)\nLower nibble = Fixed Battery  (b3…0)\nWhen Present Input field bit 3 is not set this field is Reserved  and \nShall  be set to zero.Extended Header\nData Size = 7\nSDB\n(7-byte block)"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "5", "title": "Power StatusBit Description", "page": 222, "level": 1, "parent_id": null, "full_path": "5 Power StatusBit Description", "tags": [], "content": "Page 222 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-103 Event FlagsBit Flag Description\n0 Reserved  and Shall  be set to zero\n1 OCP Event OCP  event when set\n2 OTP Event OTP  event when set\n3 OVP Event OVP  event when set\n4 CL/CV ModeIn PPS Mode  only: CL mode when set, CV \nmode when cleared\n5...7 Reserved  and Shall  be set to zero\n4Temperature \nStatusBit Description\n0 Reserved  and Shall  be set to zero\n1...200 – Not Supported. \n01 – Normal \n10 – Warning \n11 – Over temperature\n3...7 Reserved  and Shall  be set to zero\n5 Power StatusBit Description\n0 Reserved  and Shall  be set to zero\n1 Source  power limited due to cable supported current\n2Source  power limited due to insufficient power available \nwhile sourcing other ports\n3 Source  power limited due to insufficient external power\n4Source  power limited due to Event Flags in place (Event \nFlags must also be set)\n5 Source  power limited due to temperature\n6...7 Reserved  and Shall  be set to zeroTable 6.55  SOP Status Data Block (SDB) (Continued)\nOffset (Byte) Field Description"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "7", "title": "Reserved  and Shall  be set to zero", "page": 223, "level": 1, "parent_id": null, "full_path": "7 Reserved  and Shall  be set to zero", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 2236.5.2.1.1   Internal Temp Field\nThe Internal Temp  field reports the instantaneous temperature of a portion of the Source  or Sink .\n6.5.2.1.2   Present Input Field\nThe Present Input  field indicates which supplies are presently powering the Source  or Sink .\nThe following bits are defined:\n Bit 1: indicates that an external power source is present.\n Bit 2: indicates whether the external unconstrained power source is AC or DC.\n Bit 3: indicates that power is being provided from Battery .\n Bit4: indicates an alternative internal source of power that is not a Battery .\n6.5.2.1.3   Present Battery Input Field\nThe Present Battery Input  field indicates which Battery  or Batteries are presently supplying power to the Source  \nor Sink . The Present Battery Input  field is only Valid  when the Present Input  field indicates that there is Internal \nPower from Battery .\nThe upper nibble of the field indicates which Hot Swappable Battery /Batteries are supplying power with bit 4 in \nupper nibble corresponding to Battery  4 and bit 7 in the upper nibble corresponding to Battery  7 (see Section 6.5.3, \n\"Get_Battery_Cap Message\"  and Section 6.5.4, \"Get_Battery_Status Message\" ).\nThe lower nibble of the field indicates which Fixed Battery /Batteries are supplying power with bit 0 in lower nibble \ncorresponding to Battery  0 and bit 3 in the lower nibble corresponding to Battery  3 (see Section 6.5.3, \n\"Get_Battery_Cap Message\"  and Section 6.5.4, \"Get_Battery_Status Message\" ).6Power State \nChangeBit Description\n0...2New Power State\nValue Description\n0 Status not supported\n1 S0\n2 Modern Standby\n3 S3\n4 S4\n5S5 (Off with battery, wake events \nsupported)\n6G3 (Off with no battery, wake events not \nsupported)\n7 Reserved  and Shall  be set to zero\n3...5New Power State indicator\nValue Description\n0 Off LED\n1 On LED\n2 Blinking LED\n3 Breathing LED\n4...7 Reserved  and Shall  be set to zero\n6...7 Reserved  and Shall  be set to zeroTable 6.55  SOP Status Data Block (SDB) (Continued)\nOffset (Byte) Field Description"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "7.1", "title": "Source Requirements", "page": 312, "level": 2, "parent_id": "7", "full_path": "7.1 Source Requirements", "tags": [], "content": "Page 312 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-107  Power Supply\n7.1   Source Requirements\n7.1.1   Behavioral Aspects\nA PDUSB  Source  exhibits the following behaviors:\n Shall  supply [USB Type-C 2.4]  USB Type-C® current to VBUS while in a Default Contract  or Implicit \nContract .\n Shall  follow the requirements as specified in Section 7.1.5, \"Response to Hard Resets\"  when Hard Reset  \nSignaling  is received.\n Shall  control VBUS voltage transitions as bound by undershoot, overshoot and transition time \nrequirements.\n7.1.2   Source Bulk Capacitance\nThe Source  bulk capacitance Shall Not  be placed between the transceiver isolation impedance and the USB \nreceptacle. The Source  bulk capacitance consists of C1 and C2 as shown in Figure 7.1, \"Placement of Source Bulk \nCapacitance\" . The Ohmic Interconnect might consist of PCB traces for power distribution or power switching \ndevices. The Ohmic Interconnect might also be part of the circuit implemented by the Source  to limit its VBUS Output \nVoltage Limit (OVL) as described in Section 7.1.7.5, \"Output Voltage Limit\" . Though a Source  Shall  limit its output \nvoltage, a Sink  Shall  implement Sink  OVP  as described in Section 7.2.9.2, \"Input Over Voltage Protection\"  to protect \nagainst excessive V BUS input voltage. The capacitance might be a single capacitor, a capacitor bank or distributed \ncapacitance. If the power supply is shared across multiple ports, the bulk capacitance is defined as \ncSrcBulkShared . If the power supply is dedicated to a single Port , the minimum bulk capacitance is defined as \ncSrcBulk .\nThe Source  bulk capacitance is allowed to change for a newly Negotiated  power level. The capacitance change Shall  \noccur before the Source  is ready to operate at the new power level. During a Power Role Swap , the Initial Source  \nShall  transition to Swap Standby  before operating as the New Sink . Any change in bulk capacitance required to \ncomplete the Power Role Swap  Shall  occur during Swap Standby .\nFigure 7.1 Placement of Source Bulk Capacitance\n7.1.3    Types of Sources\nConsistent with the Power Data Object s discussed in Section 6.4.1, \"Capabilities Message\" , the power supply types \nthat are available as Source s in a USB Power Delivery System are:\n The Fixed Supply  PDO exposes well-regulated fixed voltage power supplies. Source s Shall  support at \nleast one Fixed Supply  capable of supplying vSafe5V . The output voltage of a Fixed Supply  Shall  remain C2Ohmic  \nInterconnect\nGND\nSHIELDVBUS ... Data\nLines\nGND\nSHIELDVBUS...Data\nLinesSOURCE CABLE\nC1Power\nSupply\nSource Bulk CapacitanceOVL"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "6", "title": "Protocol Layer  receives the GoodCRC  Message  from", "page": 343, "level": 1, "parent_id": null, "full_path": "6 Protocol Layer  receives the GoodCRC  Message  from", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 343Table 7.1  Sequence Description for Increasing the Voltage\nStep Source Port Sink Port\n1 Policy Engine  sends the Accept  Message  to the Sink . Policy Engine  receives the Accept  Message .\n2 Protocol Layer  receives the GoodCRC  Message  from \nthe Sink . The Policy Engine  tells the Device Policy \nManager  to instruct the power supply to modify its \noutput power. Protocol Layer  sends the GoodCRC  Message  to the \nSource . Policy Engine  then starts the \nPSTransitionTimer  and evaluates the Accept  \nMessage .\n3 Policy Engine  tells the Device Policy Manager  to \ninstruct the power supply to reduce current drawn \nto iSnkStdby  within tSnkStdby  (t1); t1 Shall  \ncomplete before tSrcTransition . The Sink  Shall Not  \nviolate transient load behavior defined in Section \n7.2.6, \"Transient Load Behavior\"  while transitioning \nto and operating at the new power level.\n4 tSrcTransition  after the GoodCRC Message  was \nreceived, the power supply starts to change its output \npower capability. The power supply Shall  be ready to \noperate at the new power level within tSrcReady  \n(t2). The power supply informs the Device Policy \nManager  that it is ready to operate at the new power \nlevel. The power supply status is passed to the Policy \nEngine.\n5 The Policy Engine  sends the PS_RDY  Message  to the \nSink  starting within tSrcTransReq  of the end of the \nGoodCRC  Message  following the Accept  Message .The Policy Engine  receives the PS_RDY  Message  from \nthe Source .\n6 Protocol Layer  receives the GoodCRC  Message  from \nthe Sink .Protocol Layer  sends the GoodCRC  Message  to the \nSource . Policy Engine  then stops the \nPSTransitionTimer , evaluates the PS_RDY  Message  \nfrom the Source  and tells the Device Policy Manager  \nthat the Source  is operating at the new (A)PDO .\nIf the PS_RDY  Message  is not received before \nPSTransitionTimer times out the Sink  sends Hard \nReset  Signaling .\n7 The Sink  May  begin operating at the new power level \nany time after evaluation of the PS_RDY  Message . \nThis time duration is indeterminate.\n8 The Sink  Shall Not  violate the transient load \nbehavior defined in Section 7.2.6, \"Transient Load \nBehavior\"  while transitioning to and operating at the \nnew power level. The time duration (t3) depends on \nthe magnitude of the load change.\n\nPage 344 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-107.3.1.1.1.2   Increasing the Voltage and Current\nThe interaction of the System Policy , Device Policy , and power supply that Shall  be followed when changing from \none (A)PDO  to another while increasing the voltage and current is shown in Figure 7.23, \"Transition Diagram for \nIncreasing the Voltage and Current\" . The sequence that Shall  be followed is described in Table 7.2, \"Sequence \nDiagram for Increasing the Voltage and Current\" . The timing parameters that Shall  be followed are listed in \nTable 7.23, \"Source Electrical Parameters\" , Table 7.24, \"Sink Electrical Parameters\" , and Table 7.25, \"Common \nSource/Sink Electrical Parameters\" .\nNote: In Figure 7.23, \"Transition Diagram for Increasing the Voltage and Current\" , the Sink  has previously sent \na Request  Message  to the Source .\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 345Figure 7.23 Transition Diagram for Increasing the Voltage and Current\nt3\nSource V OLD Source VNEWSource\n× V × I4Source Port\nPolicy Engine\nSink Port\nPolicy Engine\nSource Port\nDevice Policy Mgr\nSource Port\nPower SupplyPort to Port \nMessaging\nSource Port \nInteraction\nSink Port \nInteraction\nSource \nVBUSVoltage\nSink \nVBUSCurrentSend\nAccept\nEvaluate\nAcceptSend\nPS_RDY\nEvaluate\nPS_RDY1\n25\n6PSTransitionTimertSrcTransition\nGood \nCRCtSrcTransReq\nGood \nCRC\n6LQN\u0003\u0003,1(: Sink \u0003I OLD\nIOLD\u0003INEWSink to Sink \nStandby\nSink iSnkStdBySink Standby \nto Sink\nVOLDVNEW37\nI1§...8\nSink PortDevice Policy Mgr\nSink Port\nPower Supply\nSource Port\nVoltage\nSink Port\nCurrent\nI1  iSnkStdBy + cSnkBulkPd( V\nBUS/t )t2\nt1\n\nPage 346 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10Table 7.2  Sequence Diagram for Increasing the Voltage and Current\nStep Source Port Sink Port\n1 Policy Engine  sends the Accept  Message  to the Sink . Policy Engine  receives the Accept .\n2 Protocol Layer  receives the GoodCRC  Message  from \nthe Sink . The Policy Engine  tells the Device Policy \nManager  to instruct the power supply to modify its \noutput power. Protocol Layer  sends the GoodCRC  Message  to the \nSource . Policy Engine  then starts the \nPSTransitionTimer  and evaluates the Accept \nMessage .\n3 Policy Engine  tells the Device Policy Manager  to \ninstruct the power supply to reduce current drawn \nto iSnkStdby  within tSnkStdby  (t1); t1 Shall  \ncomplete before tSrcTransition . The Sink  Shall Not  \nviolate transient load behavior defined in Section \n7.2.6, \"Transient Load Behavior\"  while transitioning \nto and operating at the new power level.\n4 tSrcTransition  after the GoodCRC Message  was \nreceived, the power supply starts to change its output \npower capability. The power supply Shall  be ready to \noperate at the new power level within tSrcReady  \n(t2). The power supply informs the Device Policy \nManager  that it is ready to operate at the new power \nlevel. The power supply status is passed to the Policy \nEngine. \n5 The Policy Engine  sends the PS_RDY  Message  to the \nSink  starting within tSrcTransReq  of the end of the \nGoodCRC  Message  following the Accept  Message .The Policy Engine  receives the PS_RDY  Message  from \nthe Source .\n6 Protocol Layer  receives the GoodCRC  Message  from \nthe Sink .Protocol Layer  sends the GoodCRC  Message  to the \nSource . Policy Engine  then stops the \nPSTransitionTimer , evaluates the PS_RDY  Message  \nfrom the Source  and tells the Device Policy Manager  \nthat the Source  is operating at the new (A)PDO .\nIf the PS_RDY  Message  is not received before \nPSTransitionTimer times out, the Sink  sends Hard \nReset  Signaling .\n7 The Sink  May  begin operating at the new power level \nany time after evaluation of the PS_RDY  Message . \nThis time duration is indeterminate.\n8 The Sink  Shall Not  violate the transient load \nbehavior defined in Section 7.2.6, \"Transient Load \nBehavior\"  while transitioning to and operating at the \nnew power level. The time duration (t3) depends on \nthe magnitude of the load change.\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 3477.3.1.1.1.3   Increasing the Voltage and Decreasing the Current\nThe interaction of the System Policy , Device Policy , and power supply that Shall  be followed when changing from \none (A)PDO  to another while increasing the voltage and decreasing the current is shown in Figure 7.24, \"Transition \nDiagram for Increasing the Voltage and Decreasing the Current\" . The sequence that Shall  be followed is described \nin Table 7.3, \"Sequence Description for Increasing the Voltage and Decreasing the Current\" . The timing parameters \nthat Shall  be followed are listed in Table 7.23, \"Source Electrical Parameters\" , Table 7.24, \"Sink Electrical \nParameters\" , and Table 7.25, \"Common Source/Sink Electrical Parameters\" .\nNote: In Figure 7.24, \"Transition Diagram for Increasing the Voltage and Decreasing the Current\" , the Sink  has \npreviously sent a Request  Message  to the Source .\n\nPage 348 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10Figure 7.24 Transition Diagram for Increasing the Voltage and Decreasing the Current\nt3\n t1\nSource V OLD Source VNEWSource\n× V ØI4Source Port\nPolicy Engine\nSink Port\nPolicy Engine\nSource Port\nDevice Policy Mgr\nSource Port\nPower SupplyPort to Port \nMessaging\nSource Port \nInteraction\nSink Port \nInteraction\nSource \nVBUSVoltage\nSink \nVBUSCurrentSend\nAccept\nEvaluate\nAcceptSend\nPS_RDY\nEvaluate\nPS_RDY1\n25\n6PSTransitionTimertSrcTransition\nGood \nCRCtSrcTransReq\nGood \nCRC\n6LQN\u0003\u0003,1(: Sink \u0003I OLD\nIOLD\nINEW\nI1Sink to Sink \nStandbySink Standby \nto Sink\nSink iSnkStdBy\nVNEW\nVOLD3 7\n...8\nSink PortDevice Policy Mgr\nSink Port\nPower Supply\nSource Port\nVoltage\nSink Port\nCurrent\nI1  iSnkStdBy + cSnkBulkPd( V\nBUS/t )§t2\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 349Table 7.3  Sequence Description for Increasing the Voltage and Decreasing the Current\nStep Source Port Sink Port\n1 Policy Engine  sends the Accept  Message  to the Sink . Policy Engine  receives the Accept  Message .\n2 Protocol Layer  receives the GoodCRC  Message  from \nthe Sink . The Policy Engine  tells the Device Policy \nManager  to instruct the power supply to modify its \noutput power. Protocol Layer  sends the GoodCRC  Message  to the \nSource . Policy Engine  then starts the \nPSTransitionTimer  and evaluates the Accept  \nMessage .\n3 Policy Engine  tells the Device Policy Manager  to \ninstruct the power supply to reduce current drawn \nto iSnkStdby  within tSnkStdby  (t1); t1 Shall  \ncomplete before tSrcTransition . The Sink  Shall Not \nviolate transient load behavior defined in Section \n7.2.6, \"Transient Load Behavior\"  while transitioning \nto and operating at the new power level.\n4 tSrcTransition  after the GoodCRC Message  was \nreceived, the power supply starts to change its output \npower capability. The power supply Shall  be ready to \noperate at the new power level within tSrcReady  \n(t2). The power supply informs the Device Policy \nManager  that it is ready to operate at the new power \nlevel. The power supply status is passed to the Policy \nEngine. \n5 The Policy Engine  sends the PS_RDY  Message  to the \nSink  starting within tSrcTransReq  of the end of the \nGoodCRC  Message  following the Accept  Message .The Policy Engine  receives the PS_RDY Message  from \nthe Source .\n6 Protocol Layer  receives the GoodCRC Message  from \nthe Sink .Protocol Layer  sends the GoodCRC  Message  to the \nSource . Policy Engine  then stops the \nPSTransitionTimer , evaluates the PS_RDY  Message  \nfrom the Source  and tells the Device Policy Manager  \nthat the Source  is operating at the new (A)PDO .\nIf the PS_RDY  Message  is not received before \nPSTransitionTimer times out the Sink  sends Hard \nReset  Signaling .\n7 The Sink  May  begin operating at the new power level \nany time after evaluation of the PS_RDY  Message . \nThis time duration is indeterminate.\n8 The Sink  Shall Not violate the transient load \nbehavior defined in Section 7.2.6, \"Transient Load \nBehavior\"  while transitioning to and operating at the \nnew power level. The time duration (t3) depends on \nthe magnitude of the load change.\n\nPage 350 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-107.3.1.1.1.4   Decreasing the Voltage and Increasing the Current\nThe interaction of the System Policy , Device Policy , and power supply that Shall  be followed when changing from \none (A)PDO  to another while decreasing the voltage and increasing the current is shown in Figure 7.25, \"Transition \nDiagram for Decreasing the Voltage and Increasing the Current\" . The sequence that Shall  be followed is described \nin Table 7.4, \"Sequence Description for Decreasing the Voltage and Increasing the Current\" . The timing parameters \nthat Shall  be followed are listed in Table 7.23, \"Source Electrical Parameters\" , Table 7.24, \"Sink Electrical \nParameters\" , and Table 7.25, \"Common Source/Sink Electrical Parameters\" .\nNote: In Figure 7.25, \"Transition Diagram for Decreasing the Voltage and Increasing the Current\" , the Sink  has \npreviously sent a Request  Message  to the Source .\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 351Figure 7.25 Transition Diagram for Decreasing the Voltage and Increasing the Current\nt2\nSource V OLD Source VNEWSource\nØ V × I3Source Port\nPolicy Engine\nSink Port\nPolicy Engine\nSource Port\nDevice Policy Mgr\nSource Port\nPower SupplyPort to Port \nMessaging\nSource Port \nInteraction\nSink Port \nInteraction\nSource \nVBUSVoltage\nSink \nVBUSCurrentSend\nAccept\nEvaluate\nAcceptSend\nPS_RDY\nEvaluate\nPS_RDY1\n24\n5PSTransitionTimertSrcTransition\nGood \nCRCtSrcTransReq\nGood \nCRC\n6LQN\u0003\u0003,1(: Sink \u0003I OLD\nIOLDINEWVNEWVOLDSink PortDevice Policy Mgr\nSink Port\nPower Supply\nSource Port\nVoltage\nSink Port\nCurrentSink\n× I ...67\nt1\n\nPage 352 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10Table 7.4  Sequence Description for Decreasing the Voltage and Increasing the Current\nStep Source Port Sink Port\n1 Policy Engine  sends the Accept  Message  to the Sink . Policy Engine  receives the Accept  Message .\n2 Protocol Layer  receives the GoodCRC  Message  from \nthe Sink . The Policy Engine  tells the Device Policy \nManager  to instruct the power supply to modify its \noutput power. Protocol Layer  sends the GoodCRC  Message  to the \nSource . Policy Engine  then starts the \nPSTransitionTimer  and evaluates the Accept  \nMessage .\n3 tSrcTransition  after the GoodCRC Message  was \nreceived, the power supply starts to change its output \npower capability. The power supply Shall  be ready to \noperate at the new power level within tSrcReady  \n(t1). The power supply informs the Device Policy \nManager  that it is ready to operate at the new power \nlevel. The power supply status is passed to the Policy \nEngine.\n4 The Policy Engine  sends the PS_RDY  Message  to the \nSink  starting within tSrcTransReq  of the end of the \nGoodCRC  Message  following the Accept  Message .The Policy Engine  receives the PS_RDY  Message  from \nthe Source .\n5 Protocol Layer  receives the GoodCRC  Message  from \nthe Sink .Protocol Layer  sends the GoodCRC  Message  to the \nSource . Policy Engine  then evaluates the PS_RDY  \nMessage  from the Source  and tells the Device Policy \nManager  it is okay to operate at the new power level.\n6 The Sink  May  begin operating at the new power level \nany time after evaluation of the PS_RDY  Message . \nThis time duration is indeterminate.\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 3537.3.1.1.1.5   Decreasing the Voltage\nThe interaction of the System Policy , Device Policy , and power supply that Shall  be followed when changing from \none (A)PDO  to another while decreasing the voltage is shown in Figure 7.26, \"Transition Diagram for Decreasing the \nVoltage\" . The sequence that Shall  be followed is described in Table 7.5, \"Sequence Description for Decreasing the \nVoltage\" . The timing parameters that Shall  be followed are listed in Table 7.23, \"Source Electrical Parameters\" , \nTable 7.24, \"Sink Electrical Parameters\" , and Table 7.25, \"Common Source/Sink Electrical Parameters\" .\nNote: In Figure 7.26, \"Transition Diagram for Decreasing the Voltage\" , the Sink  has previously sent a Request  \nMessage  to the Source .\n\nPage 354 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10Figure 7.26 Transition Diagram for Decreasing the Voltage\nt\nSource V OLDSource\nØ V3\nSource V NEWSource Port\nPolicy Engine\nSink Port\nPolicy Engine\nSource Port\nDevice Policy Mgr\nSource Port\nPower SupplyPort to Port \nMessaging\nSource Port \nInteraction\nSink Port \nInteraction\nSource \nVBUSVoltage\nSink \nVBUSCurrentSend\nAccept\nEvaluate\nAcceptSend\nPS_RDY\nEvaluate\nPS_RDY1\n24\n5PSTransitionTimertSrcTransition\nGood \nCRCtSrcTransReq\nGood \nCRC\nSink \u0003I OLD\nVOLD\nIOLD IOLDVNEWSink PortDevice Policy Mgr\nSink Port\nPower Supply\nSource Port\nVoltage\nSink Port\nCurrent\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 355Table 7.5  Sequence Description for Decreasing the Voltage\nStep Source Port Sink Port\n1 Policy Engine  sends the Accept  Message  to the Sink . Policy Engine  receives the Accept Message .\n2 Protocol Layer  receives the GoodCRC  Message  from \nthe Sink . The Policy Engine  tells the Device Policy \nManager  to instruct the power supply to modify its \noutput power. Protocol Layer  sends the GoodCRC Message  to the \nSource . Policy Engine  then starts the \nPSTransitionTimer  and evaluates the Accept  \nMessage .\n3 tSrcTransition  after the GoodCRC Message  was \nreceived, the power supply starts to change its output \npower capability. The power supply Shall  be ready to \noperate at the new power level within tSrcReady  \n(t1). The power supply informs the Device Policy \nManager  that it is ready to operate at the new power \nlevel. The power supply status is passed to the Policy \nEngine.\n4 The Policy Engine  sends the PS_RDY  Message  to the \nSink  within tSrcTransReq  of the end of the GoodCRC  \nMessage  following the Accept  Message .The Policy Engine  receives the PS_RDY  Message  from \nthe Source .\n5 Protocol Layer  receives the GoodCRC  Message  from \nthe Sink .Protocol Layer  sends the GoodCRC  Message  to the \nSource . Policy Engine  then stops the \nPSTransitionTimer , evaluates the PS_RDY  Message  \nfrom the Source  and tells the Device Policy Manager  \nthat the Source  is operating at the new (A)PDO .\nIf the PS_RDY  Message  is not received before \nPSTransitionTimer times out the Sink  sends Hard \nReset  Signaling .\n\nPage 356 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-107.3.1.1.1.6   Decreasing the Voltage and the Current\nThe interaction of the System Policy , Device Policy , and power supply that Shall  be followed when changing from \none (A)PDO  to another while decreasing the voltage and current is shown in Figure 7.28, \"Transition Diagram for \nno change in Current or Voltage\" . The sequence that Shall  be followed is described in Table 7.6, \"Sequence \nDescription for Decreasing the Voltage and the Current\" . The timing parameters that Shall  be followed are listed in \nTable 7.23, \"Source Electrical Parameters\" , Table 7.24, \"Sink Electrical Parameters\" , and Table 7.25, \"Common \nSource/Sink Electrical Parameters\" .\nNote: In Figure 7.27, \"Transition Diagram for Decreasing the Voltage and the Current\" , the Sink  has previously \nsent a Request  Message  to the Source .\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 357Figure 7.27 Transition Diagram for Decreasing the Voltage and the Current\nt1\nt2Source\nØ V Ø I4\nSource V OLD Source V NEWSource Port\nPolicy Engine\nSink Port\nPolicy Engine\nSource Port\nDevice Policy Mgr\nSource Port\nPower SupplyPort to Port \nMessaging\nSource Port \nInteraction\nSink Port \nInteraction\nSource \nVBUSVoltage\nSink \nVBUSCurrentSend\nAccept\nEvaluate\nAcceptSend\nPS_RDY\nEvaluate\nPS_RDY1\n25\n6PSTransitionTimertSrcTransition\nGood \nCRCtSrcTransReq\nGood \nCRC\nSink \u0003I NEW Sink \u0003I OLD\nIOLD\nINEWSink\nØ I\nVNEWVOLD3\nSink PortDevice Policy Mgr\nSink Port\nPower Supply\nSource Port\nVoltage\nSink Port\nCurrent\n\nPage 358 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10Table 7.6  Sequence Description for Decreasing the Voltage and the Current\nStep Source Port Sink Port\n1 Policy Engine  sends the Accept  Message  to the Sink . Policy Engine  receives the Accept  Message .\n2 Protocol Layer  receives the GoodCRC  Message  from \nthe Sink . The Policy Engine  tells the Device Policy \nManager  to instruct the power supply to modify its \noutput power. Protocol Layer  sends the GoodCRC  Message  to the \nSource . Policy Engine  then starts the \nPSTransitionTimer  and evaluates the Accept  \nMessage .\n3 The Sink  Shall  be able to operate with lower current \nwithin tSnkNewPower  (t1); t1 Shall complete before \ntSrcTransition . The Sink  Shall Not  violate transient \nload behavior defined in Section 7.2.6, \"Transient \nLoad Behavior\"  while transitioning to and operating \nat the new power level.\n4 tSrcTransition  after the GoodCRC Message  was \nreceived, the power supply starts to change its output \npower capability. The power supply Shall  be ready to \noperate at the new power level within tSrcReady  \n(t2). The power supply informs the Device Policy \nManager  that it is ready to operate at the new power \nlevel. The power supply status is passed to the Policy \nEngine.\n5 The Policy Engine  sends the PS_RDY  Message  to the \nSink  starting within tSrcTransReq  of the end of the \nGoodCRC  Message  following the Accept  Message .The Policy Engine  receives the PS_RDY  Message  from \nthe Source .\n6 Protocol Layer  receives the GoodCRC  Message  from \nthe Sink .Protocol Layer  sends the GoodCRC  Message  to the \nSource . Policy Engine  then stops the \nPSTransitionTimer , evaluates the PS_RDY  Message  \nfrom the Source  and tells the Device Policy Manager  \nthat the Source  is operating at the new (A)PDO .\nIf the PS_RDY  Message  is not received before \nPSTransitionTimer times out the Sink  sends Hard \nReset  Signaling .\n7 The Sink  Shall Not  violate the transient load \nbehavior defined in Section 7.2.6, \"Transient Load \nBehavior\"  while transitioning to and operating at the \nnew power level.\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 3597.3.1.1.1.7   No change in Current or Voltage\nThe interaction of the System Policy , Device Policy , and power supply that Shall  be followed when changing from \none (A)PDO  to another while the Sink  requests the same voltage and Current as it is currently operating at is shown \nin Figure 7.28, \"Transition Diagram for no change in Current or Voltage\" . The sequence that Shall  be followed is \ndescribed in Table 7.7, \"Sequence Description for no change in Current or Voltage\" . The timing parameters that Shall  \nbe followed are listed in Table 7.23, \"Source Electrical Parameters\" , Table 7.24, \"Sink Electrical Parameters\" , and \nTable 7.25, \"Common Source/Sink Electrical Parameters\" .\nNote: In Figure 7.28, \"Transition Diagram for no change in Current or Voltage\" , the Sink  has previously sent a \nRequest  Message  to the Source .\n\nPage 360 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10Figure 7.28 Transition Diagram for no change in Current or Voltage\nTable 7.7  Sequence Description for no change in Current or Voltage\nStep Source Port Sink Port\n1 Policy Engine  sends the Accept Message  to the Sink . Policy Engine  receives the Accept  Message .\n2 Protocol Layer  receives the GoodCRC  Message  from \nthe Sink .Protocol Layer  sends the GoodCRC  Message  to the \nSource . Policy Engine  then starts the \nPSTransitionTimer  and evaluates the Accept  \nMessage .\n3 The Policy Engine  waits tSrcTransition  then sends \nthe PS_RDY  Message  to the Sink  starting within \ntSrcTransReq  of the end of the GoodCRC  Message  \nfollowing the Accept  Message .Policy Engine  receives the PS_RDY  Message .\n4 Policy Engine  receives the GoodCRC  Message  from \nthe Sink .\nNote: The decision that no power transition is re -\nquired could be made either by the Device Pol -\nicy Manager  or the power supply depending \non implementation.Protocol Layer  sends the GoodCRC Message  to the \nSource . Policy Engine  evaluates the PS_RDY  Message .Source Port\nPolicy Engine\nSink PortPolicy Engine\nSource PortDevice Policy Mgr\nSource Port\nPower Supply\nSink PortDevice Policy Mgr\nSink Port\nPower Supply\nSource PortVoltage\nSink Port\nCurrentSink \u0003I OLD\nVBUS doesn’t changeSource V OLD\nCurrent doesn’t changePort to Port \nMessaging\nSource Port \nInteraction\nSink Port \nInteraction\nSource \nVBUS Voltage\nSink \nVBUS CurrentSend\nAccept\nEvaluate\nAcceptSend\nPS_RDY\nEvaluate\nPS_RDY1\n23\n4PSTransitionTimertSrcTransition\nGood \nCRCGood \nCRCtSrcTransReq\nVold Source V OLD"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "8.1", "title": "Overview", "page": 416, "level": 2, "parent_id": "8", "full_path": "8.1 Overview", "tags": [], "content": "Page 416 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-108  Device Policy\n8.1   Overview\nThis section describes the Device Policy  and Policy Engine  that implements it. For an overview of the architecture and \nhow the Device Policy Manager  fits into this architecture, please see Section 2.6, \"Architectural Overview\" .\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 4178.2   Device Policy Manager\nThe Device Policy Manager  is responsible for managing the power used by one or more USB Power Delivery ports. \nIn order to have sufficient knowledge to complete this task it needs relevant information about the device it resides \nin. Firstly, it has a priori knowledge of the device including the Capabilities  of the power supply and the receptacles \non each Port  since these will for example have specific current ratings. It also has to know information from the \nUSB-C® Port Control  module regarding cable insertion, type and rating of cable etc. It also has to have information \nfrom the power supply about changes in its Capabilities  as well as being able to request power supply changes. \nWith all of this information the Device Policy Manager  is able to provide up to date information regarding the \nCapabilities  available to a specific Port  and to manage the power resources within the device.\nWhen working out the Capabilities  for a given Source Port  the Device Policy Manager  will take into account firstly \nthe current rating of the Port 's receptacle and whether the inserted cable is PD or non-PD rated and if so, what is \nthe capability of the plug. This will set an upper bound for the Capabilities  which might be offered. After this the \nDevice Policy Manager  will consider the available power supply resources since this will bound which voltages and \ncurrents might be offered. Finally, the Device Policy Manager  will consider what power is currently allocated to \nother ports, which power is in the Power Reserve and any other amendments to Policy from the System Policy \nManager . The Device Policy Manager  will offer a set of Capabilities  within the bounds detailed above.\nWhen selecting a capability for a given Sink Port  the Device Policy Manager  will look at the Capabilities  offered by \nthe Source . This will set an upper bound for the Capabilities  which might be requested. The Device Policy Manager  \nwill also consider which Capabilities  are required by the Sink  in order to operate. If an appropriate match for \nvoltage and Current can be found within the limits of the receptacle and cable, then this will be requested from the \nSource . If an appropriate match cannot be found then a request for an offered voltage and current will be made, \nalong with an indication of a Capabilities Mismatch .\nUSB PD defines two types of power sources:\n Predefined voltage sources ( Fixed Supply , Variable Supply  and Battery Supply ) \n Programmable voltage sources:\n Programmable Power Supply (PPS)\n Adjustable Voltage Supply  (AVS)\nThe first are generally used for classic charging wherein the Charger  electronics reside inside the Sink . The Device \nPolicy Manager  in the Sink  requests a fixed voltage from the list of PDOs offered by the Source  and which is \nconverted internally to charge the Sink 's Battery  and/or power its function. \nThe second moves the Charger  electronics that manage the voltage control outside the Sink  and back into the \nSource  itself. When in SPR PPS Mode , the Device Policy Manager  in the Sink  requests a specific voltage with a 20mV \naccuracy and sets a current limit. Unlike traditional USB where Sink s are responsible for limiting the current, they \nconsume, the SPR PPS  Source  limits the current to what the Sink  has requested. When operating in, the Device Policy \nManager  in the Sink  requests a specific voltage with a 100mV accuracy and requests a maximum current it is \nallowed to draw. \nNote: The AVS Source s unlike SPR PPS  Source s do not support current limit mode. A Sink  operating in is respon -\nsible not to draw more current than it requests.\nThe process to request power is the same for both types of power Source s although the actual format and contents \nof the request are slightly different. The primary operational differences are:\n A Sink  that is using SPR PPS  is required to periodically sent requests to let the Source  know it is still alive \nand communicating. When this communication fails a Hard Reset  results.\n A Sink  operating in SPR Mode  has no special timing requirements.\n A Sink  operating in EPR Mode  is required to periodically communicate with the Source  to let it know it \nis still operational. If the communication fails, a Hard Reset  results.\nFor Dual-Role Power Port s the Device Policy Manager  manages the functionality of both a Source  and a Sink . In \naddition, it is able to manage the Power Role Swap  process between the two. In terms of power management this"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "9.1", "title": "Overview", "page": 975, "level": 2, "parent_id": "9", "full_path": "9.1 Overview", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 9759  States and Status Reporting\n9.1   Overview\nThis chapter describes the Status reporting mechanisms for devices with data connections (e.g., D+/D- and or \nSSTx+/- and SSRx+/-). It also describes the corresponding USB state a device that supports USB PD Shall  transition \nto as a result of changes to the USB PD state that the device is in. \nThis chapter does not define the System Policy  or the System Policy Manager . That is defined in [UCSI] . In addition, \nthe Policies themselves are not described here; these are left to the implementers of the relevant products and \nsystems to define.\nAll PD Capable USB (PDUSB) Device s Shall  report themselves as self-powered devices (over USB) when plugged \ninto a PD capable Port  even if they are entirely powered from VBUS. However, there are some differences between \nPD and [USB 2.0]  / [USB 3.2] ; for example, the presence of VBUS alone does not mean that the device ( Consumer ) \nmoves from the USB Attached State  to the USB Powered State . Similarly, the removal of VBUS alone does not move \nthe device ( Consumer ) from any of the USB states to the USB Attached State . See Section 9.1.2, \"Mapping to USB \nDevice States\"  for details.\nPDUSB Device s Shall  follow the PD requirements when it comes to suspend (see Section 6.4.1.2.1.2, \"USB Suspend \nSupported\" ), configured, and operational power. The PD requirements when the device is configured or \noperational are defined in this section (see Table 9.4, \"PD Consumer Port Descriptor\" ). \nNote: The power requirements reported in the PD Consumer  Port  descriptor of the device Shall  override the \npower draw reported in the bMaxPower field in the configuration descriptor. A PDUSB Device  Shall  \nreport zero in the bMaxPower field after successfully negotiating a mutually agreeable Explicit Contract  \nand Shall  disconnect and re-enumerate when it switches operation back to operating in standard [USB \n2.0] , [USB 3.2] , [USB4] , [USB Type-C 2.4]  or [USBBC 1.2] . When operating in [USB 2.0] , [USB 3.2] , [USB \nType-C 2.4]  or [USBBC 1.2]  mode it Shall  report its power draw via the bMaxPower field.\nEach Provider  and Consumer  will have their own Local Policies which operate between Port Partner s. An example \nof a typical PD system is shown in Figure 9.1, \"Example PD Topology\" . This example consists of a Provider , \nConsumer/Provider s and Consumer s connected together in a tree topology. Between directly connected devices \nthere is both a flow of Power and also Communication consisting of both Status and Control information.\n\nPage 976 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10Figure 9.1 Example PD Topology\nConsumer ConsumerConsumer/\nProviderConsumer/\nProviderProviderAC/Battery\nAC/BatteryPower\nPD Communication\nP/C P/C P/CP/C Provider/Consumer\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 977Figure 9.2, \"Mapping of PD Topology to USB\"  shows how this same topology can be mapped to USB.\nFigure 9.2 Mapping of PD Topology to USB\nDevice Device DeviceRoot HubAC/Battery\nAC/BatteryPower\nPD Communication\nHub\n\nPage 978 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10In a USB based system, policy is managed by the host and communication of system level policy information is via \nstandard USB data line communication. This is a separate mechanism to the USB Power Delivery VBUS protocol \nwhich is used to manage Local Policy . When USB Communication is used, status information and control requests \nare passed directly between the System Policy Manager  (SPM ) on the host and the Provider  or Consumer . See Figure \n9.3, \"Use of SPM in the PD System\" .\nFigure 9.3 Use of SPM in the PD System\nStatus information comes from a Provider  or Consumer  to the SPM  so it can better manage the resources on the host \nand provide feedback to the end user.\nReal systems will be a mixture of devices which in terms of power management support might have implemented \nPD, [USB 2.0] , [USB 3.2] , [USB4] , [USB Type-C 2.4]  or [USBBC 1.2]  or they might even just be non-compliant \n“power sucking devices”. The level of communication of system status to the SPM  will therefore not necessarily be \ncomprehensive. The aim of the status mechanisms described here is to provide a mechanism whereby each \nconnected entity in the system provides as much information as possible on the status of itself.\nInformation described in this section that is communicated to the SPM  is as follows:\n Versions of USB Type-C®, PD and BC supported.\n Capabilities as a Provider/Consumer .\n Current operational state of each Port  e.g. Standard, USB Type-C  Current, BC, PD and Negotiated  power \nlevel.\n Status of AC or Battery  Power for each PDUSB Device  in the system.\nThe SPM  can Negotiate  with Provider s or Consumer s in the system in order to request a different Local Policy , or to \nrequest the amount of power to be delivered by the Provider  to the Consumer . Any change in Local Policy  could Device Device DeviceHost\n(SPM)AC/Battery\nAC/BatteryPower\nPD Communication\nUSB Communication\nHub"}
{"doc_title": "USB_PD_R3_2 V1.1 2024-10.pdf", "section_id": "10.2", "title": "Source Power Rules", "page": 995, "level": 2, "parent_id": "10", "full_path": "10.2 Source Power Rules", "tags": [], "content": "Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 99510  Power Rules\n10.1   Introduction\nThe flexibility of power provision on USB Type-C® is expected to lead to power adapter re-use and the increasingly \nwidespread provision of USB power outlets in domestic and public places and in transport of all kinds. \nEnvironmental considerations could result in unbundled power adapters. Rules are needed to avoid \nincompatibility between the Source s and the Sinks they are used to power, in order to avoid user confusion and to \nmeet user expectations. This section specifies a set of rules that Source s and Sink s Shall  follow. These rules provide \na simple and consistent user experience. \nThe PDP Rating  is a manufacturer declared value placed on packaging to help the user understand the capabilities \nof a Charger  or the size of Charger  required to power their device. For PDP values of 10W and above the PDP Shall  \nbe declared as an integer number of Watts. For PDP values less than 10W, the PDP Shall  be declared in increments \nof 0.5W.\nThe Source  Power Rules  define a PDP  to provide a simple way to tell the user about the capabilities of their power \nadapter or device. PDP Rating  is akin to the wattage rating of a light bulb - bigger numbers mean more capability. \nThe Sink Power Rules  define a PDP to provide a simple way to tell the user which Source s will provide adequate \npower for their Sink .\n10.2   Source Power Rules\nThe Source  Power Rules  defined in this section include both Normative  and Optional  rules. For all of the defined \nrules, the capabilities a Source  exposes are based on the Port Maximum PDP , or if power constrained, the Port \nPresent PDP  of the Port .\nFor a Guaranteed Capability Port , the Source  Shall  always include in every Source_Capabilities  or \nEPR_Source_Capabilities Message  sent to a Sink  all the (A)PDO s that are defined by the Normative  (and Optional  \nwhen implemented) rules based on the Port ’s Port Maximum PDP  and Mode  of operation (i.e., SPR Mode  or EPR \nMode ).\nFor a Managed Capability Port , except before the First Explicit Contract  or before the Explicit Contract  after the Port \nPresent PDP  changes on a Shared Capacity Charger  Port , the Source  Shall  always include in every \nSource_Capabilities  or EPR_Source_Capabilities Message  sent to a Sink  all the (A)PDO s that are defined by the \nNormative  (and Optional  when implemented) rules based on the Port ’s Port Present PDP  and Mode  of operation \n(i.e., SPR Mode  or EPR Mode ). After the First Explicit Contract , this requirement assures that the attached Sink  will \nalways know what voltages (or voltage modes) are presently available from the Source .\nIn order to meet the expectations of the user, the Maximum Current/Power in the Source Capabilities  PDO or APDO  \nfor Source s with a PDP Rating  of x Watts Shall  be as follows:\n Maximum current for Normative  and Optional  Fixed Supply /Variable Supply  PDOs Shall  be either \nRoundUp(x/voltage) or RoundDown(x/voltage) to the nearest 10mA.\n Maximum current for SPR Programmable Power Supply APDO s Shall  be as defined in Table 10.10, \"SPR \nProgrammable Power Supply PDOs and APDOs based on the Port Maximum PDP\" .\nNote: When the Constant Power bit is set in the APDO , the programmable power supply's output current is as \ndefined in Table 10.10, \"SPR Programmable Power Supply PDOs and APDOs based on the Port Maximum \nPDP\"  however the programmable power supply will limit its output current so that the product of its \nactual output voltage times the output current does not exceed the PDP.\n If a 9V Prog, 15V Prog or 20V Prog Programmable Power Supply APDO  is Advertised when not required \nby Table 10.10, \"SPR Programmable Power Supply PDOs and APDOs based on the Port Maximum PDP\" , \nthen the maximum current Shall  be RoundDown (x/Prog Voltage) to the nearest 50mA. When the PPS \nPower Limited bit is clear the Source  Shall  provide this current at Maximum Voltage .\n Maximum power for Optional  Battery Supply  PDOs Shall  be ≤ x.\n\nPage 996 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-1010.2.1   Source Power Rule Considerations\nThe Source  Power Rules  are designed to:\n Ensure the PDP Rating  (PDP) of an adapter specified in watts explicitly defines the voltages and \ncurrents at each voltage the adapter supports.\n Ensure that adapters with a large PDP Rating s are always capable of providing the power to devices \ndesigned for use with adapters with a smaller PDP Rating .\n Enable an ecosystem of adapters that are inter-operable with the devices in the ecosystem.\nThe considerations that lead to the Source  Power Rules  are based are summarized in Table 10.1, \"Considerations for \nSources\" .\nTable 10.1  Considerations for Sources\nConsiderations Rationale Consequence\nSimple to identify capabilityA user going into an electronics retailer \nknows what they needCannot have a complex identification \nscheme \nHigher power Source s are a superset of \nsmaller onesBigger is always better in user’s eyes – don’t \nwant a degradation in performanceHigher power Source s do everything smaller \nones do\nUnambiguous Source  definitionsSource s with the same power rating but \ndifferent VI combinations might not inter-\noperateTo avoid user confusion, any given power \nrating has a single definition\nA range of power ratingsUsers and companies will want freedom to \npick appropriate Source  ratingsFixed profiles at specific power levels don’t \nprovide adequate flexibility, e.g., profiles as \ndefined in previous versions of PD.\n5V@3A USB Type-C  Source  is defined by \n[USB Type-C 2.4]5V@3A USB Type-C  Source  is consideredAll > 15W adapters must support 5V@3A or \nsuperset consideration is violated\nMaximize 3A cable utilization 3A cables will be ubiquitousIncrease to maximum voltage (20V) before \nincreasing current beyond 3A\nOptimize voltage rail countMore rails are a higher burden for Source s, \nparticularly in terms of testing5V is a basic USB requirement. 48V provides \nthe maximum capability. \nSome Source s are not able to provide \nsignificant powerSome small Battery -operated Source s e.g., \nmobile devices, are able to provide more \npower directly from their Battery  than from \na regulated 5V supplyIn addition to the minimal 5V \nAdvertise ments are able to Advertise  more \npower from their Battery\nSome Source s share power between \nmultiple Ports ( Hub s and multi- Port  \nCharger s)Hub s and multi-port Charger s have to be \nsupportedSee Section 10.3, \"Sink Power Rules\"\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 99710.2.2   Normative Voltages and Currents\nThe voltages and currents an SPR Source  with a PDP Rating  of x Watts Shall  support are as defined in Table 10.2, \n\"SPR Normative Voltages and Minimum Currents\" .\nTable 10.2  SPR Normative Voltages and Minimum Currents\nPort Maximum \nPDP Rating (W)5V Fixed 9V Fixed 15V Fixed 20V Fixed SPR AVS\n0.5 ≤ x ≤ 15 (PDP/5)A3 - - - -\n15 < x ≤ 27 3A2(PDP/9)A3 - - -\n27 < x ≤ 45 3A23A2(PDP/15)A3-(9V – 15V):\n (15V Fixed Supply  Max Current) A\n45 < x ≤ 60 3A23A23A2(PDP/20)A3(9V – 15V):\n (15V Fixed Supply  Max Current) A4\n(15V – 20V):\n (20V Fixed Supply  Max Current) A\n60 < x ≤ 100 3A23A23A2(PDP/20)A1, 3(9V – 15V):\n (15V Fixed Supply  Max Current) A4, 5\n(15V – 20V):\n (20V Fixed Supply  Max Current) A1, 5\n1) Requires a 5A cable.\n2) The Fixed Supply  PDOs Maximum Current field Shall  Advertise  at least 3A, but May  Advertise  up to RoundUp ( PDP/voltage) to the \nnearest 10mA. Requires a 5A cable if over 3A is Advertise d.\n3) The Fixed Supply  PDOs Maximum Current field Shall  Advertise  either RoundDown ( PDP/voltage) or RoundUp ( PDP/voltage) to the \nnearest 10mA.\n4) SPR AVS  current for this voltage range is the maximum current as Advertise d by the 15V Fixed Supply  PDO. This current can be higher \nthan 3A (refer to Note 2 ). Requires a 5A cable if over 3A is Advertise d.\n5) The Sink  is allowed to request up to the 20V Fixed Supply  Max Current when the requested voltage is 15.0V.\n\nPage 998 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10SPR Managed Capability Port s when power constrained are defined to offer Valid  (A)PDO s based on  the port's Port \nMaximum PDP  (as per Table 10.2, \"SPR Normative Voltages and Minimum Currents\" ) at lower Port Present PDP  \n(as per Table 10.3, \"SPR Source Capabilities When Port Present PDP is less than Port Maximum PDP\" ) because these \nvoltages would otherwise be available if the Managed Capability Port  power hadn't been constrained.\nTable 10.3  SPR Source Capabilities When Port Present PDP is less than Port Maximum PDP\nPort Present \nPDP (W)5V Fixed 9V Fixed 15V Fixed 20V Fixed SPR AVS with Max Voltage of 15V or \n20V per Table 10.26\n5 < x ≤ 15 (PDP/5)A3(PDP/9)A3,7, 8(PDP/15)A3,7,8(PDP/20)A3,7,8(9V – 15V):\n (15V Fixed Supply  Max Current) A4, 6, 8\n(15V – 20V):\n (20V Fixed Supply  Max Current) A6,8\n15 < x ≤ 27 3A2(PDP/9)A3(PDP/15)A3,7\n(PDP/20)A3,7(9V – 15V):\n (15V Fixed Supply  Max Current) A4\n(15V – 20V):\n (20V Fixed Supply  Max Current) A627 < x ≤ 45 3A23A2(PDP/15)A3\n45 < x ≤ 60 3A23A23A2(PDP/20)A3(9V – 15V):\n (15V Fixed Supply  Max Current) A4\n(15V – 20V):\n (20V Fixed Supply  Max Current) A\n60 < x ≤ 100 3A23A23A2(PDP/20)A1, 3(9V – 15V):\n (15V Fixed Supply  Max Current) A4, 5\n(15V – 20V):\n (20V Fixed Supply  Max Current) A1, 5\n1) Requires a 5A cable.\n2) The Fixed Supply  PDOs Maximum Current field Shall  Advertise  at least 3A, but May  Advertise  up to RoundUp ( PDP/voltage) to the \nnearest 10mA. Requires a 5A cable if over 3A is Advertise d.\n3) The Fixed Supply  PDOs Maximum Current field Shall  Advertise  either RoundDown ( PDP/voltage) or RoundUp ( PDP/voltage) to the \nnearest 10mA.\n4) SPR AVS  current for this voltage range is the maximum current as Advertise d by the 15V Fixed Supply  PDO. This current can be higher \nthan 3A (refer to Note 2 ). Requires a 5A cable if over 3A is Advertise d.\n5) The Sink  is allowed to request up to the 20V Fixed Supply  Max Current when the requested voltage is 15.0V.\n6) The Max Voltage for SPR AVS  is what is allowed by Table 10.2, \"SPR Normative Voltages and Minimum Currents\"  based on the port's \nPort Maximum PDP .\n7) This SPR Fixed Supply  voltage is only available if allowed by Table 10.2, \"SPR Normative Voltages and Minimum Currents\"  based on the \nport's Port Maximum PDP .\n8) SPR Source s May offer (A)PDO s at this Port Present PDP\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 999In reference to Table 10.3, \"SPR Source Capabilities When Port Present PDP is less than Port Maximum PDP\" , \nTable 10.4, \"SPR Source Port Present PDP less than Port Maximum PDP Examples\"  gives examples of which SPR \ncapabilities are Advertised based on Port Present PDP  on a Managed Capability Port  and the port's Port Maximum \nPDP  and cable's current rating.\nTable 10.4  SPR Source Port Present PDP less than Port Maximum PDP Examples\nPort Maximum PDP \nand Cable RatingPort Present \nPDPOffers\n5V Fixed 9V Fixed 15V Fixed 20V Fixed SPR AVS\n80W / 5A 65W 3A13A13A1 3.25A9V – 15V: 3A\n15V – 20V: 3.25A\n80W / 5A 40W 3A13A1 2.67A 2A9V – 15V: 2.67A\n15V – 20V: 2A\n80W / 3A 40W 3A1 3A 2.67A 2A9V – 15V: 2.67A\n15V – 20V: 2A\n40W / 5A 40W 3A13A1 2.67A Not Offered 9V – 15V: 2.67A\n40W / 3A 40W 3A1 3A 2.67A Not Offered 9V – 15V: 2.67A\n80W / 5A 20W 3A1 2.22A 1.33A 1A9V – 15V: 1.33A\n15V – 20V: 1A\n80W / 3A 20W 3A1 2.22A 1.33A 1A9V – 15V: 1.33A\n15V – 20V: 1A\n40W / 5A 20W 3A1 2.22A 1.33A Not Offered 9V – 15V: 1.33A\n40W / 3A 20W 3A1 2.22A 1.33A Not Offered 9V – 15V: 1.33A\n80W/3A 15W 3A 1.67A21A20.75A29V - 15V: 1A2\n15V - 20V: 0.75A2\n40W/3A 15W 3A 1.67A21A2 Not offered 9V - 15V: 1A2\n1) The Fixed Supply  PDO Maximum Current field will Advertise  at least 3A but May  Advertise  up to RoundUp ( PDP /voltage) to the \nnearest 10mA.\n2) These Capabilities  are not required but may be offered at this Port Present PDP .\n\nPage 1000 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-1010.2.2.1   Fixed Supply PDOs\nFigure 10.1, \"SPR Source Power Rule Illustration for Fixed Supply PDOs\"  illustrates the minimum current that an SPR \nSource  Shall  support at each voltage for a given PDP Rating  for Fixed Supply  PDOs.\nNote: Not illustrated are that currents higher than 3A are allowed to be offered up to a limit of 5A given that a \n5A cable is detected by the Source  and the voltage times current remains within the Source  PDP Rating .\nFigure 10.1 SPR Source Power Rule Illustration for Fixed Supply PDOs\nFigure 10.2, \"SPR Source Power Rule Example For Fixed Supply PDOs\"  shows an example of an adapter with a rating \nat 50W. The adapter is required to support 20V at 2.5A, 15V at 3A, 9V at 3A and 5V at 3A.0123456\n01 02 0 30 40 50 60 70 80 90 1005V9V\n15V5 + 9V 5 + 9 + 15V\n20V7.5W\n15W\n27W\n45W\nSource PDP Rating (W)Current (A)\nRP1 RP220V\n5 + 9 + 15V\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 1001Figure 10.2 SPR Source Power Rule Example For Fixed Supply PDOs\nTable 10.5, \"Fixed Supply PDO - Source 5V\" , Table 10.6, \"Fixed Supply PDO - Source 9V\" , Table 10.7, \"Fixed Supply PDO \n- Source 15V\"  and Table 10.8, \"Fixed Supply PDO - Source 20V\"  show the Fixed Supply  PDOs that Shall  be supported \nfor each of the Normative  voltages defined in Table 10.2, \"SPR Normative Voltages and Minimum Currents\" .\nTable 10.5  Fixed Supply PDO - Source 5V\nBit(s) Description\nB31…30 Fixed Supply\nB29 Dual-Role Power\nB28 USB Suspend Supported\nB27 Unconstrained Power\nB26 USB Communications Capable\nB25 Dual-Role Data\nB24 Unchunked Extended Messages Supported\nB23 EPR Capable\nB22 Reserved  – Shall  be set to zero.\nB21…20 Peak Current\nB19…10 5V\nB9...0Current based on PDP\nPDP Rating (x) Current (A)\n0.5 ≤ x ≤ 15 x ÷ 5\n15 < x ≤ 25 3 ≤ A ≤ x ÷ 5\n25 < x ≤ 100 3 ≤ A ≤ 5 0123456\n01 02 0 30 40 50 60 70 80 90 1005V9V\n15V5 + 9V 5 + 9 + 15V\n20V7.5W\n15W\n27W\n45W\nSource PDP Rating (W)Current (A)\nRP1 RP2\n50W20V\n5 + 9 + 15V\n\nPage 1002 Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10More current May  be offered in the PDOs when Optional  voltages/currents are supported and a 5A cable is being \nused (see Section 10.2.3, \"Optional Voltages/Currents\" ).Table 10.6  Fixed Supply PDO - Source 9V\nBit(s) Description\nB31…30 Fixed Supply  \nB29...22 Reserved  – Shall  be set to zero.\nB21…20 Peak Current\nB19…10 9V\nB9...0Current based on PDP\nPDP Rating (x) Current (A)\n0.5 ≤ x ≤ 15 PDO not required\n15 < x ≤ 27 x ÷ 9\n27 < x ≤ 45 3 ≤ A ≤ x ÷ 9\n45 < x ≤ 100 3 ≤ A ≤ 5 \nTable 10.7  Fixed Supply PDO - Source 15V\nBit(s) Description\nB31…30 Fixed Supply  \nB29...22 Reserved  – Shall  be set to zero.\nB21…20 Peak Current\nB19…10 15V\nB9...0Current based on PDP\nPDP Rating (x) Current (A)\n0.5 ≤ x ≤ 27 PDO not required\n27 < x ≤ 45 x ÷ 15\n45 < x ≤ 75 3 ≤ A ≤ x ÷ 15\n75 < x ≤ 100 3 ≤ A ≤ 5 \nTable 10.8  Fixed Supply PDO - Source 20V\nBit(s) Description\nB31…30 Fixed Supply\nB29...22 Reserved  – Shall  be set to zero.\nB21…20 Peak Current\nB19…10 20V\nB9...0Current based on PDP\nPDP Rating (x) Current (A)\n0.5 ≤ x ≤ 45 PDO not required\n45 < x ≤ 100 x ÷ 20\n\nUniversal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10 Page 100310.2.2.2   SPR Adjustable Voltage Supply (AVS)\nFor SPR AVS , Figure 10.3, \"Valid SPR AVS Operating Region for a Source advertising in the range of 27W < PDP ≤ 45W\" , \nFigure 10.4, \"Valid SPR AVS Operating Region for a Source advertising in the range of 45W < PDP ≤ 60W\"  and Figure \n10.5, \"Valid SPR AVS Operating Region for a Source advertising in the range of 60W < PDP ≤ 100W\"  illustrate the valid \noperating region for SPR AVS  RDO  requests in the ranges of 27W < PDP ≤ 45W, 45W < PDP ≤ 60W and 60W < PDP ≤ \n100W, respectively.\nFigure 10.3 Valid SPR AVS Operating Region for a Source advertising in the range of 27W < PDP ≤ 45W\nFigure 10.4 Valid SPR AVS Operating Region for a Source advertising in the range of 45W < PDP ≤ 60W\n0123456\n0 1 53 04 56 0RDO Current (A)\nRDO Voltage (V)Invalid Requests\n(Crosshatched Area)\nValid Operating Region\nfor SPR AVS Sink Requests\nfor 27W < PDP ч\u0003ϰϱtValid RDO Requests\n20V  9V\n15V Fixed PDO Max Current15V  \n0123456\n30RDO Current (A)\nRDO Voltage (V)Invalid Requests\n(Crosshatched Area)\nValid Operating Region\nfor SPR AVS Sink Requests\nfor 27W < PDP ч\u0003ϰϱtValid RDO Requests\n20V  9V\n15V Fixed PDO Max Current  15V  \n20V Fixed PDO Max Current(Minimum of 3A)"}
{"doc_title": "USB Power Delivery Specification", "section_id": "7.4", "title": "Electrical Parameters", "page": 404, "level": 2, "parent_id": null, "full_path": "7.4 - Electrical Parameters", "tags": [], "content": "[Content for 7.4 - Electrical Parameters would be extracted from page 404]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "1.5", "title": "Related Documents", "page": 39, "level": 2, "parent_id": null, "full_path": "1.5 - Related Documents", "tags": [], "content": "[Content for 1.5 - Related Documents would be extracted from page 39]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "2.5.2", "title": "Sink Operation", "page": 62, "level": 3, "parent_id": null, "full_path": "2.5.2 - Sink Operation", "tags": [], "content": "[Content for 2.5.2 - Sink Operation would be extracted from page 62]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "2.4", "title": "SOP* Communication", "page": 57, "level": 2, "parent_id": null, "full_path": "2.4 - SOP* Communication", "tags": [], "content": "[Content for 2.4 - SOP* Communication would be extracted from page 57]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "31", "title": "076543210 1 5 1 4 1 3 1 2 1 1 1 0 9 8 2 3 2 2 2 1 2 0 1 9 1 8 1 7 1 6 3 1 3 0 2 9 2 8 2 7 2 6 2 5 2", "page": 4, "level": 1, "parent_id": null, "full_path": "31 - 076543210 1 5 1 4 1 3 1 2 1 1 1 0 9 8 2 3 2 2 2 1 2 0 1 9 1 8 1 7 1 6 3 1 3 0 2 9 2 8 2 7 2 6 2 5 2", "tags": [], "content": "[Content for 31 - 076543210 1 5 1 4 1 3 1 2 1 1 1 0 9 8 2 3 2 2 2 1 2 0 1 9 1 8 1 7 1 6 3 1 3 0 2 9 2 8 2 7 2 6 2 5 2 would be extracted from page 4]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "5.4", "title": "Ordered Sets", "page": 81, "level": 2, "parent_id": null, "full_path": "5.4 - Ordered Sets", "tags": [], "content": "[Content for 5.4 - Ordered Sets would be extracted from page 81]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "6.6", "title": "Timers", "page": 249, "level": 2, "parent_id": null, "full_path": "6.6 - Timers", "tags": [], "content": "[Content for 6.6 - Timers would be extracted from page 249]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "1003", "title": "Figure 10.4 Valid SPR AVS Operating Region for a Source advertising in the range of 45W < PDP ≤ 60W", "page": 1003, "level": 1, "parent_id": null, "full_path": "1003 - Figure 10.4 Valid SPR AVS Operating Region for a Source advertising in the range of 45W < PDP ≤ 60W", "tags": [], "content": "[Content for 1003 - Figure 10.4 Valid SPR AVS Operating Region for a Source advertising in the range of 45W < PDP ≤ 60W would be extracted from page 1003]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "5.6", "title": "Packet Format", "page": 84, "level": 2, "parent_id": null, "full_path": "5.6 - Packet Format", "tags": [], "content": "[Content for 5.6 - Packet Format would be extracted from page 84]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "6.5", "title": "Extended Message", "page": 215, "level": 2, "parent_id": null, "full_path": "6.5 - Extended Message", "tags": [], "content": "[Content for 6.5 - Extended Message would be extracted from page 215]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "6.3", "title": "Control Message", "page": 128, "level": 2, "parent_id": null, "full_path": "6.3 - Control Message", "tags": [], "content": "[Content for 6.3 - Control Message would be extracted from page 128]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "5.9", "title": "Built in Self-Test (BIST)", "page": 113, "level": 2, "parent_id": null, "full_path": "5.9 - Built in Self-Test (BIST)", "tags": [], "content": "[Content for 5.9 - Built in Self-Test (BIST) would be extracted from page 113]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "6.8", "title": "Reset", "page": 268, "level": 2, "parent_id": null, "full_path": "6.8 - Reset", "tags": [], "content": "[Content for 6.8 - Reset would be extracted from page 268]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "5.8.2", "title": "Transmit and Receive Masks", "page": 96, "level": 3, "parent_id": null, "full_path": "5.8.2 - Transmit and Receive Masks", "tags": [], "content": "[Content for 5.8.2 - Transmit and Receive Masks would be extracted from page 96]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "5.5", "title": "Transmitted Bit Ordering", "page": 83, "level": 2, "parent_id": null, "full_path": "5.5 - Transmitted Bit Ordering", "tags": [], "content": "[Content for 5.5 - Transmitted Bit Ordering would be extracted from page 83]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "6.13", "title": "Message Applicability", "page": 300, "level": 2, "parent_id": null, "full_path": "6.13 - Message Applicability", "tags": [], "content": "[Content for 6.13 - Message Applicability would be extracted from page 300]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "1.8", "title": "Changes from Revision 3.0", "page": 52, "level": 2, "parent_id": null, "full_path": "1.8 - Changes from Revision 3.0", "tags": [], "content": "[Content for 1.8 - Changes from Revision 3.0 would be extracted from page 52]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "1.6", "title": "Terms and Abbreviations", "page": 40, "level": 2, "parent_id": null, "full_path": "1.6 - Terms and Abbreviations", "tags": [], "content": "[Content for 1.6 - Terms and Abbreviations would be extracted from page 40]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "2.6", "title": "Architectural Overview", "page": 66, "level": 2, "parent_id": null, "full_path": "2.6 - Architectural Overview", "tags": [], "content": "[Content for 2.6 - Architectural Overview would be extracted from page 66]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "1.4.3", "title": "Numbering", "page": 38, "level": 3, "parent_id": null, "full_path": "1.4.3 - Numbering", "tags": [], "content": "[Content for 1.4.3 - Numbering would be extracted from page 38]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "5.7", "title": "Collision Avoidance", "page": 91, "level": 2, "parent_id": null, "full_path": "5.7 - Collision Avoidance", "tags": [], "content": "[Content for 5.7 - Collision Avoidance would be extracted from page 91]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "01010101", "title": "01 01 00 00", "page": 11, "level": 1, "parent_id": null, "full_path": "01010101 - 01 01 00 00", "tags": [], "content": "[Content for 01010101 - 01 01 00 00 would be extracted from page 11]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "8.3", "title": "Policy Engine", "page": 424, "level": 2, "parent_id": null, "full_path": "8.3 - Policy Engine", "tags": [], "content": "[Content for 8.3 - Policy Engine would be extracted from page 424]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "6.4", "title": "Data Message", "page": 138, "level": 2, "parent_id": null, "full_path": "6.4 - Data Message", "tags": [], "content": "[Content for 6.4 - Data Message would be extracted from page 138]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "6.11", "title": "Message Discarding", "page": 274, "level": 2, "parent_id": null, "full_path": "6.11 - Message Discarding", "tags": [], "content": "[Content for 6.11 - Message Discarding would be extracted from page 274]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "7.2", "title": "Sink Requirements", "page": 335, "level": 2, "parent_id": null, "full_path": "7.2 - Sink Requirements", "tags": [], "content": "[Content for 7.2 - Sink Requirements would be extracted from page 335]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "6.2", "title": "Messages", "page": 115, "level": 2, "parent_id": null, "full_path": "6.2 - Messages", "tags": [], "content": "[Content for 6.2 - Messages would be extracted from page 115]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "10.3", "title": "Sink Power Rules", "page": 1013, "level": 2, "parent_id": null, "full_path": "10.3 - Sink Power Rules", "tags": [], "content": "[Content for 10.3 - Sink Power Rules would be extracted from page 1013]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "7.3", "title": "Transitions", "page": 339, "level": 2, "parent_id": null, "full_path": "7.3 - Transitions", "tags": [], "content": "[Content for 7.3 - Transitions would be extracted from page 339]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "1.4", "title": "Conventions", "page": 37, "level": 2, "parent_id": null, "full_path": "1.4 - Conventions", "tags": [], "content": "[Content for 1.4 - Conventions would be extracted from page 37]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "8.2", "title": "Device Policy Manager", "page": 417, "level": 2, "parent_id": null, "full_path": "8.2 - Device Policy Manager", "tags": [], "content": "[Content for 8.2 - Device Policy Manager would be extracted from page 417]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "2.5.3", "title": "Cable Plugs", "page": 65, "level": 3, "parent_id": null, "full_path": "2.5.3 - Cable Plugs", "tags": [], "content": "[Content for 2.5.3 - Cable Plugs would be extracted from page 65]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "6.10", "title": "Collision Avoidance", "page": 273, "level": 2, "parent_id": null, "full_path": "6.10 - Collision Avoidance", "tags": [], "content": "[Content for 6.10 - Collision Avoidance would be extracted from page 273]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "6.9", "title": "Accept, Reject and Wait", "page": 272, "level": 2, "parent_id": null, "full_path": "6.9 - Accept, Reject and Wait", "tags": [], "content": "[Content for 6.9 - Accept, Reject and Wait would be extracted from page 272]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "5.3", "title": "Symbol Encoding", "page": 80, "level": 2, "parent_id": null, "full_path": "5.3 - Symbol Encoding", "tags": [], "content": "[Content for 5.3 - Symbol Encoding would be extracted from page 80]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "6.14", "title": "Value Parameters", "page": 311, "level": 2, "parent_id": null, "full_path": "6.14 - Value Parameters", "tags": [], "content": "[Content for 6.14 - Value Parameters would be extracted from page 311]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "2.8", "title": "Charging Models", "page": 75, "level": 2, "parent_id": null, "full_path": "2.8 - Charging Models", "tags": [], "content": "[Content for 2.8 - Charging Models would be extracted from page 75]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "5.6.5", "title": "Cable Reset", "page": 90, "level": 3, "parent_id": null, "full_path": "5.6.5 - Cable Reset", "tags": [], "content": "[Content for 5.6.5 - Cable Reset would be extracted from page 90]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "1.7", "title": "Parameter Values", "page": 52, "level": 2, "parent_id": null, "full_path": "1.7 - Parameter Values", "tags": [], "content": "[Content for 1.7 - Parameter Values would be extracted from page 52]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "5.6.3", "title": "Packet Detection Errors", "page": 89, "level": 3, "parent_id": null, "full_path": "5.6.3 - Packet Detection Errors", "tags": [], "content": "[Content for 5.6.3 - Packet Detection Errors would be extracted from page 89]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "6.7", "title": "Counters", "page": 265, "level": 2, "parent_id": null, "full_path": "6.7 - Counters", "tags": [], "content": "[Content for 6.7 - Counters would be extracted from page 265]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "2.2", "title": "Compatibility with Revision 2.0", "page": 54, "level": 2, "parent_id": null, "full_path": "2.2 - Compatibility with Revision 2.0", "tags": [], "content": "[Content for 2.2 - Compatibility with Revision 2.0 would be extracted from page 54]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "9.2", "title": "PD Specific Descriptors", "page": 985, "level": 2, "parent_id": null, "full_path": "9.2 - PD Specific Descriptors", "tags": [], "content": "[Content for 9.2 - PD Specific Descriptors would be extracted from page 985]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "6.12", "title": "State behavior", "page": 275, "level": 2, "parent_id": null, "full_path": "6.12 - State behavior", "tags": [], "content": "[Content for 6.12 - State behavior would be extracted from page 275]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "1.9", "title": "Compatibility with Revision 2.0", "page": 52, "level": 2, "parent_id": null, "full_path": "1.9 - Compatibility with Revision 2.0", "tags": [], "content": "[Content for 1.9 - Compatibility with Revision 2.0 would be extracted from page 52]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "1.2.1", "title": "Scope", "page": 36, "level": 3, "parent_id": null, "full_path": "1.2.1 - Scope", "tags": [], "content": "[Content for 1.2.1 - Scope would be extracted from page 36]"}
{"doc_title": "USB Power Delivery Specification", "section_id": "2.5", "title": "Operational Overview", "page": 59, "level": 2, "parent_id": null, "full_path": "2.5 - Operational Overview", "tags": [], "content": "[Content for 2.5 - Operational Overview would be extracted from page 59]"}
